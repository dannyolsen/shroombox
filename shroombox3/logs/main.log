2025-03-06 13:19:09,692 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:09,694 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:09,770 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:09,784 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:09,784 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:09,863 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:15,706 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:15,707 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:15,757 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:15,759 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:15,760 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:15,816 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:21,698 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:21,698 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:21,748 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:21,754 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:21,755 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:21,806 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:27,693 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:27,693 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:27,741 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:27,750 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:27,751 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:27,800 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:33,689 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:33,689 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:33,761 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:33,764 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:33,764 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:33,817 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:39,701 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:39,701 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:39,750 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:39,752 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:39,752 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:39,804 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:45,695 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:45,696 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:45,744 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:45,750 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:45,750 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:45,798 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:51,687 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:51,687 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:51,739 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:51,747 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:51,747 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:51,803 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:57,693 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:57,694 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:57,774 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:19:57,781 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:19:57,782 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:19:57,833 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:03,691 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:03,692 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:03,743 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:03,751 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:03,752 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:03,802 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:09,695 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:09,696 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:09,744 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:09,749 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:09,750 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:09,870 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:15,698 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:15,699 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:15,749 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:15,754 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:15,755 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:15,803 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:21,683 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:21,683 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:21,753 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:21,758 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:21,759 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:21,814 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:27,696 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:27,696 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:27,745 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:27,747 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:20:27,748 - shroombox - INFO - Using InfluxDB for measurements
2025-03-06 13:20:27,797 - shroombox - INFO - Retrieved measurements: {'temperature': 20.5, 'humidity': 32.5, 'co2': 575.0}
2025-03-06 13:20:33,236 - shroombox - INFO - Received shutdown signal, cleaning up...
2025-03-06 13:20:33,325 - shroombox - INFO - 
=== Cleaning up resources ===
2025-03-06 13:20:33,326 - shroombox - INFO - ✓ Fan stopped
2025-03-06 13:20:33,326 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:20:33,493 - shroombox - INFO - Successfully set heater to OFF
2025-03-06 13:20:33,536 - shroombox - INFO - ✓ Heater turned off
2025-03-06 13:20:33,537 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:20:33,572 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:20:33,573 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:20:33,573 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:20:33,574 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:20:33,575 - shroombox - INFO - ✓ Humidifier turned off
2025-03-06 13:20:33,575 - shroombox - INFO - ✓ InfluxDB client closed
2025-03-06 13:20:33,575 - shroombox - INFO - ✓ Cleanup completed
2025-03-06 13:20:38,329 - shroombox - INFO - 
=== Cleaning up resources ===
2025-03-06 13:20:38,329 - shroombox - INFO - ✓ Fan stopped
2025-03-06 13:20:38,330 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:20:38,423 - shroombox - INFO - ✓ Heater turned off
2025-03-06 13:20:38,424 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:20:38,436 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:20:38,437 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:20:38,437 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:20:38,438 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:20:38,439 - shroombox - INFO - ✓ Humidifier turned off
2025-03-06 13:20:38,439 - shroombox - INFO - ✓ InfluxDB client closed
2025-03-06 13:20:38,439 - shroombox - INFO - ✓ Cleanup completed
2025-03-06 13:26:18,344 - shroombox - INFO - Environment variables loaded:
2025-03-06 13:26:18,361 - shroombox - INFO - INFLUXDB_URL: http://localhost:8086
2025-03-06 13:26:18,361 - shroombox - INFO - INFLUXDB_ORG: supershrooms
2025-03-06 13:26:18,361 - shroombox - INFO - INFLUXDB_BUCKET: test
2025-03-06 13:26:18,361 - shroombox - INFO - ==================================================
2025-03-06 13:26:26,230 - shroombox - INFO - 
=== Starting Initial Device Scan ===
2025-03-06 13:26:26,230 - shroombox - INFO - 
Before scan - Current settings in settings.json:
2025-03-06 13:26:26,244 - shroombox - INFO - Number of devices: 2
2025-03-06 13:26:26,244 - shroombox - INFO -   - Humidifier (192.168.8.181) - Role: humidifier
2025-03-06 13:26:26,245 - shroombox - INFO -   - Heatmat (192.168.8.164) - Role: heater
2025-03-06 13:26:26,245 - shroombox - INFO - 
Scanning for devices...
2025-03-06 13:26:26,246 - shroombox.device - INFO - Starting device scan and settings update...
2025-03-06 13:26:26,246 - shroombox.device - INFO - Starting Kasa device discovery...
2025-03-06 13:26:26,282 - shroombox - INFO - Environment variables loaded:
2025-03-06 13:26:26,283 - shroombox - INFO - INFLUXDB_URL: http://localhost:8086
2025-03-06 13:26:26,284 - shroombox - INFO - INFLUXDB_ORG: supershrooms
2025-03-06 13:26:26,285 - shroombox - INFO - INFLUXDB_BUCKET: test
2025-03-06 13:26:26,286 - shroombox - INFO - ==================================================
2025-03-06 13:26:26,325 - shroombox - INFO - Checking I2C bus before sensor initialization...
2025-03-06 13:26:26,327 - shroombox - WARNING - Could not check I2C bus: [Errno 2] No such file or directory: 'i2cdetect'
2025-03-06 13:26:26,328 - shroombox.sensor - INFO - Initializing SCD30 sensor...
2025-03-06 13:26:26,350 - shroombox.sensor - INFO - SCD30 sensor initialized successfully
2025-03-06 13:26:26,358 - shroombox - INFO - Current working directory: /home/danny/Github/shroombox/shroombox3
2025-03-06 13:26:26,358 - shroombox - INFO - Looking for config at: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:26,359 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:26,359 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:26:26,359 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:26:26,360 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:26,360 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:26:26,360 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:26:26,361 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:26:26,361 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:26:26,361 - shroombox - INFO - Config last modified: 2025-03-06 13:20:38.431320
2025-03-06 13:26:26,362 - shroombox.sensor - INFO - Initializing SCD30 sensor...
2025-03-06 13:26:26,384 - shroombox.sensor - INFO - SCD30 sensor initialized successfully
2025-03-06 13:26:26,384 - shroombox - INFO - Loaded device assignments - Heater: 192.168.8.164, Humidifier: 192.168.8.181
2025-03-06 13:26:26,385 - shroombox - INFO - 
Initializing PIDs:
2025-03-06 13:26:26,385 - shroombox - INFO - Phase: colonisation
2025-03-06 13:26:26,385 - shroombox - INFO - RH Setpoint: 20.0
2025-03-06 13:26:26,385 - shroombox - INFO - CO2 Setpoint: 500
2025-03-06 13:26:26,385 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:26:26,386 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:26,387 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:26:26,389 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:26:26,392 - shroombox - INFO - Updating humidity PID tunings: (0.2, 0.01, 0.05) -> (0.2, 0.01, 0.0)
2025-03-06 13:26:26,393 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:26:26,393 - shroombox - INFO - 
=== Initializing InfluxDB Client ===
2025-03-06 13:26:26,393 - shroombox - INFO - URL: http://localhost:8086
2025-03-06 13:26:26,394 - shroombox - INFO - Organization: supershrooms
2025-03-06 13:26:26,394 - shroombox - INFO - Bucket: test
2025-03-06 13:26:26,519 - shroombox - ERROR - ❌ InfluxDB connection test failed: <urllib3.connection.HTTPConnection object at 0x7f991c2350>: Failed to establish a new connection: [Errno 111] Connection refused
2025-03-06 13:26:26,520 - shroombox - INFO - Controller initialized successfully
2025-03-06 13:26:31,799 - shroombox.device - INFO - Found 2 devices on network
2025-03-06 13:26:32,561 - shroombox.device - INFO - ✓ Found Tapo P115: Humidifier at 192.168.8.181
2025-03-06 13:26:32,631 - shroombox.device - INFO - ✓ Found Tapo P115: Heatmat at 192.168.8.164
2025-03-06 13:26:32,631 - shroombox.device - INFO - Discovery complete. Found 2 Tapo P115 devices
2025-03-06 13:26:32,642 - shroombox.device - INFO - Successfully updated settings with 2 devices
2025-03-06 13:26:32,642 - shroombox - INFO - 
After scan - Updated settings in settings.json:
2025-03-06 13:26:32,643 - shroombox - INFO - 
Found and saved 2 devices:
2025-03-06 13:26:32,644 - shroombox - INFO - 
Device Details:
2025-03-06 13:26:32,644 - shroombox - INFO -   Name: Humidifier
2025-03-06 13:26:32,644 - shroombox - INFO -   IP: 192.168.8.181
2025-03-06 13:26:32,645 - shroombox - INFO -   MAC: B0-19-21-C4-C9-9D
2025-03-06 13:26:32,645 - shroombox - INFO -   Model: P115
2025-03-06 13:26:32,645 - shroombox - INFO -   Role: humidifier
2025-03-06 13:26:32,646 - shroombox - INFO -   State: OFF
2025-03-06 13:26:32,647 - shroombox - INFO - 
Device Details:
2025-03-06 13:26:32,648 - shroombox - INFO -   Name: Heatmat
2025-03-06 13:26:32,648 - shroombox - INFO -   IP: 192.168.8.164
2025-03-06 13:26:32,648 - shroombox - INFO -   MAC: B0-19-21-C4-CE-97
2025-03-06 13:26:32,649 - shroombox - INFO -   Model: P115
2025-03-06 13:26:32,649 - shroombox - INFO -   Role: heater
2025-03-06 13:26:32,650 - shroombox - INFO -   State: OFF
2025-03-06 13:26:32,651 - shroombox - INFO - 
No changes detected - settings.json remains the same.
2025-03-06 13:26:32,651 - shroombox - INFO - 
=== Device Scan Complete ===

2025-03-06 13:26:32,652 - shroombox - INFO - Current working directory: /home/danny/Github/shroombox/shroombox3
2025-03-06 13:26:32,653 - shroombox - INFO - Looking for config at: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:32,653 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:32,653 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:26:32,654 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:26:32,655 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:32,655 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:26:32,656 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:26:32,656 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:26:32,656 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:26:32,657 - shroombox - INFO - Config last modified: 2025-03-06 13:26:32.640000
2025-03-06 13:26:32,657 - shroombox.sensor - INFO - Initializing SCD30 sensor...
2025-03-06 13:26:32,671 - shroombox.sensor - INFO - SCD30 sensor initialized successfully
2025-03-06 13:26:32,672 - shroombox - INFO - Loaded device assignments - Heater: 192.168.8.164, Humidifier: 192.168.8.181
2025-03-06 13:26:32,672 - shroombox - INFO - 
Initializing PIDs:
2025-03-06 13:26:32,672 - shroombox - INFO - Phase: colonisation
2025-03-06 13:26:32,672 - shroombox - INFO - RH Setpoint: 20.0
2025-03-06 13:26:32,672 - shroombox - INFO - CO2 Setpoint: 500
2025-03-06 13:26:32,673 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:26:32,673 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:32,673 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:26:32,673 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:26:32,673 - shroombox - INFO - Updating humidity PID tunings: (0.2, 0.01, 0.05) -> (0.2, 0.01, 0.0)
2025-03-06 13:26:32,674 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:26:32,674 - shroombox - INFO - 
=== Initializing InfluxDB Client ===
2025-03-06 13:26:32,674 - shroombox - INFO - URL: http://localhost:8086
2025-03-06 13:26:32,674 - shroombox - INFO - Organization: supershrooms
2025-03-06 13:26:32,674 - shroombox - INFO - Bucket: test
2025-03-06 13:26:32,700 - shroombox - ERROR - ❌ InfluxDB connection test failed: <urllib3.connection.HTTPConnection object at 0x7f90db5b90>: Failed to establish a new connection: [Errno 111] Connection refused
2025-03-06 13:26:32,701 - shroombox.device - INFO - Starting device scan and settings update...
2025-03-06 13:26:32,701 - shroombox.device - INFO - Starting Kasa device discovery...
2025-03-06 13:26:37,711 - shroombox.device - INFO - Found 2 devices on network
2025-03-06 13:26:37,755 - shroombox.device - INFO - ✓ Found Tapo P115: Humidifier at 192.168.8.181
2025-03-06 13:26:37,811 - shroombox.device - INFO - ✓ Found Tapo P115: Heatmat at 192.168.8.164
2025-03-06 13:26:37,823 - shroombox.device - INFO - Discovery complete. Found 2 Tapo P115 devices
2025-03-06 13:26:37,825 - shroombox.device - INFO - Successfully updated settings with 2 devices
2025-03-06 13:26:37,836 - shroombox - INFO - 
=== Starting Main Control Loop ===
2025-03-06 13:26:37,859 - shroombox.sensor - INFO - Successful measurement at 13:26:37 - CO2: 567.13ppm, Temp: 22.97°C, RH: 29.12%
2025-03-06 13:26:37,859 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.0°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:26:37,860 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=OFF
2025-03-06 13:26:37,864 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:26:37,913 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:26:37,914 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:26:38,017 - shroombox - INFO - Heater set to OFF - Temp: 22.97°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:26:38,078 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:26:38,081 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.1%, Setpoint=20.0%
2025-03-06 13:26:38,081 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:26:38,082 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:26:38,083 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:26:38,132 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:26:38,132 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:26:38,133 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:26:38,134 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:26:38,135 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:38,136 - shroombox - INFO - Last modified time: 2025-03-06 13:26:38
2025-03-06 13:26:38,136 - shroombox - INFO - Last checked time: 2025-03-06 13:26:32
2025-03-06 13:26:38,136 - shroombox - INFO - Current time: 2025-03-06 13:26:38
2025-03-06 13:26:38,136 - shroombox - INFO - Config file modified at 2025-03-06 13:26:38.132000, reloading...
2025-03-06 13:26:38,137 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
  ...
2025-03-06 13:26:38,137 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:38,137 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:26:38,137 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:26:38,138 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:38,138 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:26:38,138 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:26:38,138 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:26:38,138 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:26:38,139 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:26:38,139 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:26:38,139 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:26:38,139 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:26:38,140 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:26:38,140 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:26:38,140 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:26:38,141 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:26:38,141 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:38,141 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:26:38,141 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:26:38,141 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:26:38,142 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:26:38,182 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:26:38,182 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:26:38,226 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:26:38,226 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:26:38,227 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:38,228 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:26:38,228 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:26:38,228 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:26:38,229 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:26:38,229 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:26:38,229 - shroombox - INFO - =======================================================
2025-03-06 13:26:38,229 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows OFF but should be ON
2025-03-06 13:26:38,229 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to ON
2025-03-06 13:26:38,229 - shroombox - INFO - Setting heater to ON
2025-03-06 13:26:38,424 - shroombox - INFO - Successfully set heater to ON
2025-03-06 13:26:38,522 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:26:40,197 - shroombox.sensor - INFO - Successful measurement at 13:26:40 - CO2: 566.94ppm, Temp: 22.94°C, RH: 29.15%
2025-03-06 13:26:40,198 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:26:40,199 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:26:40,200 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:26:40,248 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:26:40,250 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:26:40,316 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:26:40,317 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:26:40,317 - shroombox - INFO - Heater set to OFF - Temp: 22.94°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:26:40,457 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:26:40,457 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.1%, Setpoint=20.0%
2025-03-06 13:26:40,458 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:26:40,458 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:26:40,458 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:26:40,477 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:26:40,477 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:26:40,478 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:26:40,479 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:26:40,479 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:40,479 - shroombox - INFO - Last modified time: 2025-03-06 13:26:40
2025-03-06 13:26:40,480 - shroombox - INFO - Last checked time: 2025-03-06 13:26:38
2025-03-06 13:26:40,480 - shroombox - INFO - Current time: 2025-03-06 13:26:40
2025-03-06 13:26:40,480 - shroombox - INFO - Config file modified at 2025-03-06 13:26:40.476000, reloading...
2025-03-06 13:26:40,480 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:26:40,481 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:40,481 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:26:40,481 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:26:40,481 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:40,482 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:26:40,482 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:26:40,482 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:26:40,482 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:26:40,482 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:26:40,482 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:26:40,483 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:26:40,483 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:26:40,483 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> True
2025-03-06 13:26:40,483 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:26:40,483 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:26:40,483 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:26:40,484 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:40,484 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:26:40,484 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:26:40,484 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:26:40,485 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:26:40,587 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:26:40,588 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:26:40,633 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:26:40,633 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:26:40,634 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:40,634 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:26:40,634 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:26:40,634 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:26:40,635 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:26:40,635 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:26:40,635 - shroombox - INFO - =======================================================
2025-03-06 13:26:40,635 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:26:42,605 - shroombox.sensor - INFO - Successful measurement at 13:26:42 - CO2: 565.37ppm, Temp: 22.93°C, RH: 29.27%
2025-03-06 13:26:42,605 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:26:42,605 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:26:42,606 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:26:42,657 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:26:42,658 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:26:42,734 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:26:42,734 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:26:42,734 - shroombox - INFO - Heater set to OFF - Temp: 22.93°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:26:42,759 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:26:42,760 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.3%, Setpoint=20.0%
2025-03-06 13:26:42,760 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:26:42,760 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:26:42,760 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:26:42,781 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:26:42,781 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:26:42,782 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:26:42,783 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:26:42,784 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:42,785 - shroombox - INFO - Last modified time: 2025-03-06 13:26:42
2025-03-06 13:26:42,786 - shroombox - INFO - Last checked time: 2025-03-06 13:26:40
2025-03-06 13:26:42,786 - shroombox - INFO - Current time: 2025-03-06 13:26:42
2025-03-06 13:26:42,787 - shroombox - INFO - Config file modified at 2025-03-06 13:26:42.780000, reloading...
2025-03-06 13:26:42,788 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:26:42,789 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:42,790 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:26:42,791 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:26:42,792 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:42,793 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:26:42,793 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:26:42,794 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:26:42,797 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:26:42,798 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:26:42,798 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:26:42,799 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:26:42,800 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:26:42,800 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:26:42,801 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:26:42,801 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:26:42,801 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:26:42,802 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:42,802 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:26:42,803 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:26:42,803 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:26:42,804 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:26:42,832 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:26:42,832 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:26:42,883 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:26:42,884 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:26:42,885 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:42,885 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:26:42,885 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:26:42,885 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:26:42,886 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:26:42,887 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:26:42,891 - shroombox - INFO - =======================================================
2025-03-06 13:26:42,892 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:26:44,844 - shroombox.sensor - INFO - Successful measurement at 13:26:44 - CO2: 564.19ppm, Temp: 22.89°C, RH: 29.29%
2025-03-06 13:26:44,845 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:26:44,845 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:26:44,845 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:26:44,891 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:26:44,892 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:26:44,966 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:26:44,967 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:26:44,967 - shroombox - INFO - Heater set to OFF - Temp: 22.89°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:26:45,025 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:26:45,026 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.3%, Setpoint=20.0%
2025-03-06 13:26:45,027 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:26:45,027 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:26:45,028 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:26:45,042 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:26:45,043 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:26:45,043 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:26:45,049 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:26:45,050 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:45,050 - shroombox - INFO - Last modified time: 2025-03-06 13:26:45
2025-03-06 13:26:45,051 - shroombox - INFO - Last checked time: 2025-03-06 13:26:42
2025-03-06 13:26:45,052 - shroombox - INFO - Current time: 2025-03-06 13:26:45
2025-03-06 13:26:45,052 - shroombox - INFO - Config file modified at 2025-03-06 13:26:45.048000, reloading...
2025-03-06 13:26:45,052 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:26:45,053 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:45,053 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:26:45,054 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:26:45,054 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:26:45,055 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:26:45,055 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:26:45,056 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:26:45,059 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:26:45,059 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:26:45,062 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:26:45,062 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:26:45,063 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:26:45,063 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:26:45,063 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:26:45,064 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:26:45,064 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:26:45,064 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:45,065 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:26:45,065 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:26:45,066 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:26:45,066 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:26:45,107 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:26:45,107 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:26:45,156 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:26:45,157 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:26:45,157 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:26:45,157 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:26:45,157 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:26:45,158 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:26:45,158 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:26:45,158 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:26:45,159 - shroombox - INFO - =======================================================
2025-03-06 13:26:45,159 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:05,456 - shroombox.sensor - INFO - Successful measurement at 13:27:05 - CO2: 565.45ppm, Temp: 22.85°C, RH: 29.33%
2025-03-06 13:27:05,456 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:05,457 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:05,457 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:27:05,498 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:05,501 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:05,574 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:05,575 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:05,575 - shroombox - INFO - Heater set to OFF - Temp: 22.85°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:05,595 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:05,597 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.3%, Setpoint=20.0%
2025-03-06 13:27:05,598 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:05,599 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:05,600 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:05,616 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:05,617 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:05,618 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:05,620 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:05,620 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:05,621 - shroombox - INFO - Last modified time: 2025-03-06 13:27:05
2025-03-06 13:27:05,626 - shroombox - INFO - Last checked time: 2025-03-06 13:26:45
2025-03-06 13:27:05,627 - shroombox - INFO - Current time: 2025-03-06 13:27:05
2025-03-06 13:27:05,627 - shroombox - INFO - Config file modified at 2025-03-06 13:27:05.615087, reloading...
2025-03-06 13:27:05,628 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:05,629 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:05,630 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:05,631 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:05,632 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:05,635 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:05,636 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:05,637 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:05,639 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:05,640 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:05,641 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:05,642 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:05,644 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:05,645 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:05,647 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:05,649 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:05,650 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:05,652 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:05,653 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:05,654 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:05,655 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:05,656 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:05,704 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:05,705 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:05,755 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:05,756 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:05,756 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:05,756 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:05,757 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:05,757 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:05,758 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:05,758 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:05,758 - shroombox - INFO - =======================================================
2025-03-06 13:27:05,758 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:07,724 - shroombox.sensor - INFO - Successful measurement at 13:27:07 - CO2: 565.05ppm, Temp: 22.83°C, RH: 29.38%
2025-03-06 13:27:07,725 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:07,725 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:07,732 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:27:07,791 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:07,792 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:07,862 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:07,863 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:07,863 - shroombox - INFO - Heater set to OFF - Temp: 22.83°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:07,879 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:07,880 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.4%, Setpoint=20.0%
2025-03-06 13:27:07,880 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:07,881 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:07,881 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:07,896 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:07,896 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:07,897 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:07,898 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:07,900 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:07,900 - shroombox - INFO - Last modified time: 2025-03-06 13:27:07
2025-03-06 13:27:07,901 - shroombox - INFO - Last checked time: 2025-03-06 13:27:05
2025-03-06 13:27:07,901 - shroombox - INFO - Current time: 2025-03-06 13:27:07
2025-03-06 13:27:07,901 - shroombox - INFO - Config file modified at 2025-03-06 13:27:07.895087, reloading...
2025-03-06 13:27:07,902 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:07,903 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:07,905 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:07,906 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:07,906 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:07,907 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:07,907 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:07,907 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:07,908 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:07,908 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:07,908 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:07,909 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:07,909 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:07,910 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:07,910 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:07,910 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:07,910 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:07,911 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:07,911 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:07,911 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:07,911 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:07,912 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:07,937 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:07,937 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:07,988 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:07,988 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:07,989 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:07,990 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:07,990 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:07,990 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:07,991 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:07,991 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:07,991 - shroombox - INFO - =======================================================
2025-03-06 13:27:07,992 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:09,957 - shroombox.sensor - INFO - Successful measurement at 13:27:09 - CO2: 564.36ppm, Temp: 22.83°C, RH: 29.41%
2025-03-06 13:27:09,962 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:09,962 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:09,963 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:27:10,011 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:10,013 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:10,087 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:10,091 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:10,091 - shroombox - INFO - Heater set to OFF - Temp: 22.83°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:10,127 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:10,127 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.4%, Setpoint=20.0%
2025-03-06 13:27:10,128 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:10,128 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:10,128 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:10,142 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:10,142 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:10,144 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:10,147 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:10,148 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:10,148 - shroombox - INFO - Last modified time: 2025-03-06 13:27:10
2025-03-06 13:27:10,148 - shroombox - INFO - Last checked time: 2025-03-06 13:27:07
2025-03-06 13:27:10,149 - shroombox - INFO - Current time: 2025-03-06 13:27:10
2025-03-06 13:27:10,149 - shroombox - INFO - Config file modified at 2025-03-06 13:27:10.139087, reloading...
2025-03-06 13:27:10,150 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:10,150 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:10,150 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:10,151 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:10,151 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:10,152 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:10,152 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:10,152 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:10,152 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:10,153 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:10,153 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:10,154 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:10,155 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:10,155 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:10,156 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:10,156 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:10,156 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:10,156 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:10,157 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:10,157 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:10,158 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:10,159 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:10,196 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:10,196 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:10,240 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:10,241 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:10,241 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:10,242 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:10,242 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:10,242 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:10,243 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:10,243 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:10,243 - shroombox - INFO - =======================================================
2025-03-06 13:27:10,243 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:12,214 - shroombox.sensor - INFO - Successful measurement at 13:27:12 - CO2: 564.16ppm, Temp: 22.77°C, RH: 29.47%
2025-03-06 13:27:12,215 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:12,215 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:12,216 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:27:12,259 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:12,260 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:12,310 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:12,311 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:12,311 - shroombox - INFO - Heater set to OFF - Temp: 22.77°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:12,379 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:12,380 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.5%, Setpoint=20.0%
2025-03-06 13:27:12,380 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:12,380 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:12,380 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:12,393 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:12,394 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:12,394 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:12,396 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:12,397 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:12,397 - shroombox - INFO - Last modified time: 2025-03-06 13:27:12
2025-03-06 13:27:12,397 - shroombox - INFO - Last checked time: 2025-03-06 13:27:10
2025-03-06 13:27:12,398 - shroombox - INFO - Current time: 2025-03-06 13:27:12
2025-03-06 13:27:12,398 - shroombox - INFO - Config file modified at 2025-03-06 13:27:12.391087, reloading...
2025-03-06 13:27:12,398 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:12,399 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:12,399 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:12,399 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:12,400 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:12,400 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:12,401 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:12,401 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:12,402 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:12,402 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:12,402 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:12,402 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:12,403 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:12,403 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:12,403 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:12,403 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:12,404 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:12,404 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:12,404 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:12,405 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:12,405 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:12,405 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:12,436 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:12,437 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:12,483 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:12,483 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:12,483 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:12,484 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:12,484 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:12,484 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:12,484 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:12,484 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:12,485 - shroombox - INFO - =======================================================
2025-03-06 13:27:12,485 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:14,455 - shroombox.sensor - INFO - Successful measurement at 13:27:14 - CO2: 563.66ppm, Temp: 22.77°C, RH: 29.5%
2025-03-06 13:27:14,456 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:14,456 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:14,456 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:27:14,502 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:14,502 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:14,580 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:14,580 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:14,581 - shroombox - INFO - Heater set to OFF - Temp: 22.77°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:14,602 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:14,602 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.5%, Setpoint=20.0%
2025-03-06 13:27:14,603 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:14,603 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:14,603 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:14,618 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:14,619 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:14,621 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:14,623 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:14,624 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:14,625 - shroombox - INFO - Last modified time: 2025-03-06 13:27:14
2025-03-06 13:27:14,626 - shroombox - INFO - Last checked time: 2025-03-06 13:27:12
2025-03-06 13:27:14,627 - shroombox - INFO - Current time: 2025-03-06 13:27:14
2025-03-06 13:27:14,628 - shroombox - INFO - Config file modified at 2025-03-06 13:27:14.619087, reloading...
2025-03-06 13:27:14,628 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:14,629 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:14,630 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:14,631 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:14,632 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:14,632 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:14,633 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:14,634 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:14,634 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:14,635 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:14,635 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:14,636 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:14,636 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:14,637 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:14,638 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:14,638 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:14,642 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:14,642 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:14,643 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:14,644 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:14,645 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:14,646 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:14,671 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:14,672 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:14,714 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:14,715 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:14,715 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:14,716 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:14,716 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:14,716 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:14,717 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:14,717 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:14,722 - shroombox - INFO - =======================================================
2025-03-06 13:27:14,722 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:16,690 - shroombox.sensor - INFO - Successful measurement at 13:27:16 - CO2: 562.41ppm, Temp: 22.77°C, RH: 29.57%
2025-03-06 13:27:16,691 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:16,692 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:16,692 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:27:16,738 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:16,739 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:16,812 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:16,813 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:16,813 - shroombox - INFO - Heater set to OFF - Temp: 22.77°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:16,834 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:16,835 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.6%, Setpoint=20.0%
2025-03-06 13:27:16,835 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:16,835 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.6% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:16,835 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:16,853 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:16,854 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:16,854 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:16,857 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:16,859 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:16,861 - shroombox - INFO - Last modified time: 2025-03-06 13:27:16
2025-03-06 13:27:16,863 - shroombox - INFO - Last checked time: 2025-03-06 13:27:14
2025-03-06 13:27:16,864 - shroombox - INFO - Current time: 2025-03-06 13:27:16
2025-03-06 13:27:16,865 - shroombox - INFO - Config file modified at 2025-03-06 13:27:16.851087, reloading...
2025-03-06 13:27:16,866 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:16,867 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:16,869 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:16,871 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:16,874 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:16,875 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:16,876 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:16,877 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:16,878 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:16,879 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:16,879 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:16,880 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:16,880 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:16,881 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:16,882 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:16,883 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:16,884 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:16,885 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:16,886 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:16,887 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:16,887 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:16,888 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:16,914 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:16,916 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:16,960 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:16,961 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:16,961 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:16,961 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:16,961 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:16,962 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:16,962 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:16,962 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:16,963 - shroombox - INFO - =======================================================
2025-03-06 13:27:16,963 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:18,932 - shroombox.sensor - INFO - Successful measurement at 13:27:18 - CO2: 562.37ppm, Temp: 22.75°C, RH: 29.69%
2025-03-06 13:27:18,933 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:18,934 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:18,935 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:27:18,986 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:18,986 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:19,070 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:19,071 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:19,071 - shroombox - INFO - Heater set to OFF - Temp: 22.75°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:19,085 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:19,086 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.7%, Setpoint=20.0%
2025-03-06 13:27:19,086 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:19,087 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.7% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:19,087 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:19,100 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:19,100 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:19,101 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:19,103 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:19,103 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:19,105 - shroombox - INFO - Last modified time: 2025-03-06 13:27:19
2025-03-06 13:27:19,106 - shroombox - INFO - Last checked time: 2025-03-06 13:27:16
2025-03-06 13:27:19,106 - shroombox - INFO - Current time: 2025-03-06 13:27:19
2025-03-06 13:27:19,107 - shroombox - INFO - Config file modified at 2025-03-06 13:27:19.099087, reloading...
2025-03-06 13:27:19,109 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:19,109 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:19,110 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:19,110 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:19,111 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:19,111 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:19,112 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:19,113 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:19,113 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:19,115 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:19,115 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:19,115 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:19,116 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:19,116 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:19,116 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:19,116 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:19,117 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:19,117 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:19,119 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:19,119 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:19,119 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:19,120 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:19,149 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:19,150 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:19,190 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:19,191 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:19,191 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:19,191 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:19,191 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:19,192 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:19,192 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:19,192 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:19,192 - shroombox - INFO - =======================================================
2025-03-06 13:27:19,193 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:21,170 - shroombox.sensor - INFO - Successful measurement at 13:27:21 - CO2: 562.34ppm, Temp: 22.71°C, RH: 29.89%
2025-03-06 13:27:21,170 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.7°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:21,171 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:21,171 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.7 < 21.5)
2025-03-06 13:27:21,216 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:21,217 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:21,285 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:21,286 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:21,286 - shroombox - INFO - Heater set to OFF - Temp: 22.71°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:21,303 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:21,303 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=29.9%, Setpoint=20.0%
2025-03-06 13:27:21,304 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:21,304 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 29.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:21,304 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:21,319 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:21,320 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:21,320 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:21,324 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:21,325 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:21,326 - shroombox - INFO - Last modified time: 2025-03-06 13:27:21
2025-03-06 13:27:21,326 - shroombox - INFO - Last checked time: 2025-03-06 13:27:19
2025-03-06 13:27:21,327 - shroombox - INFO - Current time: 2025-03-06 13:27:21
2025-03-06 13:27:21,327 - shroombox - INFO - Config file modified at 2025-03-06 13:27:21.319087, reloading...
2025-03-06 13:27:21,327 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:21,328 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:21,328 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:21,328 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:21,329 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:21,333 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:21,333 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:21,334 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:21,334 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:21,335 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:21,335 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:21,336 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:21,336 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:21,337 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:21,337 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:21,338 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:21,339 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:21,339 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:21,339 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:21,340 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:21,340 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:21,340 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:21,366 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:21,366 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:21,421 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:21,422 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:21,423 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:21,423 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:21,424 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:21,424 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:21,425 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:21,425 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:21,427 - shroombox - INFO - =======================================================
2025-03-06 13:27:21,428 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:23,385 - shroombox.sensor - INFO - Successful measurement at 13:27:23 - CO2: 564.05ppm, Temp: 22.72°C, RH: 30.08%
2025-03-06 13:27:23,386 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.7°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:23,386 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:23,387 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.7 < 21.5)
2025-03-06 13:27:23,435 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:27:23,435 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:27:23,506 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:27:23,507 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:27:23,508 - shroombox - INFO - Heater set to OFF - Temp: 22.72°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:23,529 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:27:23,533 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=30.1%, Setpoint=20.0%
2025-03-06 13:27:23,534 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:23,535 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 30.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:23,536 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:23,553 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:23,554 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:23,555 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:23,559 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:23,560 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:23,565 - shroombox - INFO - Last modified time: 2025-03-06 13:27:23
2025-03-06 13:27:23,566 - shroombox - INFO - Last checked time: 2025-03-06 13:27:21
2025-03-06 13:27:23,567 - shroombox - INFO - Current time: 2025-03-06 13:27:23
2025-03-06 13:27:23,567 - shroombox - INFO - Config file modified at 2025-03-06 13:27:23.555087, reloading...
2025-03-06 13:27:23,568 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:23,568 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:23,569 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:23,570 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:23,571 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:23,571 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:23,572 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:23,572 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:23,573 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:23,573 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:23,574 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:23,574 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:23,575 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:23,575 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:23,576 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:23,576 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:23,576 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:23,577 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:23,577 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:23,582 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:23,582 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:23,583 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:23,606 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:23,606 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:23,653 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:23,653 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:23,654 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:23,654 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:23,654 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:23,655 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:23,655 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:23,656 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:23,656 - shroombox - INFO - =======================================================
2025-03-06 13:27:23,657 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:25,600 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:25,601 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:25,601 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:25,602 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:25,602 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:25,602 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:25,649 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:25,650 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:25,752 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:25,776 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:25,777 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:25,782 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:25,784 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:25,785 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:25,799 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:25,800 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:25,801 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:25,806 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:25,809 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:25,814 - shroombox - INFO - Last modified time: 2025-03-06 13:27:25
2025-03-06 13:27:25,816 - shroombox - INFO - Last checked time: 2025-03-06 13:27:23
2025-03-06 13:27:25,817 - shroombox - INFO - Current time: 2025-03-06 13:27:25
2025-03-06 13:27:25,818 - shroombox - INFO - Config file modified at 2025-03-06 13:27:25.799087, reloading...
2025-03-06 13:27:25,819 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:25,821 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:25,822 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:25,823 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:25,825 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:25,827 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:25,828 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:25,829 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:25,830 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:25,834 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:25,834 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:25,835 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:25,835 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:25,835 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:25,836 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:25,836 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:25,836 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:25,837 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:25,841 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:25,842 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:25,842 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:25,842 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:25,858 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:25,858 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:25,859 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:25,908 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:25,909 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:25,910 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:25,910 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:25,910 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:25,911 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:25,911 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:25,912 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:25,912 - shroombox - INFO - =======================================================
2025-03-06 13:27:25,912 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:27,862 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:27,863 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:27,864 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:27,864 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:27,865 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:27,868 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:27,908 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:27,909 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:28,005 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:28,019 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:28,020 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:28,020 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:28,020 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:28,021 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:28,038 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:28,039 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:28,039 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:28,041 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:28,042 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:28,043 - shroombox - INFO - Last modified time: 2025-03-06 13:27:28
2025-03-06 13:27:28,043 - shroombox - INFO - Last checked time: 2025-03-06 13:27:25
2025-03-06 13:27:28,043 - shroombox - INFO - Current time: 2025-03-06 13:27:28
2025-03-06 13:27:28,044 - shroombox - INFO - Config file modified at 2025-03-06 13:27:28.035087, reloading...
2025-03-06 13:27:28,044 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:28,044 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:28,045 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:28,045 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:28,046 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:28,046 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:28,047 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:28,047 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:28,048 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:28,048 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:28,048 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:28,049 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:28,049 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:28,050 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:28,050 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:28,050 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:28,050 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:28,051 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:28,051 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:28,051 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:28,051 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:28,052 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:28,067 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:28,068 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:28,070 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:28,118 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:28,119 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:28,119 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:28,119 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:28,119 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:28,120 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:28,120 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:28,120 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:28,120 - shroombox - INFO - =======================================================
2025-03-06 13:27:28,121 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:30,069 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:30,070 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:30,070 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:30,071 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:30,072 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:30,072 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:30,131 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:30,131 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:30,235 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:30,251 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:30,252 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:30,253 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:30,255 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:30,256 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:30,270 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:30,271 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:30,272 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:30,273 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:30,277 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:30,278 - shroombox - INFO - Last modified time: 2025-03-06 13:27:30
2025-03-06 13:27:30,278 - shroombox - INFO - Last checked time: 2025-03-06 13:27:28
2025-03-06 13:27:30,279 - shroombox - INFO - Current time: 2025-03-06 13:27:30
2025-03-06 13:27:30,279 - shroombox - INFO - Config file modified at 2025-03-06 13:27:30.267087, reloading...
2025-03-06 13:27:30,280 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:30,281 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:30,281 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:30,282 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:30,283 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:30,284 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:30,285 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:30,285 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:30,286 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:30,286 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:30,287 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:30,287 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:30,288 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:30,289 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:30,289 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:30,290 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:30,291 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:30,291 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:30,292 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:30,292 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:30,292 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:30,293 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:30,313 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:30,314 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:30,315 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:30,369 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:30,370 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:30,370 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:30,371 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:30,374 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:30,374 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:30,375 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:30,375 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:30,376 - shroombox - INFO - =======================================================
2025-03-06 13:27:30,376 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:32,312 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:32,313 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:32,313 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:32,313 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:32,314 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:32,314 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:32,358 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:32,358 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:32,500 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:32,512 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:32,512 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:32,512 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:32,513 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:32,513 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:32,526 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:32,527 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:32,527 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:32,528 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:32,529 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:32,529 - shroombox - INFO - Last modified time: 2025-03-06 13:27:32
2025-03-06 13:27:32,530 - shroombox - INFO - Last checked time: 2025-03-06 13:27:30
2025-03-06 13:27:32,530 - shroombox - INFO - Current time: 2025-03-06 13:27:32
2025-03-06 13:27:32,530 - shroombox - INFO - Config file modified at 2025-03-06 13:27:32.523087, reloading...
2025-03-06 13:27:32,531 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:32,531 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:32,531 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:32,532 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:32,532 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:32,533 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:32,533 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:32,534 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:32,535 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:32,535 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:32,535 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:32,536 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:32,536 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:32,536 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:32,537 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:32,537 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:32,537 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:32,537 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:32,538 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:32,538 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:32,538 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:32,539 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:32,550 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:32,551 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:32,551 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:32,597 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:32,598 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:32,598 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:32,598 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:32,599 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:32,599 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:32,599 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:32,599 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:32,599 - shroombox - INFO - =======================================================
2025-03-06 13:27:32,600 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:34,552 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:34,553 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:34,553 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:34,554 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:34,555 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:34,555 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:34,602 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:34,602 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:34,703 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:34,718 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:34,719 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:34,719 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:34,719 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:34,720 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:34,732 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:34,733 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:34,734 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:34,735 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:34,736 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:34,737 - shroombox - INFO - Last modified time: 2025-03-06 13:27:34
2025-03-06 13:27:34,737 - shroombox - INFO - Last checked time: 2025-03-06 13:27:32
2025-03-06 13:27:34,737 - shroombox - INFO - Current time: 2025-03-06 13:27:34
2025-03-06 13:27:34,738 - shroombox - INFO - Config file modified at 2025-03-06 13:27:34.731087, reloading...
2025-03-06 13:27:34,738 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:34,738 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:34,739 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:34,739 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:34,740 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:34,740 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:34,740 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:34,740 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:34,741 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:34,741 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:34,741 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:34,742 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:34,742 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:34,742 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:34,743 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:34,743 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:34,743 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:34,744 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:34,744 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:34,744 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:34,744 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:34,745 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:34,758 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:34,759 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:34,759 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:34,814 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:34,815 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:34,816 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:34,816 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:34,817 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:34,817 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:34,817 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:34,818 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:34,818 - shroombox - INFO - =======================================================
2025-03-06 13:27:34,819 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:36,759 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:36,759 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:36,760 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:36,760 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:36,760 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:36,761 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:36,811 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:36,811 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:36,916 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:36,930 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:36,930 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:36,931 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:36,931 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:36,932 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:36,948 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:36,949 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:36,950 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:36,951 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:36,952 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:36,953 - shroombox - INFO - Last modified time: 2025-03-06 13:27:36
2025-03-06 13:27:36,953 - shroombox - INFO - Last checked time: 2025-03-06 13:27:34
2025-03-06 13:27:36,953 - shroombox - INFO - Current time: 2025-03-06 13:27:36
2025-03-06 13:27:36,954 - shroombox - INFO - Config file modified at 2025-03-06 13:27:36.947087, reloading...
2025-03-06 13:27:36,954 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:36,955 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:36,955 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:36,956 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:36,956 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:36,957 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:36,957 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:36,957 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:36,958 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:36,958 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:36,958 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:36,959 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:36,959 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:36,959 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:36,960 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:36,960 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:36,960 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:36,961 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:36,961 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:36,961 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:36,962 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:36,962 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:36,975 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:36,976 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:36,976 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:37,021 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:37,021 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:37,022 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:37,022 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:37,023 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:37,023 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:37,023 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:37,023 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:37,024 - shroombox - INFO - =======================================================
2025-03-06 13:27:37,024 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:38,976 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:38,976 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:38,977 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:38,977 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:38,977 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:38,977 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:39,032 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:39,033 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:39,140 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:39,150 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:39,151 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:39,151 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:39,151 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:39,151 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:39,165 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:39,165 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:39,166 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:39,168 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:39,168 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:39,169 - shroombox - INFO - Last modified time: 2025-03-06 13:27:39
2025-03-06 13:27:39,170 - shroombox - INFO - Last checked time: 2025-03-06 13:27:36
2025-03-06 13:27:39,170 - shroombox - INFO - Current time: 2025-03-06 13:27:39
2025-03-06 13:27:39,170 - shroombox - INFO - Config file modified at 2025-03-06 13:27:39.163087, reloading...
2025-03-06 13:27:39,171 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:39,171 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:39,171 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:39,172 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:39,172 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:39,172 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:39,173 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:39,173 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:39,173 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:39,173 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:39,174 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:39,174 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:39,174 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:39,174 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:39,175 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:39,175 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:39,175 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:39,175 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:39,175 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:39,176 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:39,176 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:39,176 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:39,187 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:39,187 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:39,187 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:39,232 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:39,233 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:39,233 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:39,233 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:39,233 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:39,233 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:39,234 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:39,234 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:39,234 - shroombox - INFO - =======================================================
2025-03-06 13:27:39,234 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:41,189 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:41,189 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:41,189 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:41,190 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:41,190 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:41,190 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:41,235 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:41,236 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:41,333 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:41,344 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:41,344 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:41,345 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:41,345 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:41,345 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:41,358 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:41,358 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:41,359 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:41,360 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:41,360 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:41,360 - shroombox - INFO - Last modified time: 2025-03-06 13:27:41
2025-03-06 13:27:41,361 - shroombox - INFO - Last checked time: 2025-03-06 13:27:39
2025-03-06 13:27:41,361 - shroombox - INFO - Current time: 2025-03-06 13:27:41
2025-03-06 13:27:41,361 - shroombox - INFO - Config file modified at 2025-03-06 13:27:41.355087, reloading...
2025-03-06 13:27:41,362 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:41,362 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:41,362 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:41,362 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:41,363 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:41,363 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:41,363 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:41,364 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:41,364 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:41,364 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:41,364 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:41,364 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:41,365 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:41,365 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:41,365 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:41,366 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:41,366 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:41,366 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:41,366 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:41,367 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:41,367 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:41,367 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:41,379 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:41,379 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:41,379 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:41,419 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:41,419 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:41,420 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:41,420 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:41,420 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:41,420 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:41,420 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:41,421 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:41,421 - shroombox - INFO - =======================================================
2025-03-06 13:27:41,421 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:43,382 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:43,382 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:43,382 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:43,382 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:43,383 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:43,383 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:43,431 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:43,431 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:43,529 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:43,541 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:43,542 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:43,542 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:43,542 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:43,542 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:43,554 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:43,555 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:43,555 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:43,556 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:43,557 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:43,557 - shroombox - INFO - Last modified time: 2025-03-06 13:27:43
2025-03-06 13:27:43,557 - shroombox - INFO - Last checked time: 2025-03-06 13:27:41
2025-03-06 13:27:43,557 - shroombox - INFO - Current time: 2025-03-06 13:27:43
2025-03-06 13:27:43,558 - shroombox - INFO - Config file modified at 2025-03-06 13:27:43.551087, reloading...
2025-03-06 13:27:43,558 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:43,559 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:43,559 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:43,559 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:43,559 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:43,560 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:43,560 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:43,560 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:43,561 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:43,561 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:43,561 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:43,561 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:43,562 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:43,562 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:43,562 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:43,562 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:43,562 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:43,562 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:43,563 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:43,563 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:43,563 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:43,563 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:43,576 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:43,576 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:43,576 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:43,620 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:43,621 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:43,621 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:43,621 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:43,622 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:43,622 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:43,622 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:43,622 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:43,623 - shroombox - INFO - =======================================================
2025-03-06 13:27:43,623 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:45,578 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:45,578 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:45,578 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:45,579 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:45,579 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:45,579 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:45,624 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:45,625 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:45,726 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:46,833 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:46,833 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:46,833 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:46,834 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:46,834 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:46,850 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:46,850 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:46,851 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:46,852 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:46,852 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:46,852 - shroombox - INFO - Last modified time: 2025-03-06 13:27:46
2025-03-06 13:27:46,853 - shroombox - INFO - Last checked time: 2025-03-06 13:27:43
2025-03-06 13:27:46,853 - shroombox - INFO - Current time: 2025-03-06 13:27:46
2025-03-06 13:27:46,853 - shroombox - INFO - Config file modified at 2025-03-06 13:27:46.847087, reloading...
2025-03-06 13:27:46,853 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:46,854 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:46,854 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:46,854 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:46,854 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:46,855 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:46,855 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:46,855 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:46,855 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:46,855 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:46,855 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:46,856 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:46,856 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:46,856 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:46,856 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:46,856 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:46,856 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:46,857 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:46,857 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:46,857 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:46,857 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:46,857 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:47,689 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:47,689 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:47,689 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:47,738 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:47,739 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:47,739 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:47,740 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:47,740 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:47,740 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:47,741 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:47,741 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:47,741 - shroombox - INFO - =======================================================
2025-03-06 13:27:47,741 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:49,689 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:49,690 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:49,690 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:49,690 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:49,690 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:49,691 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:49,737 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:49,738 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:49,833 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:49,847 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:49,847 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:49,848 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:49,848 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:49,848 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:49,860 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:49,861 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:49,861 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:49,862 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:49,863 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:49,863 - shroombox - INFO - Last modified time: 2025-03-06 13:27:49
2025-03-06 13:27:49,863 - shroombox - INFO - Last checked time: 2025-03-06 13:27:46
2025-03-06 13:27:49,864 - shroombox - INFO - Current time: 2025-03-06 13:27:49
2025-03-06 13:27:49,864 - shroombox - INFO - Config file modified at 2025-03-06 13:27:49.859087, reloading...
2025-03-06 13:27:49,865 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:49,866 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:49,867 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:49,867 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:49,868 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:49,868 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:49,869 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:49,869 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:49,870 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:49,870 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:49,870 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:49,870 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:49,870 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:49,871 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:49,871 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:49,871 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:49,871 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:49,871 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:49,872 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:49,872 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:49,872 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:49,872 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:49,883 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:49,883 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:49,883 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:49,922 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:49,923 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:49,923 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:49,923 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:49,923 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:49,924 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:49,924 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:49,924 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:49,924 - shroombox - INFO - =======================================================
2025-03-06 13:27:49,924 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:51,885 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:51,885 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:51,885 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:51,886 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:51,886 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:51,886 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:51,929 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:51,930 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:52,078 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:52,098 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:52,099 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:52,099 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:52,099 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:52,100 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:52,111 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:52,111 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:52,112 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:52,113 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:52,114 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:52,114 - shroombox - INFO - Last modified time: 2025-03-06 13:27:52
2025-03-06 13:27:52,114 - shroombox - INFO - Last checked time: 2025-03-06 13:27:49
2025-03-06 13:27:52,114 - shroombox - INFO - Current time: 2025-03-06 13:27:52
2025-03-06 13:27:52,114 - shroombox - INFO - Config file modified at 2025-03-06 13:27:52.107086, reloading...
2025-03-06 13:27:52,115 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:52,115 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:52,115 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:52,115 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:52,116 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:52,116 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:52,116 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:52,116 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:52,117 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:52,117 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:52,117 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:52,117 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:52,117 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:52,118 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:52,118 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:52,118 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:52,118 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:52,118 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:52,119 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:52,119 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:52,119 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:52,119 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:52,130 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:52,131 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:52,131 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:52,172 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:52,173 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:52,173 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:52,173 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:52,173 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:52,174 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:52,174 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:52,174 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:52,174 - shroombox - INFO - =======================================================
2025-03-06 13:27:52,174 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:54,133 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:54,133 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:54,133 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:54,134 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:54,134 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:54,134 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:54,178 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:54,179 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:54,322 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:54,334 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:54,334 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:54,334 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:54,335 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:54,335 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:54,348 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:54,348 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:54,349 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:54,350 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:54,351 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:54,351 - shroombox - INFO - Last modified time: 2025-03-06 13:27:54
2025-03-06 13:27:54,351 - shroombox - INFO - Last checked time: 2025-03-06 13:27:52
2025-03-06 13:27:54,352 - shroombox - INFO - Current time: 2025-03-06 13:27:54
2025-03-06 13:27:54,352 - shroombox - INFO - Config file modified at 2025-03-06 13:27:54.347063, reloading...
2025-03-06 13:27:54,352 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:54,352 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:54,353 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:54,353 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:54,353 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:54,353 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:54,354 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:54,354 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:54,354 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:54,354 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:54,354 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:54,355 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:54,355 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:54,355 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:54,355 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:54,355 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:54,355 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:54,356 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:54,356 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:54,356 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:54,356 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:54,356 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:54,367 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:54,367 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:54,368 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:54,409 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:54,409 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:54,409 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:54,409 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:54,410 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:54,410 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:54,410 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:54,410 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:54,410 - shroombox - INFO - =======================================================
2025-03-06 13:27:54,410 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:56,368 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:56,369 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:56,369 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:56,369 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:56,369 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:56,370 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:56,420 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:56,420 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:56,519 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:56,530 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:56,531 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:56,531 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:56,531 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:56,532 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:56,546 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:56,547 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:56,547 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:56,549 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:56,550 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:56,550 - shroombox - INFO - Last modified time: 2025-03-06 13:27:56
2025-03-06 13:27:56,550 - shroombox - INFO - Last checked time: 2025-03-06 13:27:54
2025-03-06 13:27:56,551 - shroombox - INFO - Current time: 2025-03-06 13:27:56
2025-03-06 13:27:56,551 - shroombox - INFO - Config file modified at 2025-03-06 13:27:56.543044, reloading...
2025-03-06 13:27:56,551 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:56,551 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:56,552 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:56,552 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:56,552 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:56,552 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:56,553 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:56,553 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:56,553 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:56,553 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:56,553 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:56,554 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:56,554 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:56,554 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:56,554 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:56,554 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:56,554 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:56,555 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:56,555 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:56,555 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:56,555 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:56,555 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:56,567 - shroombox.sensor - ERROR - Error checking sensor availability: [Errno 5] Input/output error
2025-03-06 13:27:56,568 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:56,568 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:56,626 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:56,626 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:56,626 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:56,627 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:56,627 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:56,627 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:56,627 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:56,627 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:56,628 - shroombox - INFO - =======================================================
2025-03-06 13:27:56,628 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:27:58,573 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:58,574 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:58,574 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:27:58,574 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:27:58,575 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:58,620 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:27:58,620 - shroombox - INFO - Setting heater to ON
2025-03-06 13:27:58,732 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:27:58,754 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:27:58,754 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:27:58,755 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:27:58,756 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:27:58,756 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:27:58,770 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:27:58,771 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:27:58,771 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:27:58,772 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:27:58,773 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:58,773 - shroombox - INFO - Last modified time: 2025-03-06 13:27:58
2025-03-06 13:27:58,774 - shroombox - INFO - Last checked time: 2025-03-06 13:27:56
2025-03-06 13:27:58,774 - shroombox - INFO - Current time: 2025-03-06 13:27:58
2025-03-06 13:27:58,774 - shroombox - INFO - Config file modified at 2025-03-06 13:27:58.767027, reloading...
2025-03-06 13:27:58,775 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:27:58,775 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:58,775 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:27:58,775 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:27:58,776 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:27:58,776 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:27:58,776 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:27:58,776 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:27:58,777 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:27:58,777 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:27:58,777 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:27:58,777 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:27:58,778 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:27:58,778 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:27:58,778 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:27:58,778 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:27:58,779 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:27:58,779 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:58,779 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:27:58,779 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:27:58,779 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:27:58,780 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:27:58,799 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:27:58,800 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:27:58,840 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:27:58,841 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:27:58,841 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:27:58,841 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:27:58,841 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:27:58,842 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:27:58,842 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:27:58,842 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:27:58,842 - shroombox - INFO - =======================================================
2025-03-06 13:27:58,842 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:00,815 - shroombox.sensor - INFO - Successful measurement at 13:28:00 - CO2: 549.75ppm, Temp: 23.15°C, RH: 37.63%
2025-03-06 13:28:00,816 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:00,816 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:00,816 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:00,862 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:00,862 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:00,929 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:00,929 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:00,929 - shroombox - INFO - Heater set to OFF - Temp: 23.15°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:00,940 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:00,941 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=37.6%, Setpoint=20.0%
2025-03-06 13:28:00,941 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:00,941 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 37.6% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:00,941 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:00,954 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:00,955 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:00,955 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:00,956 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:00,957 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:00,957 - shroombox - INFO - Last modified time: 2025-03-06 13:28:00
2025-03-06 13:28:00,957 - shroombox - INFO - Last checked time: 2025-03-06 13:27:58
2025-03-06 13:28:00,958 - shroombox - INFO - Current time: 2025-03-06 13:28:00
2025-03-06 13:28:00,958 - shroombox - INFO - Config file modified at 2025-03-06 13:28:00.951013, reloading...
2025-03-06 13:28:00,958 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:00,958 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:00,959 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:00,959 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:00,959 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:00,959 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:00,960 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:00,960 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:00,960 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:00,960 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:00,960 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:00,960 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:00,961 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:00,961 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:00,961 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:00,961 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:00,961 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:00,962 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:00,962 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:00,962 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:00,962 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:00,962 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:00,979 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:00,979 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:01,023 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:01,023 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:01,023 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:01,023 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:01,024 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:01,024 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:01,024 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:01,024 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:01,024 - shroombox - INFO - =======================================================
2025-03-06 13:28:01,025 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:02,993 - shroombox.sensor - INFO - Successful measurement at 13:28:02 - CO2: 795.67ppm, Temp: 23.12°C, RH: 36.33%
2025-03-06 13:28:02,993 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:02,993 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:02,994 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:03,040 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:03,040 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:03,106 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:03,106 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:03,107 - shroombox - INFO - Heater set to OFF - Temp: 23.12°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:03,117 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:03,118 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=20.0%
2025-03-06 13:28:03,118 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:03,118 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:03,118 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:03,131 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:03,131 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:03,132 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:03,133 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:03,133 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:03,134 - shroombox - INFO - Last modified time: 2025-03-06 13:28:03
2025-03-06 13:28:03,134 - shroombox - INFO - Last checked time: 2025-03-06 13:28:00
2025-03-06 13:28:03,134 - shroombox - INFO - Current time: 2025-03-06 13:28:03
2025-03-06 13:28:03,134 - shroombox - INFO - Config file modified at 2025-03-06 13:28:03.127000, reloading...
2025-03-06 13:28:03,135 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:03,135 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:03,135 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:03,135 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:03,135 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:03,136 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:03,136 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:03,136 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:03,136 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:03,137 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:03,137 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:03,137 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:03,137 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:03,137 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:03,137 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:03,138 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:03,138 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:03,138 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:03,138 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:03,138 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:03,139 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:03,139 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:03,154 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:03,155 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:03,197 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:03,197 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:03,198 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:03,198 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:03,198 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:03,198 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:03,199 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:03,199 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:03,199 - shroombox - INFO - =======================================================
2025-03-06 13:28:03,199 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:05,169 - shroombox.sensor - INFO - Successful measurement at 13:28:05 - CO2: 731.63ppm, Temp: 23.09°C, RH: 35.11%
2025-03-06 13:28:05,170 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:05,170 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:05,170 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:05,218 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:05,219 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:05,284 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:05,284 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:05,284 - shroombox - INFO - Heater set to OFF - Temp: 23.09°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:05,295 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:05,295 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=35.1%, Setpoint=20.0%
2025-03-06 13:28:05,296 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:05,296 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 35.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:05,296 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:05,311 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:05,312 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:05,312 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:05,313 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:05,314 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:05,314 - shroombox - INFO - Last modified time: 2025-03-06 13:28:05
2025-03-06 13:28:05,314 - shroombox - INFO - Last checked time: 2025-03-06 13:28:03
2025-03-06 13:28:05,314 - shroombox - INFO - Current time: 2025-03-06 13:28:05
2025-03-06 13:28:05,315 - shroombox - INFO - Config file modified at 2025-03-06 13:28:05.306990, reloading...
2025-03-06 13:28:05,315 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:05,315 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:05,315 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:05,316 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:05,316 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:05,316 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:05,316 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:05,316 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:05,317 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:05,317 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:05,317 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:05,317 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:05,317 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:05,318 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:05,318 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:05,318 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:05,318 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:05,318 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:05,319 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:05,319 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:05,319 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:05,319 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:05,334 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:05,335 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:05,375 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:05,375 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:05,375 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:05,376 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:05,376 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:05,376 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:05,376 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:05,376 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:05,377 - shroombox - INFO - =======================================================
2025-03-06 13:28:05,377 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:07,350 - shroombox.sensor - INFO - Successful measurement at 13:28:07 - CO2: 700.33ppm, Temp: 23.1°C, RH: 34.43%
2025-03-06 13:28:07,351 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:07,351 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:07,351 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:07,393 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:07,393 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:07,459 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:07,459 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:07,459 - shroombox - INFO - Heater set to OFF - Temp: 23.1°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:07,470 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:07,470 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=34.4%, Setpoint=20.0%
2025-03-06 13:28:07,470 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:07,470 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 34.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:07,471 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:07,484 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:07,484 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:07,484 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:07,485 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:07,486 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:07,486 - shroombox - INFO - Last modified time: 2025-03-06 13:28:07
2025-03-06 13:28:07,487 - shroombox - INFO - Last checked time: 2025-03-06 13:28:05
2025-03-06 13:28:07,487 - shroombox - INFO - Current time: 2025-03-06 13:28:07
2025-03-06 13:28:07,487 - shroombox - INFO - Config file modified at 2025-03-06 13:28:07.482980, reloading...
2025-03-06 13:28:07,487 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:07,487 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:07,488 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:07,488 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:07,488 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:07,488 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:07,489 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:07,489 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:07,489 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:07,489 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:07,489 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:07,490 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:07,490 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:07,490 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:07,490 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:07,490 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:07,491 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:07,491 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:07,491 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:07,491 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:07,491 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:07,491 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:07,510 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:07,510 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:07,552 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:07,552 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:07,552 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:07,553 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:07,553 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:07,553 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:07,553 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:07,553 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:07,554 - shroombox - INFO - =======================================================
2025-03-06 13:28:07,554 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:09,526 - shroombox.sensor - INFO - Successful measurement at 13:28:09 - CO2: 664.49ppm, Temp: 23.12°C, RH: 33.92%
2025-03-06 13:28:09,527 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:09,527 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:09,527 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:09,567 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:09,568 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:09,633 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:09,633 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:09,634 - shroombox - INFO - Heater set to OFF - Temp: 23.12°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:09,645 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:09,645 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.9%, Setpoint=20.0%
2025-03-06 13:28:09,646 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:09,646 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:09,646 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:09,658 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:09,658 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:09,659 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:09,660 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:09,660 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:09,661 - shroombox - INFO - Last modified time: 2025-03-06 13:28:09
2025-03-06 13:28:09,661 - shroombox - INFO - Last checked time: 2025-03-06 13:28:07
2025-03-06 13:28:09,661 - shroombox - INFO - Current time: 2025-03-06 13:28:09
2025-03-06 13:28:09,662 - shroombox - INFO - Config file modified at 2025-03-06 13:28:09.654972, reloading...
2025-03-06 13:28:09,662 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:09,662 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:09,662 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:09,663 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:09,663 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:09,663 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:09,663 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:09,663 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:09,664 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:09,664 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:09,664 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:09,664 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:09,664 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:09,665 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:09,665 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:09,665 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:09,665 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:09,666 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:09,666 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:09,666 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:09,666 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:09,667 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:09,682 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:09,683 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:09,725 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:09,726 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:09,726 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:09,727 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:09,727 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:09,727 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:09,728 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:09,728 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:09,728 - shroombox - INFO - =======================================================
2025-03-06 13:28:09,729 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:11,697 - shroombox.sensor - INFO - Successful measurement at 13:28:11 - CO2: 656.21ppm, Temp: 23.1°C, RH: 33.89%
2025-03-06 13:28:11,697 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:11,698 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:11,698 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:11,743 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:11,743 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:11,807 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:11,807 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:11,808 - shroombox - INFO - Heater set to OFF - Temp: 23.1°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:11,818 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:11,819 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.9%, Setpoint=20.0%
2025-03-06 13:28:11,819 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:11,819 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:11,819 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:11,832 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:11,832 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:11,833 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:11,834 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:11,835 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:11,835 - shroombox - INFO - Last modified time: 2025-03-06 13:28:11
2025-03-06 13:28:11,835 - shroombox - INFO - Last checked time: 2025-03-06 13:28:09
2025-03-06 13:28:11,835 - shroombox - INFO - Current time: 2025-03-06 13:28:11
2025-03-06 13:28:11,835 - shroombox - INFO - Config file modified at 2025-03-06 13:28:11.830965, reloading...
2025-03-06 13:28:11,836 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:11,836 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:11,836 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:11,836 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:11,837 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:11,837 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:11,837 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:11,837 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:11,838 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:11,838 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:11,838 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:11,838 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:11,838 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:11,838 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:11,839 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:11,839 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:11,839 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:11,839 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:11,839 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:11,839 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:11,840 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:11,840 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:11,856 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:11,856 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:11,905 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:11,906 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:11,906 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:11,906 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:11,906 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:11,907 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:11,907 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:11,907 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:11,907 - shroombox - INFO - =======================================================
2025-03-06 13:28:11,907 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:13,873 - shroombox.sensor - INFO - Successful measurement at 13:28:13 - CO2: 654.39ppm, Temp: 23.13°C, RH: 34.23%
2025-03-06 13:28:13,873 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:13,873 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:13,874 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:13,918 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:13,919 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:13,985 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:13,985 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:13,986 - shroombox - INFO - Heater set to OFF - Temp: 23.13°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:13,995 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:13,996 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=34.2%, Setpoint=20.0%
2025-03-06 13:28:13,996 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:13,996 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 34.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:13,997 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:14,009 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:14,009 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:14,010 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:14,011 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:14,011 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:14,011 - shroombox - INFO - Last modified time: 2025-03-06 13:28:14
2025-03-06 13:28:14,012 - shroombox - INFO - Last checked time: 2025-03-06 13:28:11
2025-03-06 13:28:14,012 - shroombox - INFO - Current time: 2025-03-06 13:28:14
2025-03-06 13:28:14,012 - shroombox - INFO - Config file modified at 2025-03-06 13:28:14.006959, reloading...
2025-03-06 13:28:14,012 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:14,013 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:14,013 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:14,013 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:14,014 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:14,014 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:14,014 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:14,014 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:14,014 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:14,015 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:14,015 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:14,015 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:14,015 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:14,015 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:14,016 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:14,016 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:14,016 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:14,016 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:14,016 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:14,016 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:14,017 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:14,017 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:14,034 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:14,034 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:14,099 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:14,100 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:14,100 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:14,101 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:14,101 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:14,102 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:14,102 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:14,102 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:14,103 - shroombox - INFO - =======================================================
2025-03-06 13:28:14,103 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:16,050 - shroombox.sensor - INFO - Successful measurement at 13:28:16 - CO2: 648.3ppm, Temp: 23.1°C, RH: 34.9%
2025-03-06 13:28:16,050 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:16,050 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:16,051 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:16,099 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:16,100 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:16,161 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:16,161 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:16,162 - shroombox - INFO - Heater set to OFF - Temp: 23.1°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:16,171 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:16,172 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=34.9%, Setpoint=20.0%
2025-03-06 13:28:16,172 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:16,172 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 34.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:16,172 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:16,185 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:16,185 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:16,186 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:16,187 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:16,188 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:16,189 - shroombox - INFO - Last modified time: 2025-03-06 13:28:16
2025-03-06 13:28:16,189 - shroombox - INFO - Last checked time: 2025-03-06 13:28:14
2025-03-06 13:28:16,189 - shroombox - INFO - Current time: 2025-03-06 13:28:16
2025-03-06 13:28:16,190 - shroombox - INFO - Config file modified at 2025-03-06 13:28:16.182954, reloading...
2025-03-06 13:28:16,190 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:16,190 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:16,190 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:16,191 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:16,191 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:16,191 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:16,191 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:16,192 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:16,192 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:16,192 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:16,192 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:16,192 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:16,192 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:16,193 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:16,193 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:16,193 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:16,193 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:16,193 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:16,194 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:16,194 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:16,194 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:16,194 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:16,211 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:16,211 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:16,257 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:16,258 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:16,258 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:16,258 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:16,259 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:16,259 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:16,259 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:16,259 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:16,259 - shroombox - INFO - =======================================================
2025-03-06 13:28:16,259 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:18,227 - shroombox.sensor - INFO - Successful measurement at 13:28:18 - CO2: 650.89ppm, Temp: 23.12°C, RH: 34.11%
2025-03-06 13:28:18,227 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:18,228 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:18,228 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:18,271 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:18,271 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:18,386 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:18,386 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:18,387 - shroombox - INFO - Heater set to OFF - Temp: 23.12°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:18,396 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:18,397 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=34.1%, Setpoint=20.0%
2025-03-06 13:28:18,397 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:18,397 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 34.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:18,398 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:18,410 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:18,410 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:18,411 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:18,413 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:18,414 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:18,414 - shroombox - INFO - Last modified time: 2025-03-06 13:28:18
2025-03-06 13:28:18,414 - shroombox - INFO - Last checked time: 2025-03-06 13:28:16
2025-03-06 13:28:18,415 - shroombox - INFO - Current time: 2025-03-06 13:28:18
2025-03-06 13:28:18,415 - shroombox - INFO - Config file modified at 2025-03-06 13:28:18.406949, reloading...
2025-03-06 13:28:18,416 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:18,416 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:18,417 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:18,417 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:18,418 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:18,418 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:18,418 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:18,419 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:18,419 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:18,420 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:18,420 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:18,420 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:18,420 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:18,420 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:18,421 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:18,421 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:18,421 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:18,421 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:18,421 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:18,422 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:18,422 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:18,422 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:18,441 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:18,442 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:18,480 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:18,481 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:18,481 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:18,481 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:18,481 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:18,481 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:18,482 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:18,482 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:18,482 - shroombox - INFO - =======================================================
2025-03-06 13:28:18,482 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:20,457 - shroombox.sensor - INFO - Successful measurement at 13:28:20 - CO2: 651.28ppm, Temp: 23.11°C, RH: 33.49%
2025-03-06 13:28:20,458 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:20,458 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:20,458 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:20,503 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:20,504 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:20,565 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:20,565 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:20,566 - shroombox - INFO - Heater set to OFF - Temp: 23.11°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:20,577 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:20,577 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.5%, Setpoint=20.0%
2025-03-06 13:28:20,578 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:20,578 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:20,578 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:20,591 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:20,591 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:20,592 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:20,593 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:20,593 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:20,594 - shroombox - INFO - Last modified time: 2025-03-06 13:28:20
2025-03-06 13:28:20,594 - shroombox - INFO - Last checked time: 2025-03-06 13:28:18
2025-03-06 13:28:20,594 - shroombox - INFO - Current time: 2025-03-06 13:28:20
2025-03-06 13:28:20,594 - shroombox - INFO - Config file modified at 2025-03-06 13:28:20.586945, reloading...
2025-03-06 13:28:20,595 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:20,595 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:20,595 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:20,595 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:20,596 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:20,596 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:20,596 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:20,596 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:20,596 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:20,597 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:20,597 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:20,597 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:20,597 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:20,597 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:20,598 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:20,598 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:20,598 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:20,598 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:20,598 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:20,598 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:20,599 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:20,599 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:20,617 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:20,617 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:20,665 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:20,666 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:20,666 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:20,666 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:20,666 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:20,667 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:20,667 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:20,667 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:20,667 - shroombox - INFO - =======================================================
2025-03-06 13:28:20,667 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:22,633 - shroombox.sensor - INFO - Successful measurement at 13:28:22 - CO2: 648.08ppm, Temp: 23.14°C, RH: 33.03%
2025-03-06 13:28:22,633 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:22,633 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:22,634 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:22,684 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:22,685 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:22,756 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:22,756 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:22,756 - shroombox - INFO - Heater set to OFF - Temp: 23.14°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:22,767 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:22,768 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.0%, Setpoint=20.0%
2025-03-06 13:28:22,768 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:22,768 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.0% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:22,768 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:22,782 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:22,783 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:22,783 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:22,786 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:22,786 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:22,787 - shroombox - INFO - Last modified time: 2025-03-06 13:28:22
2025-03-06 13:28:22,788 - shroombox - INFO - Last checked time: 2025-03-06 13:28:20
2025-03-06 13:28:22,788 - shroombox - INFO - Current time: 2025-03-06 13:28:22
2025-03-06 13:28:22,788 - shroombox - INFO - Config file modified at 2025-03-06 13:28:22.778941, reloading...
2025-03-06 13:28:22,789 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:22,789 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:22,790 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:22,790 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:22,791 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:22,791 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:22,792 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:22,792 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:22,793 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:22,793 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:22,794 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:22,794 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:22,794 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:22,794 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:22,795 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:22,795 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:22,795 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:22,796 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:22,796 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:22,796 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:22,797 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:22,797 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:22,813 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:22,814 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:22,853 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:22,854 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:22,854 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:22,854 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:22,855 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:22,855 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:22,855 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:22,855 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:22,855 - shroombox - INFO - =======================================================
2025-03-06 13:28:22,855 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:24,827 - shroombox.sensor - INFO - Successful measurement at 13:28:24 - CO2: 645.12ppm, Temp: 23.14°C, RH: 32.66%
2025-03-06 13:28:24,827 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:24,828 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:24,828 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:24,876 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:24,876 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:24,944 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:24,944 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:24,945 - shroombox - INFO - Heater set to OFF - Temp: 23.14°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:24,955 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:24,955 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.7%, Setpoint=20.0%
2025-03-06 13:28:24,955 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:24,956 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.7% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:24,956 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:24,972 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:24,973 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:24,973 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:24,974 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:24,975 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:24,975 - shroombox - INFO - Last modified time: 2025-03-06 13:28:24
2025-03-06 13:28:24,975 - shroombox - INFO - Last checked time: 2025-03-06 13:28:22
2025-03-06 13:28:24,976 - shroombox - INFO - Current time: 2025-03-06 13:28:24
2025-03-06 13:28:24,976 - shroombox - INFO - Config file modified at 2025-03-06 13:28:24.970938, reloading...
2025-03-06 13:28:24,976 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:24,976 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:24,977 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:24,977 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:24,977 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:24,977 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:24,978 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:24,978 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:24,978 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:24,978 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:24,978 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:24,978 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:24,979 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:24,979 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:24,979 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:24,979 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:24,979 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:24,980 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:24,980 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:24,980 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:24,980 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:24,980 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:24,996 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:24,996 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:25,036 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:25,037 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:25,037 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:25,037 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:25,037 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:25,038 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:25,038 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:25,038 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:25,038 - shroombox - INFO - =======================================================
2025-03-06 13:28:25,038 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:27,012 - shroombox.sensor - INFO - Successful measurement at 13:28:27 - CO2: 643.81ppm, Temp: 23.1°C, RH: 32.38%
2025-03-06 13:28:27,012 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:27,012 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:27,013 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:27,057 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:27,057 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:27,201 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:27,202 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:27,202 - shroombox - INFO - Heater set to OFF - Temp: 23.1°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:27,210 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:27,211 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.4%, Setpoint=20.0%
2025-03-06 13:28:27,211 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:27,211 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:27,211 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:27,245 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:27,245 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:27,246 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:27,247 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:27,247 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:27,247 - shroombox - INFO - Last modified time: 2025-03-06 13:28:27
2025-03-06 13:28:27,248 - shroombox - INFO - Last checked time: 2025-03-06 13:28:24
2025-03-06 13:28:27,248 - shroombox - INFO - Current time: 2025-03-06 13:28:27
2025-03-06 13:28:27,248 - shroombox - INFO - Config file modified at 2025-03-06 13:28:27.242935, reloading...
2025-03-06 13:28:27,248 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:27,249 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:27,249 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:27,249 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:27,249 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:27,250 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:27,250 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:27,250 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:27,250 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:27,250 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:27,250 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:27,251 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:27,251 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:27,251 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:27,251 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:27,251 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:27,252 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:27,252 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:27,252 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:27,252 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:27,252 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:27,253 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:27,269 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:27,270 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:27,323 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:27,323 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:27,323 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:27,324 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:27,324 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:27,324 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:27,324 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:27,324 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:27,325 - shroombox - INFO - =======================================================
2025-03-06 13:28:27,325 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:29,284 - shroombox.sensor - INFO - Successful measurement at 13:28:29 - CO2: 643.06ppm, Temp: 23.1°C, RH: 32.13%
2025-03-06 13:28:29,285 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:29,285 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:29,285 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:29,327 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:29,328 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:29,393 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:29,394 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:29,394 - shroombox - INFO - Heater set to OFF - Temp: 23.1°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:29,403 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:29,403 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.1%, Setpoint=20.0%
2025-03-06 13:28:29,404 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:29,404 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:29,404 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:29,416 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:29,416 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:29,417 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:29,418 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:29,418 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:29,419 - shroombox - INFO - Last modified time: 2025-03-06 13:28:29
2025-03-06 13:28:29,419 - shroombox - INFO - Last checked time: 2025-03-06 13:28:27
2025-03-06 13:28:29,419 - shroombox - INFO - Current time: 2025-03-06 13:28:29
2025-03-06 13:28:29,419 - shroombox - INFO - Config file modified at 2025-03-06 13:28:29.414933, reloading...
2025-03-06 13:28:29,420 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:29,420 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:29,420 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:29,420 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:29,421 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:29,421 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:29,421 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:29,421 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:29,421 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:29,422 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:29,422 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:29,422 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:29,422 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:29,422 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:29,423 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:29,423 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:29,423 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:29,423 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:29,423 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:29,423 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:29,424 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:29,424 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:29,441 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:29,441 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:29,483 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:29,484 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:29,484 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:29,485 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:29,485 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:29,485 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:29,485 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:29,485 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:29,486 - shroombox - INFO - =======================================================
2025-03-06 13:28:29,486 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:31,455 - shroombox.sensor - INFO - Successful measurement at 13:28:31 - CO2: 643.21ppm, Temp: 23.12°C, RH: 32.05%
2025-03-06 13:28:31,456 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:31,456 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:31,456 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:31,499 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:31,500 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:31,560 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:31,561 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:31,561 - shroombox - INFO - Heater set to OFF - Temp: 23.12°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:31,586 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:31,586 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.0%, Setpoint=20.0%
2025-03-06 13:28:31,587 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:31,587 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.0% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:31,587 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:31,605 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:31,606 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:31,606 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:31,607 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:31,608 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:31,608 - shroombox - INFO - Last modified time: 2025-03-06 13:28:31
2025-03-06 13:28:31,608 - shroombox - INFO - Last checked time: 2025-03-06 13:28:29
2025-03-06 13:28:31,608 - shroombox - INFO - Current time: 2025-03-06 13:28:31
2025-03-06 13:28:31,609 - shroombox - INFO - Config file modified at 2025-03-06 13:28:31.602931, reloading...
2025-03-06 13:28:31,609 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:31,609 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:31,609 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:31,610 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:31,610 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:31,610 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:31,610 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:31,611 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:31,611 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:31,611 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:31,611 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:31,611 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:31,611 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:31,612 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:31,612 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:31,612 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:31,612 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:31,612 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:31,613 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:31,613 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:31,613 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:31,613 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:31,634 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:31,635 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:31,680 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:31,680 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:31,681 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:31,681 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:31,681 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:31,681 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:31,681 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:31,681 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:31,682 - shroombox - INFO - =======================================================
2025-03-06 13:28:31,682 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:33,650 - shroombox.sensor - INFO - Successful measurement at 13:28:33 - CO2: 642.7ppm, Temp: 23.1°C, RH: 32.12%
2025-03-06 13:28:33,651 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:33,651 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:33,651 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:33,693 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:33,693 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:33,759 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:33,760 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:33,760 - shroombox - INFO - Heater set to OFF - Temp: 23.1°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:33,768 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:33,769 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.1%, Setpoint=20.0%
2025-03-06 13:28:33,769 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:33,769 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:33,769 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:33,783 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:33,784 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:33,784 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:33,787 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:33,788 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:33,788 - shroombox - INFO - Last modified time: 2025-03-06 13:28:33
2025-03-06 13:28:33,789 - shroombox - INFO - Last checked time: 2025-03-06 13:28:31
2025-03-06 13:28:33,789 - shroombox - INFO - Current time: 2025-03-06 13:28:33
2025-03-06 13:28:33,790 - shroombox - INFO - Config file modified at 2025-03-06 13:28:33.782929, reloading...
2025-03-06 13:28:33,790 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:33,791 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:33,791 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:33,792 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:33,793 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:33,793 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:33,793 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:33,794 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:33,794 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:33,794 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:33,795 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:33,795 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:33,795 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:33,795 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:33,796 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:33,796 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:33,796 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:33,797 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:33,797 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:33,797 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:33,798 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:33,798 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:33,816 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:33,817 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:33,863 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:33,863 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:33,864 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:33,864 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:33,864 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:33,864 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:33,864 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:33,865 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:33,865 - shroombox - INFO - =======================================================
2025-03-06 13:28:33,865 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:35,833 - shroombox.sensor - INFO - Successful measurement at 13:28:35 - CO2: 647.96ppm, Temp: 23.11°C, RH: 32.2%
2025-03-06 13:28:35,833 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:35,833 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:35,834 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:35,881 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:35,881 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:35,943 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:35,944 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:35,944 - shroombox - INFO - Heater set to OFF - Temp: 23.11°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:35,954 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:35,954 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.2%, Setpoint=20.0%
2025-03-06 13:28:35,954 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:35,954 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:35,955 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:35,970 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:35,970 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:35,970 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:35,971 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:35,972 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:35,972 - shroombox - INFO - Last modified time: 2025-03-06 13:28:35
2025-03-06 13:28:35,972 - shroombox - INFO - Last checked time: 2025-03-06 13:28:33
2025-03-06 13:28:35,973 - shroombox - INFO - Current time: 2025-03-06 13:28:35
2025-03-06 13:28:35,973 - shroombox - INFO - Config file modified at 2025-03-06 13:28:35.966928, reloading...
2025-03-06 13:28:35,973 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:35,973 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:35,974 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:35,974 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:35,974 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:35,974 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:35,975 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:35,975 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:35,975 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:35,975 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:35,975 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:35,975 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:35,976 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:35,976 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:35,976 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:35,976 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:35,976 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:35,977 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:35,977 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:35,977 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:35,977 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:35,977 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:35,995 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:35,995 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:36,039 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:36,039 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:36,040 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:36,040 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:36,040 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:36,040 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:36,040 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:36,041 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:36,041 - shroombox - INFO - =======================================================
2025-03-06 13:28:36,041 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:38,011 - shroombox.sensor - INFO - Successful measurement at 13:28:38 - CO2: 650.92ppm, Temp: 23.12°C, RH: 32.24%
2025-03-06 13:28:38,012 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:38,012 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:38,012 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:38,060 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:38,061 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:38,125 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:38,126 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:38,126 - shroombox - INFO - Heater set to OFF - Temp: 23.12°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:38,137 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:38,137 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.2%, Setpoint=20.0%
2025-03-06 13:28:38,137 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:38,138 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:38,138 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:38,150 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:38,150 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:38,151 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:38,152 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:38,152 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:38,153 - shroombox - INFO - Last modified time: 2025-03-06 13:28:38
2025-03-06 13:28:38,153 - shroombox - INFO - Last checked time: 2025-03-06 13:28:35
2025-03-06 13:28:38,153 - shroombox - INFO - Current time: 2025-03-06 13:28:38
2025-03-06 13:28:38,154 - shroombox - INFO - Config file modified at 2025-03-06 13:28:38.146927, reloading...
2025-03-06 13:28:38,154 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:38,154 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:38,154 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:38,154 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:38,155 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:38,155 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:38,155 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:38,156 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:38,156 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:38,156 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:38,156 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:38,156 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:38,156 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:38,157 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:38,157 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:38,157 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:38,157 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:38,157 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:38,158 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:38,158 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:38,158 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:38,158 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:38,174 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:38,174 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:38,215 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:38,216 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:38,216 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:38,216 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:38,216 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:38,216 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:38,217 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:38,217 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:38,217 - shroombox - INFO - =======================================================
2025-03-06 13:28:38,217 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:40,191 - shroombox.sensor - INFO - Successful measurement at 13:28:40 - CO2: 652.95ppm, Temp: 23.1°C, RH: 32.33%
2025-03-06 13:28:40,191 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.1°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:40,191 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:40,192 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:40,233 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:40,234 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:40,300 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:40,300 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:40,300 - shroombox - INFO - Heater set to OFF - Temp: 23.1°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:40,309 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:40,309 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.3%, Setpoint=20.0%
2025-03-06 13:28:40,310 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:40,310 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:40,310 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:40,323 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:40,324 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:40,324 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:40,325 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:40,326 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:40,326 - shroombox - INFO - Last modified time: 2025-03-06 13:28:40
2025-03-06 13:28:40,326 - shroombox - INFO - Last checked time: 2025-03-06 13:28:38
2025-03-06 13:28:40,326 - shroombox - INFO - Current time: 2025-03-06 13:28:40
2025-03-06 13:28:40,327 - shroombox - INFO - Config file modified at 2025-03-06 13:28:40.318926, reloading...
2025-03-06 13:28:40,327 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:40,327 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:40,327 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:40,327 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:40,328 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:40,328 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:40,328 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:40,328 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:40,329 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:40,329 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:40,329 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:40,329 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:40,329 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:40,330 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:40,330 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:40,330 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:40,330 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:40,330 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:40,330 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:40,331 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:40,331 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:40,331 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:40,348 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:40,348 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:40,387 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:40,387 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:40,387 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:40,388 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:40,388 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:40,388 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:40,388 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:40,388 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:40,389 - shroombox - INFO - =======================================================
2025-03-06 13:28:40,389 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:42,348 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:42,349 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:42,349 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:42,349 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:42,349 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:42,395 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:28:42,396 - shroombox - INFO - Setting heater to ON
2025-03-06 13:28:42,493 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:42,504 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:28:42,504 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:28:42,504 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:42,504 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:42,505 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:42,519 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:42,520 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:42,520 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:42,521 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:42,522 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:42,523 - shroombox - INFO - Last modified time: 2025-03-06 13:28:42
2025-03-06 13:28:42,523 - shroombox - INFO - Last checked time: 2025-03-06 13:28:40
2025-03-06 13:28:42,524 - shroombox - INFO - Current time: 2025-03-06 13:28:42
2025-03-06 13:28:42,524 - shroombox - INFO - Config file modified at 2025-03-06 13:28:42.518924, reloading...
2025-03-06 13:28:42,525 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:42,526 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:42,526 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:42,526 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:42,527 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:42,527 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:42,527 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:42,528 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:42,528 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:42,528 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:42,528 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:42,529 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:42,529 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:42,529 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:42,529 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:42,530 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:42,530 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:42,530 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:42,530 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:42,530 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:42,531 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:42,531 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:42,565 - shroombox.sensor - INFO - Successful measurement at 13:28:42 - CO2: 654.74ppm, Temp: 23.08°C, RH: 32.28%
2025-03-06 13:28:42,607 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:42,608 - shroombox - INFO - Current temperature: 23.1°C
2025-03-06 13:28:42,608 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:42,609 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:42,609 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:42,609 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:42,610 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:42,610 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:42,610 - shroombox - INFO - =======================================================
2025-03-06 13:28:42,610 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:28:42,611 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:28:42,611 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:42,669 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:42,670 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:42,714 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:28:44,549 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:44,549 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:44,549 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:44,550 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:44,550 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:44,596 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:28:44,596 - shroombox - INFO - Setting heater to ON
2025-03-06 13:28:44,696 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:44,707 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:28:44,707 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:28:44,707 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:44,707 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:44,708 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:44,726 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:44,727 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:44,727 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:44,728 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:44,729 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:44,729 - shroombox - INFO - Last modified time: 2025-03-06 13:28:44
2025-03-06 13:28:44,730 - shroombox - INFO - Last checked time: 2025-03-06 13:28:42
2025-03-06 13:28:44,730 - shroombox - INFO - Current time: 2025-03-06 13:28:44
2025-03-06 13:28:44,730 - shroombox - INFO - Config file modified at 2025-03-06 13:28:44.722924, reloading...
2025-03-06 13:28:44,730 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:44,731 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:44,731 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:44,731 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:44,731 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:44,732 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:44,732 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:44,732 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:44,732 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:44,732 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:44,732 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:44,733 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:44,733 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:44,733 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:44,733 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:44,733 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:44,734 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:44,734 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:44,734 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:44,734 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:44,734 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:44,735 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:44,766 - shroombox.sensor - INFO - Successful measurement at 13:28:44 - CO2: 659.91ppm, Temp: 23.05°C, RH: 32.25%
2025-03-06 13:28:44,803 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:44,803 - shroombox - INFO - Current temperature: 23.1°C
2025-03-06 13:28:44,803 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:44,803 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:44,804 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:44,804 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 23.1 < 21.5)
2025-03-06 13:28:44,804 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:44,804 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:44,804 - shroombox - INFO - =======================================================
2025-03-06 13:28:44,805 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:28:44,805 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:28:44,805 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:44,870 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:44,870 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:44,908 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:28:46,754 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:46,754 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:46,755 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:46,755 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:46,755 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:46,802 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:28:46,802 - shroombox - INFO - Setting heater to ON
2025-03-06 13:28:46,945 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:46,957 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:28:46,958 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:28:46,958 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:46,958 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:46,958 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:46,972 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:46,973 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:46,973 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:46,974 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:46,975 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:46,975 - shroombox - INFO - Last modified time: 2025-03-06 13:28:46
2025-03-06 13:28:46,975 - shroombox - INFO - Last checked time: 2025-03-06 13:28:44
2025-03-06 13:28:46,975 - shroombox - INFO - Current time: 2025-03-06 13:28:46
2025-03-06 13:28:46,976 - shroombox - INFO - Config file modified at 2025-03-06 13:28:46.970923, reloading...
2025-03-06 13:28:46,976 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:46,976 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:46,976 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:46,977 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:46,977 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:46,977 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:46,977 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:46,978 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:46,978 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:46,978 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:46,978 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:46,978 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:46,978 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:46,979 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:46,979 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:46,979 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:46,979 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:46,979 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:46,980 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:46,980 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:46,980 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:46,980 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:47,012 - shroombox.sensor - INFO - Successful measurement at 13:28:47 - CO2: 663.53ppm, Temp: 23.04°C, RH: 32.21%
2025-03-06 13:28:47,055 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:47,056 - shroombox - INFO - Current temperature: 23.0°C
2025-03-06 13:28:47,056 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:47,056 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:47,056 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:47,056 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:28:47,057 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:47,057 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:47,057 - shroombox - INFO - =======================================================
2025-03-06 13:28:47,057 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:28:47,057 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:28:47,058 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:47,120 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:47,121 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:47,162 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:28:49,000 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:49,000 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:49,000 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:49,001 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:49,001 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:49,049 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:28:49,049 - shroombox - INFO - Setting heater to ON
2025-03-06 13:28:49,179 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:49,191 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:28:49,192 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:28:49,192 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:49,192 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:49,193 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:49,226 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:49,227 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:49,227 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:49,228 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:49,229 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:49,229 - shroombox - INFO - Last modified time: 2025-03-06 13:28:49
2025-03-06 13:28:49,229 - shroombox - INFO - Last checked time: 2025-03-06 13:28:46
2025-03-06 13:28:49,229 - shroombox - INFO - Current time: 2025-03-06 13:28:49
2025-03-06 13:28:49,230 - shroombox - INFO - Config file modified at 2025-03-06 13:28:49.222922, reloading...
2025-03-06 13:28:49,230 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:49,230 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:49,230 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:49,231 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:49,231 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:49,231 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:49,231 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:49,232 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:49,232 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:49,232 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:49,232 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:49,233 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:49,233 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:49,233 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:49,233 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:49,234 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:49,234 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:49,234 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:49,234 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:49,234 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:49,234 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:49,235 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:49,267 - shroombox.sensor - INFO - Successful measurement at 13:28:49 - CO2: 666.02ppm, Temp: 23.02°C, RH: 32.23%
2025-03-06 13:28:49,312 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:49,313 - shroombox - INFO - Current temperature: 23.0°C
2025-03-06 13:28:49,313 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:49,313 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:49,313 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:49,314 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:28:49,314 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:49,314 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:49,314 - shroombox - INFO - =======================================================
2025-03-06 13:28:49,314 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:28:49,315 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:28:49,315 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:49,405 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:49,405 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:49,453 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:28:51,255 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:51,256 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:51,256 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:51,256 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:51,256 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:51,307 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:28:51,308 - shroombox - INFO - Setting heater to ON
2025-03-06 13:28:51,408 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:51,420 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:28:51,421 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:28:51,422 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:51,422 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:51,423 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:51,436 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:51,437 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:51,438 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:51,440 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:51,441 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:51,441 - shroombox - INFO - Last modified time: 2025-03-06 13:28:51
2025-03-06 13:28:51,442 - shroombox - INFO - Last checked time: 2025-03-06 13:28:49
2025-03-06 13:28:51,442 - shroombox - INFO - Current time: 2025-03-06 13:28:51
2025-03-06 13:28:51,442 - shroombox - INFO - Config file modified at 2025-03-06 13:28:51.434922, reloading...
2025-03-06 13:28:51,442 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:51,443 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:51,443 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:51,443 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:51,443 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:51,443 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:51,444 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:51,444 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:51,444 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:51,444 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:51,444 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:51,445 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:51,445 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:51,445 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:51,445 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:51,445 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:51,446 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:51,446 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:51,446 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:51,446 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:51,446 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:51,446 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:51,465 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:51,465 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:51,506 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:51,507 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:51,507 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:51,507 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:51,507 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:51,507 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:51,508 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:51,508 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:51,508 - shroombox - INFO - =======================================================
2025-03-06 13:28:51,508 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:53,481 - shroombox.sensor - INFO - Successful measurement at 13:28:53 - CO2: 670.6ppm, Temp: 23.03°C, RH: 32.21%
2025-03-06 13:28:53,481 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.0°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:53,482 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:53,482 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:28:53,525 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:53,526 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:53,587 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:53,587 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:53,588 - shroombox - INFO - Heater set to OFF - Temp: 23.03°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:53,597 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:53,597 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.2%, Setpoint=20.0%
2025-03-06 13:28:53,597 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:53,597 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:53,598 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:53,610 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:53,610 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:53,611 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:53,612 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:53,613 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:53,613 - shroombox - INFO - Last modified time: 2025-03-06 13:28:53
2025-03-06 13:28:53,613 - shroombox - INFO - Last checked time: 2025-03-06 13:28:51
2025-03-06 13:28:53,613 - shroombox - INFO - Current time: 2025-03-06 13:28:53
2025-03-06 13:28:53,614 - shroombox - INFO - Config file modified at 2025-03-06 13:28:53.606921, reloading...
2025-03-06 13:28:53,614 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:53,614 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:53,614 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:53,614 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:53,615 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:53,615 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:53,615 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:53,615 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:53,616 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:53,616 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:53,616 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:53,616 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:53,616 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:53,617 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:53,617 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:53,617 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:53,617 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:53,618 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:53,618 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:53,618 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:53,618 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:53,618 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:53,634 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:53,635 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:53,678 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:53,679 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:53,679 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:53,679 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:53,679 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:53,680 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:53,680 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:53,680 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:53,680 - shroombox - INFO - =======================================================
2025-03-06 13:28:53,680 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:55,650 - shroombox.sensor - INFO - Successful measurement at 13:28:55 - CO2: 682.76ppm, Temp: 23.03°C, RH: 32.22%
2025-03-06 13:28:55,651 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.0°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:55,651 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:55,651 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:28:55,695 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:55,696 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:55,764 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:55,764 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:55,764 - shroombox - INFO - Heater set to OFF - Temp: 23.03°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:55,774 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:55,775 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.2%, Setpoint=20.0%
2025-03-06 13:28:55,775 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:55,775 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:55,775 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:55,789 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:55,789 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:55,790 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:55,791 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:55,791 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:55,791 - shroombox - INFO - Last modified time: 2025-03-06 13:28:55
2025-03-06 13:28:55,792 - shroombox - INFO - Last checked time: 2025-03-06 13:28:53
2025-03-06 13:28:55,792 - shroombox - INFO - Current time: 2025-03-06 13:28:55
2025-03-06 13:28:55,792 - shroombox - INFO - Config file modified at 2025-03-06 13:28:55.786920, reloading...
2025-03-06 13:28:55,792 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:55,793 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:55,793 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:55,793 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:55,793 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:55,794 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:55,794 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:55,794 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:55,794 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:55,794 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:55,795 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:55,795 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:55,795 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:55,795 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:55,795 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:55,796 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:55,796 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:55,796 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:55,796 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:55,796 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:55,796 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:55,797 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:55,814 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:55,814 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:55,853 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:55,854 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:55,854 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:55,855 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:55,855 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:55,855 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:55,855 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:55,855 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:55,855 - shroombox - INFO - =======================================================
2025-03-06 13:28:55,856 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:28:57,828 - shroombox.sensor - INFO - Successful measurement at 13:28:57 - CO2: 707.86ppm, Temp: 23.02°C, RH: 32.23%
2025-03-06 13:28:57,828 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.0°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:28:57,828 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:28:57,829 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:28:57,876 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:28:57,876 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:28:57,941 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:28:57,942 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:28:57,942 - shroombox - INFO - Heater set to OFF - Temp: 23.02°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:28:57,953 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:28:57,953 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.2%, Setpoint=20.0%
2025-03-06 13:28:57,954 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:28:57,954 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:28:57,954 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:28:57,966 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:28:57,966 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:28:57,967 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:28:57,968 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:28:57,968 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:57,969 - shroombox - INFO - Last modified time: 2025-03-06 13:28:57
2025-03-06 13:28:57,969 - shroombox - INFO - Last checked time: 2025-03-06 13:28:55
2025-03-06 13:28:57,969 - shroombox - INFO - Current time: 2025-03-06 13:28:57
2025-03-06 13:28:57,970 - shroombox - INFO - Config file modified at 2025-03-06 13:28:57.962630, reloading...
2025-03-06 13:28:57,970 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:28:57,970 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:57,970 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:28:57,970 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:28:57,971 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:28:57,971 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:28:57,971 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:28:57,971 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:28:57,972 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:28:57,972 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:28:57,972 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:28:57,972 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:28:57,972 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:28:57,973 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:28:57,973 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:28:57,973 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:28:57,973 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:28:57,973 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:57,974 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:28:57,974 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:28:57,974 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:28:57,974 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:28:57,991 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:28:57,991 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:28:58,036 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:28:58,037 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:28:58,037 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:28:58,037 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:28:58,037 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:28:58,038 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:28:58,038 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:28:58,038 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:28:58,038 - shroombox - INFO - =======================================================
2025-03-06 13:28:58,038 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:00,008 - shroombox.sensor - INFO - Successful measurement at 13:29:00 - CO2: 725.94ppm, Temp: 22.99°C, RH: 32.21%
2025-03-06 13:29:00,008 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.0°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:00,008 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:00,009 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:29:00,051 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:00,052 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:00,108 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:00,108 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:00,108 - shroombox - INFO - Heater set to OFF - Temp: 22.99°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:00,118 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:00,118 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.2%, Setpoint=20.0%
2025-03-06 13:29:00,119 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:00,119 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:00,119 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:00,132 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:00,132 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:00,133 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:00,134 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:00,134 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:00,134 - shroombox - INFO - Last modified time: 2025-03-06 13:29:00
2025-03-06 13:29:00,135 - shroombox - INFO - Last checked time: 2025-03-06 13:28:57
2025-03-06 13:29:00,135 - shroombox - INFO - Current time: 2025-03-06 13:29:00
2025-03-06 13:29:00,135 - shroombox - INFO - Config file modified at 2025-03-06 13:29:00.130330, reloading...
2025-03-06 13:29:00,135 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:00,136 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:00,136 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:00,136 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:00,136 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:00,137 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:00,137 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:00,137 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:00,137 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:00,137 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:00,138 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:00,138 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:00,138 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:00,138 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:00,138 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:00,139 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:00,139 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:00,139 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:00,139 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:00,139 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:00,139 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:00,140 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:00,157 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:00,158 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:00,201 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:00,202 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:00,202 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:00,202 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:00,202 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:00,203 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:00,203 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:00,203 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:00,203 - shroombox - INFO - =======================================================
2025-03-06 13:29:00,203 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:02,173 - shroombox.sensor - INFO - Successful measurement at 13:29:02 - CO2: 718.5ppm, Temp: 22.99°C, RH: 32.28%
2025-03-06 13:29:02,174 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.0°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:02,174 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:02,174 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:29:02,217 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:02,218 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:02,296 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:02,296 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:02,296 - shroombox - INFO - Heater set to OFF - Temp: 22.99°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:02,308 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:02,308 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.3%, Setpoint=20.0%
2025-03-06 13:29:02,309 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:02,309 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:02,309 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:02,322 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:02,323 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:02,323 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:02,324 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:02,325 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:02,325 - shroombox - INFO - Last modified time: 2025-03-06 13:29:02
2025-03-06 13:29:02,326 - shroombox - INFO - Last checked time: 2025-03-06 13:29:00
2025-03-06 13:29:02,326 - shroombox - INFO - Current time: 2025-03-06 13:29:02
2025-03-06 13:29:02,326 - shroombox - INFO - Config file modified at 2025-03-06 13:29:02.318046, reloading...
2025-03-06 13:29:02,326 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:02,327 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:02,327 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:02,327 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:02,327 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:02,328 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:02,328 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:02,328 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:02,328 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:02,329 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:02,329 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:02,329 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:02,330 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:02,331 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:02,331 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:02,332 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:02,332 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:02,333 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:02,333 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:02,334 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:02,334 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:02,335 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:02,353 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:02,353 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:02,394 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:02,394 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:02,394 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:02,395 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:02,395 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:02,395 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:02,395 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:02,395 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:02,395 - shroombox - INFO - =======================================================
2025-03-06 13:29:02,396 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:04,367 - shroombox.sensor - INFO - Successful measurement at 13:29:04 - CO2: 716.11ppm, Temp: 22.97°C, RH: 32.37%
2025-03-06 13:29:04,367 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=23.0°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:04,367 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:04,367 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 23.0 < 21.5)
2025-03-06 13:29:04,417 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:04,418 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:04,482 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:04,482 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:04,482 - shroombox - INFO - Heater set to OFF - Temp: 22.97°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:04,493 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:04,494 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.4%, Setpoint=20.0%
2025-03-06 13:29:04,494 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:04,494 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:04,494 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:04,506 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:04,507 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:04,507 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:04,508 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:04,509 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:04,509 - shroombox - INFO - Last modified time: 2025-03-06 13:29:04
2025-03-06 13:29:04,510 - shroombox - INFO - Last checked time: 2025-03-06 13:29:02
2025-03-06 13:29:04,510 - shroombox - INFO - Current time: 2025-03-06 13:29:04
2025-03-06 13:29:04,510 - shroombox - INFO - Config file modified at 2025-03-06 13:29:04.501779, reloading...
2025-03-06 13:29:04,510 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:04,511 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:04,511 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:04,511 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:04,511 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:04,512 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:04,512 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:04,512 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:04,512 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:04,512 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:04,513 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:04,513 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:04,513 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:04,513 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:04,513 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:04,514 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:04,514 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:04,514 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:04,514 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:04,514 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:04,514 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:04,515 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:04,532 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:04,532 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:04,573 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:04,574 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:04,574 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:04,574 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:04,574 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:04,574 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:04,575 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:04,575 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:04,575 - shroombox - INFO - =======================================================
2025-03-06 13:29:04,575 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:06,546 - shroombox.sensor - INFO - Successful measurement at 13:29:06 - CO2: 719.44ppm, Temp: 22.95°C, RH: 32.4%
2025-03-06 13:29:06,547 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:06,547 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:06,547 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:29:06,592 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:06,593 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:06,656 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:06,656 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:06,656 - shroombox - INFO - Heater set to OFF - Temp: 22.95°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:06,667 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:06,668 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.4%, Setpoint=20.0%
2025-03-06 13:29:06,669 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:06,669 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:06,670 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:06,683 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:06,683 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:06,684 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:06,685 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:06,686 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:06,687 - shroombox - INFO - Last modified time: 2025-03-06 13:29:06
2025-03-06 13:29:06,687 - shroombox - INFO - Last checked time: 2025-03-06 13:29:04
2025-03-06 13:29:06,688 - shroombox - INFO - Current time: 2025-03-06 13:29:06
2025-03-06 13:29:06,688 - shroombox - INFO - Config file modified at 2025-03-06 13:29:06.681528, reloading...
2025-03-06 13:29:06,689 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:06,689 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:06,690 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:06,690 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:06,691 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:06,691 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:06,692 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:06,692 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:06,693 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:06,693 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:06,694 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:06,694 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:06,694 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:06,695 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:06,695 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:06,696 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:06,696 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:06,696 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:06,698 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:06,698 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:06,698 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:06,699 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:06,719 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:06,720 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:06,769 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:06,769 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:06,770 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:06,770 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:06,770 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:06,770 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:06,770 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:06,771 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:06,771 - shroombox - INFO - =======================================================
2025-03-06 13:29:06,771 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:08,722 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:08,722 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:08,723 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:08,723 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:08,723 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:08,763 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:29:08,764 - shroombox - INFO - Setting heater to ON
2025-03-06 13:29:08,898 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:08,910 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:29:08,911 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:29:08,911 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:08,911 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:08,912 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:08,925 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:08,925 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:08,926 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:08,927 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:08,927 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:08,928 - shroombox - INFO - Last modified time: 2025-03-06 13:29:08
2025-03-06 13:29:08,928 - shroombox - INFO - Last checked time: 2025-03-06 13:29:06
2025-03-06 13:29:08,928 - shroombox - INFO - Current time: 2025-03-06 13:29:08
2025-03-06 13:29:08,928 - shroombox - INFO - Config file modified at 2025-03-06 13:29:08.925284, reloading...
2025-03-06 13:29:08,929 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:08,929 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:08,929 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:08,929 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:08,930 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:08,930 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:08,930 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:08,930 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:08,931 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:08,931 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:08,931 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:08,931 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:08,931 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:08,931 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:08,932 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:08,932 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:08,932 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:08,932 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:08,932 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:08,933 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:08,933 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:08,933 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:08,949 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:08,949 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:09,002 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:09,002 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:09,002 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:09,003 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:09,003 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:09,003 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:09,003 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:09,003 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:09,003 - shroombox - INFO - =======================================================
2025-03-06 13:29:09,004 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:10,952 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:10,953 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:10,953 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:10,954 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:10,954 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:11,003 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:29:11,004 - shroombox - INFO - Setting heater to ON
2025-03-06 13:29:11,097 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:11,108 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:29:11,109 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:29:11,109 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:11,109 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:11,110 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:11,123 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:11,123 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:11,123 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:11,125 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:11,125 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:11,126 - shroombox - INFO - Last modified time: 2025-03-06 13:29:11
2025-03-06 13:29:11,126 - shroombox - INFO - Last checked time: 2025-03-06 13:29:08
2025-03-06 13:29:11,126 - shroombox - INFO - Current time: 2025-03-06 13:29:11
2025-03-06 13:29:11,126 - shroombox - INFO - Config file modified at 2025-03-06 13:29:11.121059, reloading...
2025-03-06 13:29:11,127 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:11,127 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:11,127 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:11,127 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:11,128 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:11,128 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:11,128 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:11,128 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:11,129 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:11,129 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:11,129 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:11,129 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:11,129 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:11,130 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:11,130 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:11,130 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:11,131 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:11,132 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:11,133 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:11,133 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:11,134 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:11,134 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:11,154 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:11,155 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:11,198 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:11,198 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:11,199 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:11,199 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:11,199 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:11,199 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:11,199 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:11,200 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:11,200 - shroombox - INFO - =======================================================
2025-03-06 13:29:11,200 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:13,170 - shroombox.sensor - INFO - Successful measurement at 13:29:13 - CO2: 739.35ppm, Temp: 22.9°C, RH: 32.47%
2025-03-06 13:29:13,170 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:13,171 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:13,171 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:29:13,218 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:13,219 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:13,282 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:13,283 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:13,283 - shroombox - INFO - Heater set to OFF - Temp: 22.9°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:13,293 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:13,294 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:29:13,295 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:13,295 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:13,296 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:13,308 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:13,308 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:13,309 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:13,310 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:13,311 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:13,312 - shroombox - INFO - Last modified time: 2025-03-06 13:29:13
2025-03-06 13:29:13,312 - shroombox - INFO - Last checked time: 2025-03-06 13:29:11
2025-03-06 13:29:13,313 - shroombox - INFO - Current time: 2025-03-06 13:29:13
2025-03-06 13:29:13,313 - shroombox - INFO - Config file modified at 2025-03-06 13:29:13.308848, reloading...
2025-03-06 13:29:13,314 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:13,314 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:13,314 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:13,314 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:13,315 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:13,315 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:13,315 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:13,315 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:13,315 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:13,316 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:13,316 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:13,316 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:13,316 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:13,316 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:13,317 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:13,317 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:13,317 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:13,317 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:13,317 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:13,317 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:13,318 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:13,318 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:13,335 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:13,336 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:13,378 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:13,378 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:13,378 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:13,378 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:13,379 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:13,379 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:13,379 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:13,379 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:13,379 - shroombox - INFO - =======================================================
2025-03-06 13:29:13,379 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:15,352 - shroombox.sensor - INFO - Successful measurement at 13:29:15 - CO2: 741.04ppm, Temp: 22.88°C, RH: 32.57%
2025-03-06 13:29:15,352 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:15,353 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:15,353 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:29:15,396 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:15,397 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:15,462 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:15,462 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:15,462 - shroombox - INFO - Heater set to OFF - Temp: 22.88°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:15,471 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:15,472 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.6%, Setpoint=20.0%
2025-03-06 13:29:15,472 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:15,472 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.6% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:15,472 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:15,484 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:15,485 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:15,486 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:15,488 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:15,489 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:15,489 - shroombox - INFO - Last modified time: 2025-03-06 13:29:15
2025-03-06 13:29:15,490 - shroombox - INFO - Last checked time: 2025-03-06 13:29:13
2025-03-06 13:29:15,490 - shroombox - INFO - Current time: 2025-03-06 13:29:15
2025-03-06 13:29:15,490 - shroombox - INFO - Config file modified at 2025-03-06 13:29:15.484650, reloading...
2025-03-06 13:29:15,491 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:15,492 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:15,492 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:15,492 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:15,493 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:15,494 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:15,494 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:15,494 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:15,495 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:15,495 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:15,496 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:15,496 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:15,497 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:15,497 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:15,497 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:15,498 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:15,498 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:15,499 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:15,499 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:15,499 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:15,500 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:15,500 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:15,517 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:15,518 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:15,568 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:15,569 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:15,569 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:15,569 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:15,569 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:15,569 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:15,570 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:15,570 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:15,570 - shroombox - INFO - =======================================================
2025-03-06 13:29:15,570 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:17,533 - shroombox.sensor - INFO - Successful measurement at 13:29:17 - CO2: 744.83ppm, Temp: 22.87°C, RH: 32.63%
2025-03-06 13:29:17,534 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:17,534 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:17,534 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:29:17,578 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:17,578 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:17,641 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:17,642 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:17,642 - shroombox - INFO - Heater set to OFF - Temp: 22.87°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:17,651 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:17,652 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.6%, Setpoint=20.0%
2025-03-06 13:29:17,652 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:17,652 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.6% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:17,652 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:17,665 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:17,665 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:17,666 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:17,667 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:17,667 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:17,668 - shroombox - INFO - Last modified time: 2025-03-06 13:29:17
2025-03-06 13:29:17,668 - shroombox - INFO - Last checked time: 2025-03-06 13:29:15
2025-03-06 13:29:17,668 - shroombox - INFO - Current time: 2025-03-06 13:29:17
2025-03-06 13:29:17,668 - shroombox - INFO - Config file modified at 2025-03-06 13:29:17.664462, reloading...
2025-03-06 13:29:17,669 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:17,669 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:17,669 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:17,669 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:17,670 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:17,670 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:17,671 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:17,671 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:17,671 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:17,671 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:17,672 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:17,672 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:17,672 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:17,672 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:17,672 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:17,673 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:17,673 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:17,673 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:17,674 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:17,674 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:17,674 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:17,674 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:17,692 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:17,692 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:17,733 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:17,733 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:17,734 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:17,734 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:17,734 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:17,734 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:17,734 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:17,735 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:17,735 - shroombox - INFO - =======================================================
2025-03-06 13:29:17,735 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:19,708 - shroombox.sensor - INFO - Successful measurement at 13:29:19 - CO2: 744.81ppm, Temp: 22.84°C, RH: 32.7%
2025-03-06 13:29:19,709 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:19,709 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:19,709 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:29:19,751 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:19,751 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:19,814 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:19,815 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:19,815 - shroombox - INFO - Heater set to OFF - Temp: 22.84°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:19,825 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:19,825 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.7%, Setpoint=20.0%
2025-03-06 13:29:19,825 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:19,826 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.7% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:19,826 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:19,838 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:19,839 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:19,839 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:19,840 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:19,841 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:19,841 - shroombox - INFO - Last modified time: 2025-03-06 13:29:19
2025-03-06 13:29:19,842 - shroombox - INFO - Last checked time: 2025-03-06 13:29:17
2025-03-06 13:29:19,842 - shroombox - INFO - Current time: 2025-03-06 13:29:19
2025-03-06 13:29:19,842 - shroombox - INFO - Config file modified at 2025-03-06 13:29:19.836285, reloading...
2025-03-06 13:29:19,842 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:19,842 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:19,843 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:19,843 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:19,843 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:19,843 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:19,844 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:19,844 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:19,844 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:19,844 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:19,844 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:19,845 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:19,845 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:19,845 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:19,845 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:19,845 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:19,846 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:19,846 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:19,846 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:19,846 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:19,846 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:19,846 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:19,863 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:19,864 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:19,907 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:19,907 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:19,908 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:19,908 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:19,908 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:19,908 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:19,908 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:19,908 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:19,909 - shroombox - INFO - =======================================================
2025-03-06 13:29:19,909 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:21,880 - shroombox.sensor - INFO - Successful measurement at 13:29:21 - CO2: 748.73ppm, Temp: 22.85°C, RH: 32.72%
2025-03-06 13:29:21,880 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.9°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:21,881 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:21,881 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.9 < 21.5)
2025-03-06 13:29:21,922 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:21,924 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:22,007 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:22,008 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:22,008 - shroombox - INFO - Heater set to OFF - Temp: 22.85°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:22,035 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:22,036 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.7%, Setpoint=20.0%
2025-03-06 13:29:22,037 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:22,041 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.7% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:22,042 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:22,057 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:22,058 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:22,059 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:22,060 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:22,061 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:22,062 - shroombox - INFO - Last modified time: 2025-03-06 13:29:22
2025-03-06 13:29:22,063 - shroombox - INFO - Last checked time: 2025-03-06 13:29:19
2025-03-06 13:29:22,064 - shroombox - INFO - Current time: 2025-03-06 13:29:22
2025-03-06 13:29:22,070 - shroombox - INFO - Config file modified at 2025-03-06 13:29:22.056113, reloading...
2025-03-06 13:29:22,071 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:22,072 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:22,073 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:22,074 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:22,075 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:22,076 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:22,076 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:22,077 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:22,078 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:22,079 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:22,080 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:22,081 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:22,081 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:22,082 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:22,083 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:22,084 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:22,085 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:22,086 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:22,087 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:22,088 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:22,088 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:22,089 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:22,111 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:22,111 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:22,174 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:22,175 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:22,176 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:22,176 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:22,177 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:22,178 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:22,178 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:22,179 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:22,179 - shroombox - INFO - =======================================================
2025-03-06 13:29:22,179 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:24,126 - shroombox.sensor - INFO - Successful measurement at 13:29:24 - CO2: 746.24ppm, Temp: 22.82°C, RH: 32.7%
2025-03-06 13:29:24,127 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:24,127 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:24,127 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:29:24,167 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:24,168 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:24,231 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:24,231 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:24,231 - shroombox - INFO - Heater set to OFF - Temp: 22.82°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:24,243 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:24,244 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.7%, Setpoint=20.0%
2025-03-06 13:29:24,244 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:24,244 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.7% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:24,244 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:24,261 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:24,261 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:24,262 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:24,263 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:24,264 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:24,264 - shroombox - INFO - Last modified time: 2025-03-06 13:29:24
2025-03-06 13:29:24,264 - shroombox - INFO - Last checked time: 2025-03-06 13:29:22
2025-03-06 13:29:24,264 - shroombox - INFO - Current time: 2025-03-06 13:29:24
2025-03-06 13:29:24,265 - shroombox - INFO - Config file modified at 2025-03-06 13:29:24.259953, reloading...
2025-03-06 13:29:24,265 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:24,265 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:24,265 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:24,266 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:24,266 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:24,266 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:24,266 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:24,267 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:24,267 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:24,267 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:24,267 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:24,267 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:24,268 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:24,268 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:24,268 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:24,268 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:24,268 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:24,269 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:24,269 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:24,269 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:24,269 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:24,269 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:24,297 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:24,297 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:24,352 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:24,352 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:24,353 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:24,353 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:24,353 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:24,353 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:24,354 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:24,354 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:24,354 - shroombox - INFO - =======================================================
2025-03-06 13:29:24,354 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:26,313 - shroombox.sensor - INFO - Successful measurement at 13:29:26 - CO2: 745.94ppm, Temp: 22.82°C, RH: 32.7%
2025-03-06 13:29:26,313 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:26,313 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:26,313 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:29:26,356 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:26,356 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:26,422 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:26,422 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:26,423 - shroombox - INFO - Heater set to OFF - Temp: 22.82°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:26,440 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:26,441 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.7%, Setpoint=20.0%
2025-03-06 13:29:26,442 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:26,443 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.7% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:26,443 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:26,457 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:26,458 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:26,458 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:26,460 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:26,461 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:26,461 - shroombox - INFO - Last modified time: 2025-03-06 13:29:26
2025-03-06 13:29:26,462 - shroombox - INFO - Last checked time: 2025-03-06 13:29:24
2025-03-06 13:29:26,462 - shroombox - INFO - Current time: 2025-03-06 13:29:26
2025-03-06 13:29:26,463 - shroombox - INFO - Config file modified at 2025-03-06 13:29:26.455801, reloading...
2025-03-06 13:29:26,466 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:26,466 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:26,466 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:26,467 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:26,467 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:26,468 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:26,468 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:26,469 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:26,469 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:26,471 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:26,471 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:26,472 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:26,472 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:26,473 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:26,474 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:26,475 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:26,475 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:26,475 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:26,475 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:26,476 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:26,476 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:26,476 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:26,502 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:26,502 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:26,548 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:26,548 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:26,548 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:26,549 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:26,549 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:26,549 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:26,549 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:26,549 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:26,550 - shroombox - INFO - =======================================================
2025-03-06 13:29:26,550 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:28,518 - shroombox.sensor - INFO - Successful measurement at 13:29:28 - CO2: 747.75ppm, Temp: 22.79°C, RH: 32.76%
2025-03-06 13:29:28,519 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:28,519 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:28,519 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:29:28,564 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:28,564 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:28,624 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:28,624 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:28,624 - shroombox - INFO - Heater set to OFF - Temp: 22.79°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:28,636 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:28,636 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.8%, Setpoint=20.0%
2025-03-06 13:29:28,636 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:28,637 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.8% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:28,637 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:28,651 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:28,651 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:28,651 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:28,652 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:28,653 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:28,653 - shroombox - INFO - Last modified time: 2025-03-06 13:29:28
2025-03-06 13:29:28,654 - shroombox - INFO - Last checked time: 2025-03-06 13:29:26
2025-03-06 13:29:28,654 - shroombox - INFO - Current time: 2025-03-06 13:29:28
2025-03-06 13:29:28,654 - shroombox - INFO - Config file modified at 2025-03-06 13:29:28.647656, reloading...
2025-03-06 13:29:28,654 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:28,654 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:28,655 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:28,655 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:28,655 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:28,655 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:28,656 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:28,656 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:28,656 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:28,656 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:28,656 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:28,657 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:28,657 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:28,657 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:28,657 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:28,657 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:28,658 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:28,658 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:28,658 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:28,658 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:28,658 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:28,658 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:28,676 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:28,677 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:28,717 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:28,717 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:28,718 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:28,718 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:28,718 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:28,718 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:28,718 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:28,719 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:28,719 - shroombox - INFO - =======================================================
2025-03-06 13:29:28,719 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:30,693 - shroombox.sensor - INFO - Successful measurement at 13:29:30 - CO2: 749.5ppm, Temp: 22.79°C, RH: 32.94%
2025-03-06 13:29:30,694 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:30,694 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:30,694 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:29:30,788 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:30,788 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:30,850 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:30,850 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:30,850 - shroombox - INFO - Heater set to OFF - Temp: 22.79°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:30,861 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:30,861 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.9%, Setpoint=20.0%
2025-03-06 13:29:30,861 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:30,861 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:30,862 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:30,874 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:30,874 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:30,875 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:30,876 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:30,876 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:30,876 - shroombox - INFO - Last modified time: 2025-03-06 13:29:30
2025-03-06 13:29:30,877 - shroombox - INFO - Last checked time: 2025-03-06 13:29:28
2025-03-06 13:29:30,877 - shroombox - INFO - Current time: 2025-03-06 13:29:30
2025-03-06 13:29:30,877 - shroombox - INFO - Config file modified at 2025-03-06 13:29:30.871518, reloading...
2025-03-06 13:29:30,877 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:30,878 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:30,878 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:30,878 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:30,878 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:30,879 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:30,879 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:30,879 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:30,879 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:30,879 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:30,880 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:30,880 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:30,880 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:30,880 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:30,880 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:30,880 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:30,881 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:30,881 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:30,881 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:30,881 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:30,881 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:30,882 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:30,899 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:30,900 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:30,941 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:30,942 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:30,942 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:30,942 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:30,943 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:30,943 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:30,943 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:30,943 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:30,943 - shroombox - INFO - =======================================================
2025-03-06 13:29:30,943 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:32,914 - shroombox.sensor - INFO - Successful measurement at 13:29:32 - CO2: 750.38ppm, Temp: 22.77°C, RH: 32.93%
2025-03-06 13:29:32,915 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:32,915 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:32,915 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:29:32,954 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:32,955 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:33,013 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:33,013 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:33,013 - shroombox - INFO - Heater set to OFF - Temp: 22.77°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:33,023 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:33,024 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.9%, Setpoint=20.0%
2025-03-06 13:29:33,024 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:33,024 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:33,024 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:33,037 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:33,038 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:33,038 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:33,039 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:33,040 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:33,040 - shroombox - INFO - Last modified time: 2025-03-06 13:29:33
2025-03-06 13:29:33,040 - shroombox - INFO - Last checked time: 2025-03-06 13:29:30
2025-03-06 13:29:33,040 - shroombox - INFO - Current time: 2025-03-06 13:29:33
2025-03-06 13:29:33,041 - shroombox - INFO - Config file modified at 2025-03-06 13:29:33.035389, reloading...
2025-03-06 13:29:33,041 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:33,041 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:33,041 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:33,042 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:33,042 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:33,042 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:33,042 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:33,042 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:33,043 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:33,043 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:33,043 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:33,043 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:33,043 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:33,044 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:33,044 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:33,044 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:33,044 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:33,044 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:33,044 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:33,045 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:33,045 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:33,045 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:33,072 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:33,072 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:33,115 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:33,116 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:33,116 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:33,116 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:33,116 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:33,116 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:33,117 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:33,117 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:33,117 - shroombox - INFO - =======================================================
2025-03-06 13:29:33,117 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:35,089 - shroombox.sensor - INFO - Successful measurement at 13:29:35 - CO2: 754.0ppm, Temp: 22.77°C, RH: 32.93%
2025-03-06 13:29:35,089 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.8°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:35,089 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:35,090 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.8 < 21.5)
2025-03-06 13:29:35,133 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:35,134 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:35,197 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:35,198 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:35,198 - shroombox - INFO - Heater set to OFF - Temp: 22.77°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:35,207 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:35,207 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.9%, Setpoint=20.0%
2025-03-06 13:29:35,207 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:35,208 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:35,208 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:35,220 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:35,220 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:35,221 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:35,222 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:35,222 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:35,223 - shroombox - INFO - Last modified time: 2025-03-06 13:29:35
2025-03-06 13:29:35,223 - shroombox - INFO - Last checked time: 2025-03-06 13:29:33
2025-03-06 13:29:35,223 - shroombox - INFO - Current time: 2025-03-06 13:29:35
2025-03-06 13:29:35,223 - shroombox - INFO - Config file modified at 2025-03-06 13:29:35.219266, reloading...
2025-03-06 13:29:35,223 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:35,224 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:35,224 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:35,224 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:35,224 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:35,225 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:35,225 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:35,225 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:35,225 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:35,226 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:35,226 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:35,226 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:35,226 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:35,226 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:35,227 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:35,227 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:35,227 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:35,227 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:35,227 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:35,227 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:35,228 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:35,228 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:35,245 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:35,245 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:35,285 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:35,285 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:35,286 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:35,286 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:35,286 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:35,286 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:35,286 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:35,287 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:35,287 - shroombox - INFO - =======================================================
2025-03-06 13:29:35,287 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:37,261 - shroombox.sensor - INFO - Successful measurement at 13:29:37 - CO2: 754.98ppm, Temp: 22.73°C, RH: 32.9%
2025-03-06 13:29:37,262 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.7°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:37,262 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:37,262 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.7 < 21.5)
2025-03-06 13:29:37,314 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:37,314 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:37,379 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:37,379 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:37,379 - shroombox - INFO - Heater set to OFF - Temp: 22.73°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:37,391 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:37,392 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.9%, Setpoint=20.0%
2025-03-06 13:29:37,392 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:37,392 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:37,392 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:37,405 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:37,405 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:37,406 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:37,407 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:37,407 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:37,407 - shroombox - INFO - Last modified time: 2025-03-06 13:29:37
2025-03-06 13:29:37,408 - shroombox - INFO - Last checked time: 2025-03-06 13:29:35
2025-03-06 13:29:37,408 - shroombox - INFO - Current time: 2025-03-06 13:29:37
2025-03-06 13:29:37,408 - shroombox - INFO - Config file modified at 2025-03-06 13:29:37.403149, reloading...
2025-03-06 13:29:37,408 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:37,409 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:37,409 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:37,409 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:37,409 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:37,410 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:37,410 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:37,410 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:37,410 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:37,410 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:37,411 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:37,411 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:37,411 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:37,411 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:37,411 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:37,411 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:37,412 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:37,412 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:37,412 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:37,412 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:37,412 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:37,413 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:37,429 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:37,430 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:37,469 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:37,470 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:37,470 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:37,470 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:37,470 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:37,471 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:37,471 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:37,471 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:37,471 - shroombox - INFO - =======================================================
2025-03-06 13:29:37,471 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:39,446 - shroombox.sensor - INFO - Successful measurement at 13:29:39 - CO2: 758.14ppm, Temp: 22.71°C, RH: 32.84%
2025-03-06 13:29:39,447 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.7°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:39,447 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:39,447 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.7 < 21.5)
2025-03-06 13:29:39,492 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:39,493 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:39,559 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:39,560 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:39,560 - shroombox - INFO - Heater set to OFF - Temp: 22.71°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:39,572 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:39,572 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.8%, Setpoint=20.0%
2025-03-06 13:29:39,572 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:39,573 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.8% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:39,573 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:39,586 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:39,586 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:39,586 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:39,587 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:39,588 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:39,588 - shroombox - INFO - Last modified time: 2025-03-06 13:29:39
2025-03-06 13:29:39,588 - shroombox - INFO - Last checked time: 2025-03-06 13:29:37
2025-03-06 13:29:39,589 - shroombox - INFO - Current time: 2025-03-06 13:29:39
2025-03-06 13:29:39,589 - shroombox - INFO - Config file modified at 2025-03-06 13:29:39.583037, reloading...
2025-03-06 13:29:39,589 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:39,590 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:39,590 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:39,590 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:39,590 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:39,590 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:39,591 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:39,591 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:39,591 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:39,591 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:39,591 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:39,592 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:39,592 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:39,592 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:39,592 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:39,592 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:39,592 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:39,593 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:39,593 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:39,593 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:39,593 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:39,593 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:39,613 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:39,614 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:39,657 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:39,658 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:39,658 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:39,659 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:39,659 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:39,660 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:39,661 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:39,661 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:39,661 - shroombox - INFO - =======================================================
2025-03-06 13:29:39,661 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:41,629 - shroombox.sensor - INFO - Successful measurement at 13:29:41 - CO2: 759.65ppm, Temp: 22.7°C, RH: 32.94%
2025-03-06 13:29:41,629 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.7°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:41,630 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:41,630 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.7 < 21.5)
2025-03-06 13:29:41,673 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:41,673 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:41,739 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:41,740 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:41,740 - shroombox - INFO - Heater set to OFF - Temp: 22.7°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:41,751 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:41,751 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.9%, Setpoint=20.0%
2025-03-06 13:29:41,752 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:41,752 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:41,752 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:41,770 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:41,770 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:41,770 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:41,771 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:41,772 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:41,772 - shroombox - INFO - Last modified time: 2025-03-06 13:29:41
2025-03-06 13:29:41,772 - shroombox - INFO - Last checked time: 2025-03-06 13:29:39
2025-03-06 13:29:41,773 - shroombox - INFO - Current time: 2025-03-06 13:29:41
2025-03-06 13:29:41,773 - shroombox - INFO - Config file modified at 2025-03-06 13:29:41.766931, reloading...
2025-03-06 13:29:41,773 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:41,773 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:41,774 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:41,774 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:41,774 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:41,774 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:41,775 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:41,775 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:41,775 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:41,775 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:41,775 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:41,776 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:41,776 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:41,776 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:41,776 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:41,776 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:41,776 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:41,777 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:41,777 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:41,777 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:41,777 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:41,777 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:41,795 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:41,796 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:41,839 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:41,840 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:41,840 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:41,840 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:41,840 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:41,840 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:41,840 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:41,841 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:41,841 - shroombox - INFO - =======================================================
2025-03-06 13:29:41,841 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:43,810 - shroombox.sensor - INFO - Successful measurement at 13:29:43 - CO2: 761.17ppm, Temp: 22.67°C, RH: 32.98%
2025-03-06 13:29:43,810 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.7°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:43,810 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:43,810 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.7 < 21.5)
2025-03-06 13:29:43,854 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:43,855 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:43,916 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:43,916 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:43,916 - shroombox - INFO - Heater set to OFF - Temp: 22.67°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:43,928 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:43,928 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.0%, Setpoint=20.0%
2025-03-06 13:29:43,928 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:43,929 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.0% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:43,929 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:43,942 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:43,942 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:43,943 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:43,944 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:43,945 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:43,945 - shroombox - INFO - Last modified time: 2025-03-06 13:29:43
2025-03-06 13:29:43,945 - shroombox - INFO - Last checked time: 2025-03-06 13:29:41
2025-03-06 13:29:43,945 - shroombox - INFO - Current time: 2025-03-06 13:29:43
2025-03-06 13:29:43,946 - shroombox - INFO - Config file modified at 2025-03-06 13:29:43.938829, reloading...
2025-03-06 13:29:43,946 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:43,946 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:43,946 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:43,946 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:43,947 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:43,947 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:43,947 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:43,947 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:43,948 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:43,948 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:43,948 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:43,948 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:43,948 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:43,948 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:43,949 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:43,949 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:43,949 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:43,949 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:43,949 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:43,949 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:43,950 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:43,950 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:43,972 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:43,972 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:44,013 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:44,013 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:44,014 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:44,014 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:44,014 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:44,014 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:44,014 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:44,014 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:44,015 - shroombox - INFO - =======================================================
2025-03-06 13:29:44,015 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:45,988 - shroombox.sensor - INFO - Successful measurement at 13:29:45 - CO2: 762.1ppm, Temp: 22.63°C, RH: 33.0%
2025-03-06 13:29:45,989 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.6°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:45,989 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:45,989 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.6 < 21.5)
2025-03-06 13:29:46,035 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:46,035 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:46,106 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:46,106 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:46,106 - shroombox - INFO - Heater set to OFF - Temp: 22.63°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:46,116 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:46,116 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.0%, Setpoint=20.0%
2025-03-06 13:29:46,116 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:46,116 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.0% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:46,117 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:46,128 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:46,129 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:46,129 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:46,130 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:46,131 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:46,132 - shroombox - INFO - Last modified time: 2025-03-06 13:29:46
2025-03-06 13:29:46,132 - shroombox - INFO - Last checked time: 2025-03-06 13:29:43
2025-03-06 13:29:46,133 - shroombox - INFO - Current time: 2025-03-06 13:29:46
2025-03-06 13:29:46,133 - shroombox - INFO - Config file modified at 2025-03-06 13:29:46.126731, reloading...
2025-03-06 13:29:46,133 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:46,134 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:46,134 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:46,135 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:46,135 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:46,135 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:46,135 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:46,136 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:46,136 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:46,136 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:46,136 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:46,136 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:46,137 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:46,137 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:46,137 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:46,137 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:46,137 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:46,138 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:46,138 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:46,138 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:46,138 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:46,138 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:46,154 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:46,155 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:46,206 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:46,206 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:46,206 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:46,207 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:46,207 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:46,207 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:46,207 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:46,207 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:46,208 - shroombox - INFO - =======================================================
2025-03-06 13:29:46,208 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:48,157 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:48,158 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:48,158 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:48,158 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:48,158 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:48,200 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:29:48,200 - shroombox - INFO - Setting heater to ON
2025-03-06 13:29:48,291 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:48,301 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:29:48,301 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:29:48,302 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:48,302 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:48,302 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:48,317 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:48,318 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:48,318 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:48,320 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:48,321 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:48,322 - shroombox - INFO - Last modified time: 2025-03-06 13:29:48
2025-03-06 13:29:48,322 - shroombox - INFO - Last checked time: 2025-03-06 13:29:46
2025-03-06 13:29:48,323 - shroombox - INFO - Current time: 2025-03-06 13:29:48
2025-03-06 13:29:48,323 - shroombox - INFO - Config file modified at 2025-03-06 13:29:48.314637, reloading...
2025-03-06 13:29:48,324 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:48,324 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:48,325 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:48,325 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:48,326 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:48,326 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:48,327 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:48,327 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:48,327 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:48,328 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:48,328 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:48,328 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:48,328 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:48,329 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:48,329 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:48,330 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:48,330 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:48,330 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:48,330 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:48,331 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:48,331 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:48,331 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:48,364 - shroombox.sensor - INFO - Successful measurement at 13:29:48 - CO2: 763.58ppm, Temp: 22.62°C, RH: 33.04%
2025-03-06 13:29:48,408 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:48,409 - shroombox - INFO - Current temperature: 22.6°C
2025-03-06 13:29:48,409 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:48,409 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:48,409 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:48,409 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 22.6 < 21.5)
2025-03-06 13:29:48,410 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:48,410 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:48,410 - shroombox - INFO - =======================================================
2025-03-06 13:29:48,410 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:29:48,410 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:29:48,410 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:48,482 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:48,483 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:48,519 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:29:50,352 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:50,352 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:50,352 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:50,352 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:50,353 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:50,405 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:29:50,406 - shroombox - INFO - Setting heater to ON
2025-03-06 13:29:50,498 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:50,508 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:29:50,509 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:29:50,509 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:50,509 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:50,509 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:50,522 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:50,522 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:50,523 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:50,524 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:50,524 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:50,525 - shroombox - INFO - Last modified time: 2025-03-06 13:29:50
2025-03-06 13:29:50,525 - shroombox - INFO - Last checked time: 2025-03-06 13:29:48
2025-03-06 13:29:50,525 - shroombox - INFO - Current time: 2025-03-06 13:29:50
2025-03-06 13:29:50,525 - shroombox - INFO - Config file modified at 2025-03-06 13:29:50.518547, reloading...
2025-03-06 13:29:50,526 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:50,526 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:50,526 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:50,526 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:50,527 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:50,527 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:50,527 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:50,527 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:50,528 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:50,528 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:50,528 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:50,528 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:50,528 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:50,528 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:50,529 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:50,529 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:50,529 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:50,529 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:50,530 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:50,530 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:50,530 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:50,530 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:50,561 - shroombox.sensor - INFO - Successful measurement at 13:29:50 - CO2: 764.94ppm, Temp: 22.62°C, RH: 33.02%
2025-03-06 13:29:50,609 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:50,610 - shroombox - INFO - Current temperature: 22.6°C
2025-03-06 13:29:50,610 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:50,611 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:50,611 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:50,611 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 22.6 < 21.5)
2025-03-06 13:29:50,612 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:50,612 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:50,613 - shroombox - INFO - =======================================================
2025-03-06 13:29:50,613 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:29:50,613 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:29:50,613 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:50,674 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:50,674 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:50,711 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:29:52,550 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:52,550 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:52,551 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:52,551 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:52,551 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:52,591 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:29:52,591 - shroombox - INFO - Setting heater to ON
2025-03-06 13:29:52,689 - shroombox - INFO - Heater set to ON - Temp: 20.5°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:52,702 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:29:52,702 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=32.5%, Setpoint=20.0%
2025-03-06 13:29:52,702 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:52,703 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 32.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:52,703 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:52,716 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:52,716 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:52,717 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:52,718 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:52,719 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:52,719 - shroombox - INFO - Last modified time: 2025-03-06 13:29:52
2025-03-06 13:29:52,719 - shroombox - INFO - Last checked time: 2025-03-06 13:29:50
2025-03-06 13:29:52,720 - shroombox - INFO - Current time: 2025-03-06 13:29:52
2025-03-06 13:29:52,720 - shroombox - INFO - Config file modified at 2025-03-06 13:29:52.714460, reloading...
2025-03-06 13:29:52,720 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:52,721 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:52,721 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:52,722 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:52,722 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:52,723 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:52,723 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:52,723 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:52,723 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:52,724 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:52,724 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:52,724 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:52,724 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:52,725 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:52,725 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:52,725 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:52,725 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:52,726 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:52,726 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:52,726 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:52,726 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:52,727 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:52,744 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:52,745 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:52,782 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:52,782 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:52,782 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:52,782 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:52,783 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:52,783 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:52,783 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:52,783 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:52,783 - shroombox - INFO - =======================================================
2025-03-06 13:29:52,783 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:54,760 - shroombox.sensor - INFO - Successful measurement at 13:29:54 - CO2: 765.12ppm, Temp: 22.59°C, RH: 33.06%
2025-03-06 13:29:54,761 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.6°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:54,761 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:54,761 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.6 < 21.5)
2025-03-06 13:29:54,803 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:54,804 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:54,866 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:54,866 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:54,866 - shroombox - INFO - Heater set to OFF - Temp: 22.59°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:54,878 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:54,878 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.1%, Setpoint=20.0%
2025-03-06 13:29:54,878 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:54,879 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:54,879 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:54,896 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:54,896 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:54,897 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:54,898 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:54,898 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:54,899 - shroombox - INFO - Last modified time: 2025-03-06 13:29:54
2025-03-06 13:29:54,899 - shroombox - INFO - Last checked time: 2025-03-06 13:29:52
2025-03-06 13:29:54,899 - shroombox - INFO - Current time: 2025-03-06 13:29:54
2025-03-06 13:29:54,899 - shroombox - INFO - Config file modified at 2025-03-06 13:29:54.894378, reloading...
2025-03-06 13:29:54,900 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:54,900 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:54,900 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:54,900 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:54,901 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:54,901 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:54,901 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:54,901 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:54,901 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:54,902 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:54,902 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:54,902 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:54,902 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:54,902 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:54,903 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:54,903 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:54,903 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:54,903 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:54,903 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:54,904 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:54,904 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:54,904 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:54,920 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:54,921 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:54,960 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:54,961 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:54,961 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:54,961 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:54,961 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:54,962 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:54,962 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:54,962 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:54,962 - shroombox - INFO - =======================================================
2025-03-06 13:29:54,962 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:56,936 - shroombox.sensor - INFO - Successful measurement at 13:29:56 - CO2: 764.56ppm, Temp: 22.57°C, RH: 33.09%
2025-03-06 13:29:56,937 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.6°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:56,937 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:56,937 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.6 < 21.5)
2025-03-06 13:29:56,981 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:56,981 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:57,047 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:57,047 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:57,047 - shroombox - INFO - Heater set to OFF - Temp: 22.57°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:57,057 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:57,057 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.1%, Setpoint=20.0%
2025-03-06 13:29:57,057 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:57,058 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:57,058 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:57,072 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:57,072 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:57,072 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:57,074 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:57,074 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:57,074 - shroombox - INFO - Last modified time: 2025-03-06 13:29:57
2025-03-06 13:29:57,075 - shroombox - INFO - Last checked time: 2025-03-06 13:29:54
2025-03-06 13:29:57,075 - shroombox - INFO - Current time: 2025-03-06 13:29:57
2025-03-06 13:29:57,075 - shroombox - INFO - Config file modified at 2025-03-06 13:29:57.070299, reloading...
2025-03-06 13:29:57,075 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:57,075 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:57,076 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:57,076 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:57,076 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:57,076 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:57,077 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:57,077 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:57,077 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:57,077 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:57,078 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:57,078 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:57,078 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:57,078 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:57,078 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:57,079 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:57,079 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:57,079 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:57,079 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:57,079 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:57,079 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:57,080 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:57,097 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:57,097 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:57,143 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:57,143 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:57,144 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:57,144 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:57,144 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:57,144 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:57,144 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:57,144 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:57,145 - shroombox - INFO - =======================================================
2025-03-06 13:29:57,145 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:29:59,113 - shroombox.sensor - INFO - Successful measurement at 13:29:59 - CO2: 764.21ppm, Temp: 22.54°C, RH: 33.2%
2025-03-06 13:29:59,113 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:29:59,113 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:29:59,114 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.5 < 21.5)
2025-03-06 13:29:59,156 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:29:59,156 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:29:59,222 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:29:59,222 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:29:59,223 - shroombox - INFO - Heater set to OFF - Temp: 22.54°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:29:59,233 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:29:59,233 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.2%, Setpoint=20.0%
2025-03-06 13:29:59,233 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:29:59,234 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:29:59,234 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:29:59,247 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:29:59,248 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:29:59,248 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:29:59,249 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:29:59,250 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:59,250 - shroombox - INFO - Last modified time: 2025-03-06 13:29:59
2025-03-06 13:29:59,250 - shroombox - INFO - Last checked time: 2025-03-06 13:29:57
2025-03-06 13:29:59,250 - shroombox - INFO - Current time: 2025-03-06 13:29:59
2025-03-06 13:29:59,251 - shroombox - INFO - Config file modified at 2025-03-06 13:29:59.242222, reloading...
2025-03-06 13:29:59,251 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:29:59,251 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:59,251 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:29:59,251 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:29:59,252 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:29:59,252 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:29:59,252 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:29:59,252 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:29:59,253 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:29:59,253 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:29:59,253 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:29:59,253 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:29:59,253 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:29:59,254 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:29:59,254 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:29:59,254 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:29:59,254 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:29:59,254 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:59,254 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:29:59,255 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:29:59,255 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:29:59,255 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:29:59,271 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:29:59,272 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:29:59,314 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:29:59,315 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:29:59,315 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:29:59,316 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:29:59,316 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:29:59,316 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:29:59,316 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:29:59,316 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:29:59,316 - shroombox - INFO - =======================================================
2025-03-06 13:29:59,317 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:30:01,286 - shroombox.sensor - INFO - Successful measurement at 13:30:01 - CO2: 765.11ppm, Temp: 22.47°C, RH: 33.31%
2025-03-06 13:30:01,287 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:30:01,287 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:30:01,287 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.5 < 21.5)
2025-03-06 13:30:01,332 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:30:01,333 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:30:01,394 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:30:01,394 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:30:01,394 - shroombox - INFO - Heater set to OFF - Temp: 22.47°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:30:01,405 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:30:01,405 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.3%, Setpoint=20.0%
2025-03-06 13:30:01,405 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:30:01,405 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:30:01,406 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:30:01,419 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:30:01,419 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:30:01,420 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:30:01,421 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:30:01,422 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:30:01,423 - shroombox - INFO - Last modified time: 2025-03-06 13:30:01
2025-03-06 13:30:01,423 - shroombox - INFO - Last checked time: 2025-03-06 13:29:59
2025-03-06 13:30:01,423 - shroombox - INFO - Current time: 2025-03-06 13:30:01
2025-03-06 13:30:01,423 - shroombox - INFO - Config file modified at 2025-03-06 13:30:01.414149, reloading...
2025-03-06 13:30:01,424 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:30:01,424 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:30:01,424 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:30:01,424 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:30:01,425 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:30:01,425 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:30:01,425 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:30:01,426 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:30:01,426 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:30:01,426 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:30:01,426 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:30:01,427 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:30:01,427 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:30:01,427 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:30:01,427 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:30:01,427 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:30:01,428 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:30:01,428 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:30:01,428 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:30:01,428 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:30:01,428 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:30:01,429 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:30:01,447 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:30:01,447 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:30:01,487 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:30:01,488 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:30:01,488 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:30:01,489 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:30:01,489 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:30:01,490 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:30:01,490 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:30:01,490 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:30:01,491 - shroombox - INFO - =======================================================
2025-03-06 13:30:01,491 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:30:03,462 - shroombox.sensor - INFO - Successful measurement at 13:30:03 - CO2: 765.56ppm, Temp: 22.46°C, RH: 33.44%
2025-03-06 13:30:03,463 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=22.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:30:03,463 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:30:03,463 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 22.5 < 21.5)
2025-03-06 13:30:03,507 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:30:03,507 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:30:03,570 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:30:03,571 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:30:03,571 - shroombox - INFO - Heater set to OFF - Temp: 22.46°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:30:03,584 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:30:03,584 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=33.4%, Setpoint=20.0%
2025-03-06 13:30:03,585 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:30:03,585 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 33.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:30:03,585 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:30:03,600 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:30:03,600 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:30:03,601 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:30:03,602 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:30:03,602 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:30:03,603 - shroombox - INFO - Last modified time: 2025-03-06 13:30:03
2025-03-06 13:30:03,603 - shroombox - INFO - Last checked time: 2025-03-06 13:30:01
2025-03-06 13:30:03,603 - shroombox - INFO - Current time: 2025-03-06 13:30:03
2025-03-06 13:30:03,603 - shroombox - INFO - Config file modified at 2025-03-06 13:30:03.598078, reloading...
2025-03-06 13:30:03,603 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:30:03,604 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:30:03,604 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:30:03,604 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:30:03,604 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:30:03,605 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:30:03,605 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:30:03,605 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:30:03,605 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:30:03,605 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:30:03,606 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:30:03,606 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:30:03,606 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:30:03,606 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:30:03,606 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:30:03,607 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:30:03,607 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:30:03,607 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:30:03,607 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:30:03,607 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:30:03,607 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:30:03,608 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:30:03,625 - shroombox.sensor - WARNING - Warning: No sensor available
2025-03-06 13:30:03,626 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:30:03,668 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:30:03,669 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:30:03,669 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:30:03,669 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:30:03,670 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:30:03,670 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:30:03,670 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:30:03,670 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:30:03,670 - shroombox - INFO - =======================================================
2025-03-06 13:30:03,671 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:30:13,599 - shroombox - INFO - Received shutdown signal, cleaning up...
2025-03-06 13:30:13,646 - shroombox - INFO - 
=== Cleaning up resources ===
2025-03-06 13:30:13,647 - shroombox - INFO - ✓ Fan stopped
2025-03-06 13:30:13,647 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:30:13,821 - shroombox - INFO - Successfully set heater to OFF
2025-03-06 13:30:13,866 - shroombox - INFO - ✓ Heater turned off
2025-03-06 13:30:13,866 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:30:13,904 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:30:13,905 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:30:13,905 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:30:13,906 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:30:13,907 - shroombox - INFO - ✓ Humidifier turned off
2025-03-06 13:30:13,907 - shroombox - INFO - ✓ InfluxDB client closed
2025-03-06 13:30:13,907 - shroombox - INFO - ✓ Cleanup completed
2025-03-06 13:30:18,653 - shroombox - INFO - 
=== Cleaning up resources ===
2025-03-06 13:30:18,654 - shroombox - INFO - ✓ Fan stopped
2025-03-06 13:30:18,655 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:30:18,748 - shroombox - INFO - ✓ Heater turned off
2025-03-06 13:30:18,749 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:30:18,761 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:30:18,762 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:30:18,763 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:30:18,765 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:30:18,766 - shroombox - INFO - ✓ Humidifier turned off
2025-03-06 13:30:18,766 - shroombox - INFO - ✓ InfluxDB client closed
2025-03-06 13:30:18,767 - shroombox - INFO - ✓ Cleanup completed
2025-03-06 13:44:32,422 - shroombox - INFO - Environment variables loaded:
2025-03-06 13:44:32,425 - shroombox - INFO - INFLUXDB_URL: http://localhost:8086
2025-03-06 13:44:32,426 - shroombox - INFO - INFLUXDB_ORG: supershrooms
2025-03-06 13:44:32,426 - shroombox - INFO - INFLUXDB_BUCKET: test
2025-03-06 13:44:32,427 - shroombox - INFO - ==================================================
2025-03-06 13:44:36,739 - shroombox - INFO - 
=== Starting Initial Device Scan ===
2025-03-06 13:44:36,741 - shroombox - INFO - 
Before scan - Current settings in settings.json:
2025-03-06 13:44:36,742 - shroombox - INFO - Number of devices: 2
2025-03-06 13:44:36,742 - shroombox - INFO -   - Humidifier (192.168.8.181) - Role: humidifier
2025-03-06 13:44:36,743 - shroombox - INFO -   - Heatmat (192.168.8.164) - Role: heater
2025-03-06 13:44:36,744 - shroombox - INFO - 
Scanning for devices...
2025-03-06 13:44:36,745 - shroombox.device - INFO - Starting device scan and settings update...
2025-03-06 13:44:36,746 - shroombox.device - INFO - Starting Kasa device discovery...
2025-03-06 13:44:42,038 - shroombox.device - INFO - Found 2 devices on network
2025-03-06 13:44:42,085 - shroombox.device - INFO - ✓ Found Tapo P115: Heatmat at 192.168.8.164
2025-03-06 13:44:42,131 - shroombox.device - INFO - ✓ Found Tapo P115: Humidifier at 192.168.8.181
2025-03-06 13:44:42,133 - shroombox.device - INFO - Discovery complete. Found 2 Tapo P115 devices
2025-03-06 13:44:42,145 - shroombox.device - INFO - Successfully updated settings with 2 devices
2025-03-06 13:44:42,146 - shroombox - INFO - 
After scan - Updated settings in settings.json:
2025-03-06 13:44:42,148 - shroombox - INFO - 
Found and saved 2 devices:
2025-03-06 13:44:42,149 - shroombox - INFO - 
Device Details:
2025-03-06 13:44:42,151 - shroombox - INFO -   Name: Heatmat
2025-03-06 13:44:42,152 - shroombox - INFO -   IP: 192.168.8.164
2025-03-06 13:44:42,153 - shroombox - INFO -   MAC: B0-19-21-C4-CE-97
2025-03-06 13:44:42,155 - shroombox - INFO -   Model: P115
2025-03-06 13:44:42,156 - shroombox - INFO -   Role: heater
2025-03-06 13:44:42,157 - shroombox - INFO -   State: OFF
2025-03-06 13:44:42,158 - shroombox - INFO - 
Device Details:
2025-03-06 13:44:42,160 - shroombox - INFO -   Name: Humidifier
2025-03-06 13:44:42,161 - shroombox - INFO -   IP: 192.168.8.181
2025-03-06 13:44:42,163 - shroombox - INFO -   MAC: B0-19-21-C4-C9-9D
2025-03-06 13:44:42,164 - shroombox - INFO -   Model: P115
2025-03-06 13:44:42,165 - shroombox - INFO -   Role: humidifier
2025-03-06 13:44:42,167 - shroombox - INFO -   State: OFF
2025-03-06 13:44:42,168 - shroombox - INFO - 
Changes detected in settings.json!
2025-03-06 13:44:42,170 - shroombox - INFO - Settings file has been updated with new device information.
2025-03-06 13:44:42,171 - shroombox - INFO - 
=== Device Scan Complete ===

2025-03-06 13:44:42,173 - shroombox - INFO - Current working directory: /home/danny/Github/shroombox/shroombox3
2025-03-06 13:44:42,175 - shroombox - INFO - Looking for config at: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:42,176 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:42,178 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:44:42,179 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:44:42,180 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:42,180 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:44:42,181 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:44:42,182 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:44:42,182 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:44:42,183 - shroombox - INFO - Config last modified: 2025-03-06 13:44:42.137845
2025-03-06 13:44:42,184 - shroombox.sensor - INFO - Initializing SCD30 sensor (attempt 1/3)...
2025-03-06 13:44:42,194 - shroombox.sensor - INFO - Set measurement interval to 2 seconds
2025-03-06 13:44:42,201 - shroombox.sensor - INFO - Started periodic measurement
2025-03-06 13:44:42,202 - shroombox.sensor - INFO - Waiting for first measurement (up to 4 seconds)...
2025-03-06 13:44:42,209 - shroombox.sensor - INFO - First measurement is ready
2025-03-06 13:44:42,211 - shroombox - INFO - Loaded device assignments - Heater: 192.168.8.164, Humidifier: 192.168.8.181
2025-03-06 13:44:42,212 - shroombox - INFO - 
Initializing PIDs:
2025-03-06 13:44:42,213 - shroombox - INFO - Phase: colonisation
2025-03-06 13:44:42,213 - shroombox - INFO - RH Setpoint: 20.0
2025-03-06 13:44:42,214 - shroombox - INFO - CO2 Setpoint: 500
2025-03-06 13:44:42,215 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:44:42,216 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:44:42,216 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:44:42,217 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:44:42,218 - shroombox - INFO - Updating humidity PID tunings: (0.2, 0.01, 0.05) -> (0.2, 0.01, 0.0)
2025-03-06 13:44:42,219 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:44:42,220 - shroombox - INFO - 
=== Initializing InfluxDB Client ===
2025-03-06 13:44:42,220 - shroombox - INFO - URL: http://localhost:8086
2025-03-06 13:44:42,221 - shroombox - INFO - Organization: supershrooms
2025-03-06 13:44:42,221 - shroombox - INFO - Bucket: test
2025-03-06 13:44:42,268 - shroombox - INFO - ✓ InfluxDB connection test successful
2025-03-06 13:44:42,270 - shroombox.device - INFO - Starting device scan and settings update...
2025-03-06 13:44:42,270 - shroombox.device - INFO - Starting Kasa device discovery...
2025-03-06 13:44:47,282 - shroombox.device - INFO - Found 2 devices on network
2025-03-06 13:44:47,333 - shroombox.device - INFO - ✓ Found Tapo P115: Humidifier at 192.168.8.181
2025-03-06 13:44:47,380 - shroombox.device - INFO - ✓ Found Tapo P115: Heatmat at 192.168.8.164
2025-03-06 13:44:47,382 - shroombox.device - INFO - Discovery complete. Found 2 Tapo P115 devices
2025-03-06 13:44:47,393 - shroombox.device - INFO - Successfully updated settings with 2 devices
2025-03-06 13:44:47,403 - shroombox - INFO - 
=== Starting Main Control Loop ===
2025-03-06 13:44:47,431 - shroombox.sensor - INFO - Successful measurement at 13:44:47 - CO2: 666.09ppm, Temp: 20.56°C, RH: 35.16%
2025-03-06 13:44:47,433 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.6°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:44:47,434 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=OFF
2025-03-06 13:44:47,436 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.6 < 21.5)
2025-03-06 13:44:47,482 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:44:47,484 - shroombox - INFO - Setting heater to ON
2025-03-06 13:44:47,653 - shroombox - INFO - Successfully set heater to ON
2025-03-06 13:44:47,708 - shroombox - INFO - Heater set to ON - Temp: 20.56°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:44:47,733 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:44:47,735 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=35.2%, Setpoint=20.0%
2025-03-06 13:44:47,736 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:44:47,738 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 35.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:44:47,740 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:44:47,785 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:44:47,786 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:44:47,787 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:44:47,792 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:44:47,794 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:47,795 - shroombox - INFO - Last modified time: 2025-03-06 13:44:47
2025-03-06 13:44:47,796 - shroombox - INFO - Last checked time: 2025-03-06 13:44:42
2025-03-06 13:44:47,796 - shroombox - INFO - Current time: 2025-03-06 13:44:47
2025-03-06 13:44:47,797 - shroombox - INFO - Config file modified at 2025-03-06 13:44:47.786325, reloading...
2025-03-06 13:44:47,798 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:44:47,799 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:47,799 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:44:47,800 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:44:47,801 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:47,802 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:44:47,803 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:44:47,803 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:44:47,804 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:44:47,804 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:44:47,805 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:44:47,806 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:44:47,807 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:44:47,808 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> True
2025-03-06 13:44:47,809 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:44:47,810 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:44:47,810 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:44:47,811 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:44:47,812 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:44:47,812 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:44:47,813 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:44:47,814 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:44:49,447 - shroombox.sensor - INFO - Successful measurement at 13:44:49 - CO2: 666.11ppm, Temp: 20.55°C, RH: 35.06%
2025-03-06 13:44:49,491 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:44:49,492 - shroombox - INFO - Current temperature: 20.6°C
2025-03-06 13:44:49,493 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:44:49,493 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:44:49,494 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:44:49,495 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.6 < 21.5)
2025-03-06 13:44:49,495 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:44:49,496 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:44:49,497 - shroombox - INFO - =======================================================
2025-03-06 13:44:49,498 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:44:51,465 - shroombox.sensor - INFO - Successful measurement at 13:44:51 - CO2: 666.67ppm, Temp: 20.56°C, RH: 35.03%
2025-03-06 13:44:51,466 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.6°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:44:51,467 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:44:51,468 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.6 < 21.5)
2025-03-06 13:44:51,566 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:44:51,567 - shroombox - INFO - Setting heater to ON
2025-03-06 13:44:51,671 - shroombox - INFO - Heater set to ON - Temp: 20.56°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:44:51,684 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:44:51,685 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=35.0%, Setpoint=20.0%
2025-03-06 13:44:51,686 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:44:51,687 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 35.0% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:44:51,687 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:44:51,700 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:44:51,701 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:44:51,702 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:44:51,707 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:44:51,709 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:51,709 - shroombox - INFO - Last modified time: 2025-03-06 13:44:51
2025-03-06 13:44:51,710 - shroombox - INFO - Last checked time: 2025-03-06 13:44:47
2025-03-06 13:44:51,711 - shroombox - INFO - Current time: 2025-03-06 13:44:51
2025-03-06 13:44:51,712 - shroombox - INFO - Config file modified at 2025-03-06 13:44:51.702651, reloading...
2025-03-06 13:44:51,713 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:44:51,713 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:51,714 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:44:51,715 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:44:51,716 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:51,717 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:44:51,718 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:44:51,719 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:44:51,719 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:44:51,720 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:44:51,721 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:44:51,722 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:44:51,723 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:44:51,724 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:44:51,724 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:44:51,725 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:44:51,726 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:44:51,727 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:44:51,727 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:44:51,728 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:44:51,729 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:44:51,730 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:44:53,484 - shroombox.sensor - INFO - Successful measurement at 13:44:53 - CO2: 667.26ppm, Temp: 20.49°C, RH: 35.35%
2025-03-06 13:44:53,534 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:44:53,536 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:44:53,537 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:44:53,538 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:44:53,539 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:44:53,540 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:44:53,542 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:44:53,543 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:44:53,544 - shroombox - INFO - =======================================================
2025-03-06 13:44:53,545 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:44:55,501 - shroombox.sensor - INFO - Successful measurement at 13:44:55 - CO2: 667.88ppm, Temp: 20.52°C, RH: 35.59%
2025-03-06 13:44:55,502 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:44:55,503 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:44:55,503 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:44:55,549 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:44:55,550 - shroombox - INFO - Setting heater to ON
2025-03-06 13:44:55,644 - shroombox - INFO - Heater set to ON - Temp: 20.52°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:44:55,658 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:44:55,659 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=35.6%, Setpoint=20.0%
2025-03-06 13:44:55,661 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:44:55,662 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 35.6% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:44:55,662 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:44:55,677 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:44:55,678 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:44:55,679 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:44:55,684 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:44:55,685 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:55,686 - shroombox - INFO - Last modified time: 2025-03-06 13:44:55
2025-03-06 13:44:55,687 - shroombox - INFO - Last checked time: 2025-03-06 13:44:51
2025-03-06 13:44:55,688 - shroombox - INFO - Current time: 2025-03-06 13:44:55
2025-03-06 13:44:55,688 - shroombox - INFO - Config file modified at 2025-03-06 13:44:55.678974, reloading...
2025-03-06 13:44:55,689 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:44:55,690 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:55,691 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:44:55,692 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:44:55,693 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:44:55,694 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:44:55,694 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:44:55,695 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:44:55,695 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:44:55,696 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:44:55,697 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:44:55,698 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:44:55,698 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:44:55,699 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:44:55,700 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:44:55,700 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:44:55,701 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:44:55,702 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:44:55,703 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:44:55,703 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:44:55,704 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:44:55,705 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:44:57,516 - shroombox.sensor - INFO - Successful measurement at 13:44:57 - CO2: 668.24ppm, Temp: 20.48°C, RH: 35.74%
2025-03-06 13:44:57,559 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:44:57,561 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:44:57,562 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:44:57,562 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:44:57,563 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:44:57,564 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:44:57,564 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:44:57,565 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:44:57,566 - shroombox - INFO - =======================================================
2025-03-06 13:44:57,566 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:00,049 - shroombox.sensor - INFO - Successful measurement at 13:45:00 - CO2: 668.54ppm, Temp: 20.48°C, RH: 35.92%
2025-03-06 13:45:00,050 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.5°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:00,051 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:00,052 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:45:00,122 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:00,123 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:00,283 - shroombox - INFO - Heater set to ON - Temp: 20.48°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:00,299 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:00,299 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=35.9%, Setpoint=20.0%
2025-03-06 13:45:00,300 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:00,301 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 35.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:00,302 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:00,316 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:00,317 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:00,318 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:00,323 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:00,324 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:00,325 - shroombox - INFO - Last modified time: 2025-03-06 13:45:00
2025-03-06 13:45:00,326 - shroombox - INFO - Last checked time: 2025-03-06 13:44:55
2025-03-06 13:45:00,327 - shroombox - INFO - Current time: 2025-03-06 13:45:00
2025-03-06 13:45:00,328 - shroombox - INFO - Config file modified at 2025-03-06 13:45:00.319343, reloading...
2025-03-06 13:45:00,328 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:45:00,330 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:00,330 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:00,331 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:00,332 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:00,333 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:00,333 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:00,334 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:00,335 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:00,335 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:00,336 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:45:00,337 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:00,338 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:00,339 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:00,339 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:00,340 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:00,341 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:00,342 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:00,342 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:00,343 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:00,343 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:00,344 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:02,066 - shroombox.sensor - INFO - Successful measurement at 13:45:02 - CO2: 668.56ppm, Temp: 20.46°C, RH: 35.95%
2025-03-06 13:45:02,112 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:02,114 - shroombox - INFO - Current temperature: 20.5°C
2025-03-06 13:45:02,114 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:02,115 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:02,116 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:45:02,117 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.5 < 21.5)
2025-03-06 13:45:02,118 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:02,119 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:02,120 - shroombox - INFO - =======================================================
2025-03-06 13:45:02,120 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:04,591 - shroombox.sensor - INFO - Successful measurement at 13:45:04 - CO2: 668.85ppm, Temp: 20.43°C, RH: 36.06%
2025-03-06 13:45:04,592 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:04,592 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:04,593 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:04,646 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:04,648 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:04,766 - shroombox - INFO - Heater set to ON - Temp: 20.43°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:04,780 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:04,781 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.1%, Setpoint=20.0%
2025-03-06 13:45:04,782 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:04,782 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:04,783 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:04,798 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:04,799 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:04,800 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:04,805 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:04,806 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:04,807 - shroombox - INFO - Last modified time: 2025-03-06 13:45:04
2025-03-06 13:45:04,808 - shroombox - INFO - Last checked time: 2025-03-06 13:45:00
2025-03-06 13:45:04,809 - shroombox - INFO - Current time: 2025-03-06 13:45:04
2025-03-06 13:45:04,809 - shroombox - INFO - Config file modified at 2025-03-06 13:45:04.799691, reloading...
2025-03-06 13:45:04,810 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:45:04,811 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:04,812 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:04,813 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:04,814 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:04,815 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:04,816 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:04,817 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:04,817 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:04,818 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:04,819 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:45:04,820 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:04,820 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:04,821 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:04,822 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:04,823 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:04,823 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:04,824 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:04,825 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:04,826 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:04,826 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:04,827 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:07,114 - shroombox.sensor - INFO - Successful measurement at 13:45:07 - CO2: 669.4ppm, Temp: 20.42°C, RH: 36.19%
2025-03-06 13:45:07,154 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:07,155 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:07,156 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:07,156 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:07,157 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:45:07,158 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:07,159 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:07,159 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:07,160 - shroombox - INFO - =======================================================
2025-03-06 13:45:07,161 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:09,386 - shroombox.sensor - INFO - Successful measurement at 13:45:09 - CO2: 669.85ppm, Temp: 20.45°C, RH: 36.21%
2025-03-06 13:45:09,388 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:09,388 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:09,389 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:09,429 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:09,430 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:09,531 - shroombox - INFO - Heater set to ON - Temp: 20.45°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:09,545 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:09,546 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=20.0%
2025-03-06 13:45:09,547 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:09,548 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:09,548 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:09,563 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:09,563 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:09,564 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:09,569 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:09,571 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:09,571 - shroombox - INFO - Last modified time: 2025-03-06 13:45:09
2025-03-06 13:45:09,572 - shroombox - INFO - Last checked time: 2025-03-06 13:45:04
2025-03-06 13:45:09,573 - shroombox - INFO - Current time: 2025-03-06 13:45:09
2025-03-06 13:45:09,573 - shroombox - INFO - Config file modified at 2025-03-06 13:45:09.564052, reloading...
2025-03-06 13:45:09,574 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:45:09,575 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:09,576 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:09,577 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:09,578 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:09,579 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:09,580 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:09,580 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:09,581 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:09,582 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:09,583 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:45:09,583 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:09,584 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:09,585 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:09,585 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:09,586 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:09,586 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:09,587 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:09,588 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:09,589 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:09,589 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:09,590 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:11,405 - shroombox.sensor - INFO - Successful measurement at 13:45:11 - CO2: 670.47ppm, Temp: 20.43°C, RH: 36.14%
2025-03-06 13:45:11,455 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:11,456 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:11,457 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:11,458 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:11,459 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:45:11,459 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:11,460 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:11,461 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:11,462 - shroombox - INFO - =======================================================
2025-03-06 13:45:11,462 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:13,928 - shroombox.sensor - INFO - Successful measurement at 13:45:13 - CO2: 670.84ppm, Temp: 20.41°C, RH: 36.1%
2025-03-06 13:45:13,929 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:13,930 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:13,931 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:13,972 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:13,973 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:14,078 - shroombox - INFO - Heater set to ON - Temp: 20.41°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:14,091 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:14,092 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.1%, Setpoint=20.0%
2025-03-06 13:45:14,093 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:14,093 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.1% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:14,094 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:14,107 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:14,108 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:14,109 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:14,114 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:14,116 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:14,117 - shroombox - INFO - Last modified time: 2025-03-06 13:45:14
2025-03-06 13:45:14,118 - shroombox - INFO - Last checked time: 2025-03-06 13:45:09
2025-03-06 13:45:14,118 - shroombox - INFO - Current time: 2025-03-06 13:45:14
2025-03-06 13:45:14,119 - shroombox - INFO - Config file modified at 2025-03-06 13:45:14.112388, reloading...
2025-03-06 13:45:14,120 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:45:14,121 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:14,122 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:14,123 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:14,124 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:14,125 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:14,125 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:14,126 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:14,127 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:14,127 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:14,128 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:45:14,129 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:14,129 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:14,130 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:14,131 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:14,131 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:14,132 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:14,133 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:14,134 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:14,135 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:14,136 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:14,136 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:15,945 - shroombox.sensor - INFO - Successful measurement at 13:45:15 - CO2: 670.96ppm, Temp: 20.41°C, RH: 36.0%
2025-03-06 13:45:15,986 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:15,987 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:15,987 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:15,988 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:15,989 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:45:15,989 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:15,990 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:15,991 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:15,991 - shroombox - INFO - =======================================================
2025-03-06 13:45:15,992 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:18,472 - shroombox.sensor - INFO - Successful measurement at 13:45:18 - CO2: 671.19ppm, Temp: 20.41°C, RH: 35.92%
2025-03-06 13:45:18,473 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:18,474 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:18,474 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:18,524 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:18,526 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:18,625 - shroombox - INFO - Heater set to ON - Temp: 20.41°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:18,648 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:18,650 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=35.9%, Setpoint=20.0%
2025-03-06 13:45:18,652 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:18,655 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 35.9% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:18,657 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:18,670 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:18,671 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:18,673 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:18,678 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:18,680 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:18,681 - shroombox - INFO - Last modified time: 2025-03-06 13:45:18
2025-03-06 13:45:18,682 - shroombox - INFO - Last checked time: 2025-03-06 13:45:14
2025-03-06 13:45:18,683 - shroombox - INFO - Current time: 2025-03-06 13:45:18
2025-03-06 13:45:18,684 - shroombox - INFO - Config file modified at 2025-03-06 13:45:18.676718, reloading...
2025-03-06 13:45:18,685 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:45:18,686 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:18,687 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:18,688 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:18,689 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:18,690 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:18,690 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:18,691 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:18,692 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:18,693 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:18,694 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:45:18,695 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:18,695 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:18,696 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:18,697 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:18,698 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:18,699 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:18,700 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:18,701 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:18,702 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:18,702 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:18,704 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:19,664 - shroombox - INFO - Environment variables loaded:
2025-03-06 13:45:19,664 - shroombox - INFO - INFLUXDB_URL: http://localhost:8086
2025-03-06 13:45:19,665 - shroombox - INFO - INFLUXDB_ORG: supershrooms
2025-03-06 13:45:19,665 - shroombox - INFO - INFLUXDB_BUCKET: test
2025-03-06 13:45:19,665 - shroombox - INFO - ==================================================
2025-03-06 13:45:19,696 - shroombox - INFO - Checking I2C bus before sensor initialization...
2025-03-06 13:45:19,698 - shroombox - WARNING - Could not check I2C bus: [Errno 2] No such file or directory: 'i2cdetect'
2025-03-06 13:45:19,698 - shroombox.sensor - INFO - Initializing SCD30 sensor (attempt 1/3)...
2025-03-06 13:45:19,705 - shroombox.sensor - INFO - Set measurement interval to 5 seconds
2025-03-06 13:45:19,712 - shroombox.sensor - INFO - Started periodic measurement
2025-03-06 13:45:19,712 - shroombox.sensor - INFO - Waiting for first measurement (up to 10 seconds)...
2025-03-06 13:45:20,492 - shroombox.sensor - INFO - Successful measurement at 13:45:20 - CO2: 671.61ppm, Temp: 20.41°C, RH: 35.92%
2025-03-06 13:45:20,536 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:20,537 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:20,538 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:20,538 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:20,539 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:45:20,540 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:20,541 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:20,541 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:20,542 - shroombox - INFO - =======================================================
2025-03-06 13:45:20,543 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:22,757 - shroombox.sensor - INFO - First measurement is ready
2025-03-06 13:45:22,764 - shroombox - INFO - Current working directory: /home/danny/Github/shroombox/shroombox3
2025-03-06 13:45:22,764 - shroombox - INFO - Looking for config at: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:22,764 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:22,765 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:22,765 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:22,765 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:22,766 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:22,766 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:22,766 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:22,766 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:22,767 - shroombox - INFO - Config last modified: 2025-03-06 13:45:18.676718
2025-03-06 13:45:22,767 - shroombox.sensor - INFO - Initializing SCD30 sensor (attempt 1/3)...
2025-03-06 13:45:22,782 - shroombox.sensor - INFO - Set measurement interval to 2 seconds
2025-03-06 13:45:22,788 - shroombox.sensor - INFO - Started periodic measurement
2025-03-06 13:45:22,789 - shroombox.sensor - INFO - Waiting for first measurement (up to 4 seconds)...
2025-03-06 13:45:22,795 - shroombox.sensor - INFO - First measurement is ready
2025-03-06 13:45:22,795 - shroombox - INFO - Loaded device assignments - Heater: 192.168.8.164, Humidifier: 192.168.8.181
2025-03-06 13:45:22,796 - shroombox - INFO - 
Initializing PIDs:
2025-03-06 13:45:22,796 - shroombox - INFO - Phase: colonisation
2025-03-06 13:45:22,796 - shroombox - INFO - RH Setpoint: 20.0
2025-03-06 13:45:22,796 - shroombox - INFO - CO2 Setpoint: 500
2025-03-06 13:45:22,797 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:22,797 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:22,797 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:22,797 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:22,797 - shroombox - INFO - Updating humidity PID tunings: (0.2, 0.01, 0.05) -> (0.2, 0.01, 0.0)
2025-03-06 13:45:22,798 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:22,798 - shroombox - INFO - 
=== Initializing InfluxDB Client ===
2025-03-06 13:45:22,798 - shroombox - INFO - URL: http://localhost:8086
2025-03-06 13:45:22,798 - shroombox - INFO - Organization: supershrooms
2025-03-06 13:45:22,799 - shroombox - INFO - Bucket: test
2025-03-06 13:45:22,821 - shroombox - INFO - ✓ InfluxDB connection test successful
2025-03-06 13:45:22,821 - shroombox - INFO - Controller initialized successfully
2025-03-06 13:45:23,017 - shroombox.sensor - INFO - Successful measurement at 13:45:23 - CO2: 671.62ppm, Temp: 20.38°C, RH: 36.0%
2025-03-06 13:45:23,018 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:23,019 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:23,019 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:23,063 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:23,063 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:23,163 - shroombox - INFO - Heater set to ON - Temp: 20.38°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:23,179 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:23,180 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.0%, Setpoint=20.0%
2025-03-06 13:45:23,181 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:23,182 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.0% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:23,182 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:23,199 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:23,201 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:23,202 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:23,207 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:23,209 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:23,209 - shroombox - INFO - Last modified time: 2025-03-06 13:45:23
2025-03-06 13:45:23,210 - shroombox - INFO - Last checked time: 2025-03-06 13:45:18
2025-03-06 13:45:23,211 - shroombox - INFO - Current time: 2025-03-06 13:45:23
2025-03-06 13:45:23,211 - shroombox - INFO - Config file modified at 2025-03-06 13:45:23.205036, reloading...
2025-03-06 13:45:23,212 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:45:23,213 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:23,214 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:23,214 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:23,215 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:23,216 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:23,217 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:23,217 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:23,218 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:23,218 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:23,219 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:45:23,220 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:23,221 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:23,221 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:23,222 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:23,223 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:23,223 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:23,224 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:23,225 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:23,225 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:23,226 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:23,227 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:27,460 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:27,460 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:45:27,461 - shroombox - INFO - Live measurements - Temp: 20.5°C, RH: 32.5%, CO2: 575.0ppm
2025-03-06 13:45:27,463 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:27,464 - shroombox - INFO - Using fallback measurements for testing
2025-03-06 13:45:27,464 - shroombox - INFO - Live measurements - Temp: 20.5°C, RH: 32.5%, CO2: 575.0ppm
2025-03-06 13:45:28,600 - shroombox.sensor - INFO - Successful measurement at 13:45:28 - CO2: 668.8ppm, Temp: 20.43°C, RH: 36.0%
2025-03-06 13:45:28,652 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:28,654 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:28,655 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:28,656 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:28,657 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:45:28,658 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:28,660 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:28,661 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:28,663 - shroombox - INFO - =======================================================
2025-03-06 13:45:28,664 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:29,263 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:29,264 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:29,266 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:29,268 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:29,269 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:29,317 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:29,318 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:29,438 - shroombox - INFO - Heater set to ON - Temp: 20.43°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:29,458 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:29,460 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.0%, Setpoint=20.0%
2025-03-06 13:45:29,462 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:29,464 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.0% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:29,466 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:29,486 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:29,488 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:29,489 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:29,498 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:29,500 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:29,501 - shroombox - INFO - Last modified time: 2025-03-06 13:45:29
2025-03-06 13:45:29,503 - shroombox - INFO - Last checked time: 2025-03-06 13:45:23
2025-03-06 13:45:29,504 - shroombox - INFO - Current time: 2025-03-06 13:45:29
2025-03-06 13:45:29,505 - shroombox - INFO - Config file modified at 2025-03-06 13:45:29.497467, reloading...
2025-03-06 13:45:29,506 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "name": "Humidifier",
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": false,
            "role": "humidifier"
        },
        {
            "name": "Heatmat",
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "type": "SMART.TAPOPLUG",
            "state": true,
   ...
2025-03-06 13:45:29,508 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:29,509 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:29,510 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:29,514 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:29,515 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:29,518 - shroombox - INFO -   Temperature setpoint: 22.0°C
2025-03-06 13:45:29,519 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:29,520 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:29,521 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:29,522 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 22.0
2025-03-06 13:45:29,523 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:29,525 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:29,525 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:29,526 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:29,527 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:29,527 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:29,528 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:29,529 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:29,530 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:29,531 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:29,532 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:30,616 - shroombox.sensor - INFO - Successful measurement at 13:45:30 - CO2: 669.25ppm, Temp: 20.43°C, RH: 36.1%
2025-03-06 13:45:30,661 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:30,662 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:30,662 - shroombox - INFO - Temperature setpoint: 22.0°C
2025-03-06 13:45:30,663 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:30,664 - shroombox - INFO - Heat-on threshold: 21.5°C
2025-03-06 13:45:30,664 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:30,665 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:30,666 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:30,666 - shroombox - INFO - =======================================================
2025-03-06 13:45:30,667 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:32,249 - shroombox - INFO - Received settings update request with data: {
  "available_devices": [
    {
      "ip": "192.168.8.181",
      "mac": "B0-19-21-C4-C9-9D",
      "model": "P115",
      "name": "Humidifier",
      "role": "humidifier",
      "state": false,
      "type": "SMART.TAPOPLUG"
    },
    {
      "ip": "192.168.8.164",
      "mac": "B0-19-21-C4-CE-97",
      "model": "P115",
      "name": "Heatmat",
      "role": "heater",
      "state": true,
      "type": "SMART.TAPOPLUG"
    }
  ],
  "co2": {
    "pid": {
      "Kd": 0,
      "Ki": -0.01,
      "Kp": -1
    }
  },
  "environment": {
    "current_phase": "colonisation",
    "phases": {
      "cake": {
        "co2_setpoint": 500,
        "rh_setpoint": 0,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      },
      "colonisation": {
        "co2_setpoint": 500,
        "rh_setpoint": 20,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 25
      },
      "growing": {
        "co2_setpoint": 550,
        "rh_setpoint": 85,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      }
    }
  },
  "humidifier": {
    "break_time": 180,
    "burst_interval": 60,
    "burst_max": 30,
    "burst_min": 2,
    "pid": {
      "Kd": 0,
      "Ki": 0.01,
      "Kp": 0.2
    },
    "rh_hysteresis": 2
  },
  "logging": {
    "enabled": true,
    "interval": 30
  },
  "sensor": {
    "measurement_interval": 2
  }
}
2025-03-06 13:45:32,249 - shroombox - INFO - Settings file path: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:32,250 - shroombox - INFO - Successfully loaded current settings from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:32,250 - shroombox - INFO - Current phase: colonisation
2025-03-06 13:45:32,251 - shroombox - INFO - Old settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 20.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 22.0
}
2025-03-06 13:45:32,251 - shroombox - INFO - New settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 20.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 25.0
}
2025-03-06 13:45:32,251 - shroombox - INFO - Changing temp_setpoint from 22.0 to 25.0 for colonisation phase
2025-03-06 13:45:32,251 - shroombox - INFO - No change for rh_setpoint: remains 20.0
2025-03-06 13:45:32,252 - shroombox - INFO - No change for co2_setpoint: remains 500
2025-03-06 13:45:32,259 - shroombox - INFO - Successfully wrote and verified settings to /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:32,259 - shroombox - INFO - Settings updated successfully for colonisation phase
2025-03-06 13:45:32,260 - shroombox - INFO - Reset controller config_last_modified to 0
2025-03-06 13:45:32,260 - shroombox - INFO - Created task to check config updates
2025-03-06 13:45:32,260 - shroombox - INFO - Running heater diagnostic to apply new settings
2025-03-06 13:45:32,262 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:32,262 - shroombox - INFO - Last modified time: 2025-03-06 13:45:32
2025-03-06 13:45:32,262 - shroombox - INFO - Last checked time: Never
2025-03-06 13:45:32,262 - shroombox - INFO - Current time: 2025-03-06 13:45:32
2025-03-06 13:45:32,263 - shroombox - INFO - Config file modified at 2025-03-06 13:45:32.245650, reloading...
2025-03-06 13:45:32,263 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": true,
           ...
2025-03-06 13:45:32,263 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:32,264 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:32,264 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:32,264 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:32,264 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:32,265 - shroombox - INFO -   Temperature setpoint: 25.0°C
2025-03-06 13:45:32,265 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:32,265 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:32,265 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:32,266 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 25.0
2025-03-06 13:45:32,266 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:32,266 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:32,266 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:32,267 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:32,267 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:32,267 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:32,267 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:32,267 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:32,268 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:32,268 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:32,268 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:32,795 - shroombox.sensor - INFO - Successful measurement at 13:45:32 - CO2: 669.3ppm, Temp: 20.43°C, RH: 36.16%
2025-03-06 13:45:32,852 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:32,852 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:32,852 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:32,853 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:32,853 - shroombox - INFO - Heat-on threshold: 24.5°C
2025-03-06 13:45:32,853 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:32,853 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:32,854 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:32,854 - shroombox - INFO - =======================================================
2025-03-06 13:45:32,854 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:35,171 - shroombox.sensor - INFO - Successful measurement at 13:45:35 - CO2: 669.57ppm, Temp: 20.43°C, RH: 36.21%
2025-03-06 13:45:35,172 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=22.0°C, Hysteresis=0.5°C
2025-03-06 13:45:35,173 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=21.5°C, Current heater state=ON
2025-03-06 13:45:35,173 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 21.5)
2025-03-06 13:45:35,226 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:35,227 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:35,335 - shroombox - INFO - Heater set to ON - Temp: 20.43°C (Target: 22.0°C ±0.5°C)
2025-03-06 13:45:35,358 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:35,359 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=20.0%
2025-03-06 13:45:35,360 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:35,361 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:35,361 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:35,374 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:35,376 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:35,378 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:35,385 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:35,388 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:35,389 - shroombox - INFO - Last modified time: 2025-03-06 13:45:35
2025-03-06 13:45:35,391 - shroombox - INFO - Last checked time: 2025-03-06 13:45:29
2025-03-06 13:45:35,392 - shroombox - INFO - Current time: 2025-03-06 13:45:35
2025-03-06 13:45:35,394 - shroombox - INFO - Config file modified at 2025-03-06 13:45:35.377856, reloading...
2025-03-06 13:45:35,395 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": true,
           ...
2025-03-06 13:45:35,397 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:35,399 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:35,400 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:35,402 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:35,404 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:35,405 - shroombox - INFO -   Temperature setpoint: 25.0°C
2025-03-06 13:45:35,406 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:35,407 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:35,408 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:35,410 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 22.0 -> 25.0
2025-03-06 13:45:35,411 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:35,412 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:35,414 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:35,415 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:35,416 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:35,417 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:35,418 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:35,420 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:35,421 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:35,422 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:35,424 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:36,340 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:36,340 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:36,384 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:36,385 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:36,385 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:36,386 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:36,386 - shroombox - INFO - Heat-on threshold: 24.5°C
2025-03-06 13:45:36,387 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:36,387 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:36,387 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:36,388 - shroombox - INFO - =======================================================
2025-03-06 13:45:36,388 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:37,322 - shroombox.sensor - INFO - Successful measurement at 13:45:37 - CO2: 670.35ppm, Temp: 20.43°C, RH: 36.26%
2025-03-06 13:45:37,322 - shroombox - INFO - Live measurements - Temp: 20.43°C, RH: 36.26%, CO2: 670.35ppm
2025-03-06 13:45:38,839 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:38,839 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:38,840 - shroombox - INFO - Live measurements - Temp: 20.43°C, RH: 36.26%, CO2: 670.35ppm
2025-03-06 13:45:39,731 - shroombox.sensor - INFO - Successful measurement at 13:45:39 - CO2: 671.44ppm, Temp: 20.41°C, RH: 36.29%
2025-03-06 13:45:39,782 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:39,785 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:39,786 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:39,787 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:39,788 - shroombox - INFO - Heat-on threshold: 24.5°C
2025-03-06 13:45:39,790 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:39,792 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:39,794 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:39,796 - shroombox - INFO - =======================================================
2025-03-06 13:45:39,797 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:41,478 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:41,479 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:41,481 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=25.0°C, Hysteresis=0.5°C
2025-03-06 13:45:41,482 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=24.5°C, Current heater state=ON
2025-03-06 13:45:41,483 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:41,541 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:41,542 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:41,645 - shroombox - INFO - Heater set to ON - Temp: 20.41°C (Target: 25.0°C ±0.5°C)
2025-03-06 13:45:41,670 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:41,674 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=20.0%
2025-03-06 13:45:41,675 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:41,677 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:41,679 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:41,695 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:41,696 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:41,698 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:41,706 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:41,708 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:41,709 - shroombox - INFO - Last modified time: 2025-03-06 13:45:41
2025-03-06 13:45:41,711 - shroombox - INFO - Last checked time: 2025-03-06 13:45:35
2025-03-06 13:45:41,712 - shroombox - INFO - Current time: 2025-03-06 13:45:41
2025-03-06 13:45:41,713 - shroombox - INFO - Config file modified at 2025-03-06 13:45:41.702260, reloading...
2025-03-06 13:45:41,715 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": true,
           ...
2025-03-06 13:45:41,717 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:41,718 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:41,720 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:41,723 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:41,725 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:41,727 - shroombox - INFO -   Temperature setpoint: 25.0°C
2025-03-06 13:45:41,728 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:41,730 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:41,731 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:41,733 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 25.0 -> 25.0
2025-03-06 13:45:41,735 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:41,736 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:41,737 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:41,739 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:41,741 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:41,742 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:41,743 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:41,744 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:41,745 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:41,747 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:41,749 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:41,875 - shroombox.sensor - INFO - Successful measurement at 13:45:41 - CO2: 671.76ppm, Temp: 20.42°C, RH: 36.34%
2025-03-06 13:45:41,876 - shroombox - INFO - Live measurements - Temp: 20.42°C, RH: 36.34%, CO2: 671.76ppm
2025-03-06 13:45:43,394 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:43,395 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:43,395 - shroombox - INFO - Live measurements - Temp: 20.42°C, RH: 36.34%, CO2: 671.76ppm
2025-03-06 13:45:44,326 - shroombox.sensor - INFO - Successful measurement at 13:45:44 - CO2: 673.07ppm, Temp: 20.41°C, RH: 36.34%
2025-03-06 13:45:44,369 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:44,370 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:44,370 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:44,371 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:44,372 - shroombox - INFO - Heat-on threshold: 24.5°C
2025-03-06 13:45:44,372 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:44,373 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:44,374 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:44,374 - shroombox - INFO - =======================================================
2025-03-06 13:45:44,375 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:46,426 - shroombox.sensor - INFO - Successful measurement at 13:45:46 - CO2: 674.47ppm, Temp: 20.4°C, RH: 36.37%
2025-03-06 13:45:46,427 - shroombox - INFO - Live measurements - Temp: 20.4°C, RH: 36.37%, CO2: 674.47ppm
2025-03-06 13:45:47,820 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:47,821 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:47,823 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=25.0°C, Hysteresis=0.5°C
2025-03-06 13:45:47,824 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=24.5°C, Current heater state=ON
2025-03-06 13:45:47,825 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:47,876 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:47,877 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:47,944 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:47,945 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:47,945 - shroombox - INFO - Live measurements - Temp: 20.4°C, RH: 36.37%, CO2: 674.47ppm
2025-03-06 13:45:47,978 - shroombox - INFO - Heater set to ON - Temp: 20.41°C (Target: 25.0°C ±0.5°C)
2025-03-06 13:45:47,995 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:47,996 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=20.0%
2025-03-06 13:45:47,997 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:47,998 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:47,999 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:48,020 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:48,021 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:48,022 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:48,029 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:48,031 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:48,032 - shroombox - INFO - Last modified time: 2025-03-06 13:45:48
2025-03-06 13:45:48,033 - shroombox - INFO - Last checked time: 2025-03-06 13:45:41
2025-03-06 13:45:48,034 - shroombox - INFO - Current time: 2025-03-06 13:45:48
2025-03-06 13:45:48,035 - shroombox - INFO - Config file modified at 2025-03-06 13:45:48.022650, reloading...
2025-03-06 13:45:48,036 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": true,
           ...
2025-03-06 13:45:48,038 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:48,039 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:48,040 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:48,041 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:48,042 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:48,043 - shroombox - INFO -   Temperature setpoint: 25.0°C
2025-03-06 13:45:48,044 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:48,044 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:48,045 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:48,046 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 25.0 -> 25.0
2025-03-06 13:45:48,047 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:48,047 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:48,048 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:48,049 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:48,049 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:48,050 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:48,051 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:48,052 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:48,052 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:48,053 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:48,054 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:48,948 - shroombox.sensor - INFO - Successful measurement at 13:45:48 - CO2: 674.21ppm, Temp: 20.4°C, RH: 36.34%
2025-03-06 13:45:48,949 - shroombox - INFO - Live measurements - Temp: 20.4°C, RH: 36.34%, CO2: 674.21ppm
2025-03-06 13:45:50,986 - shroombox.sensor - INFO - Successful measurement at 13:45:50 - CO2: 674.78ppm, Temp: 20.43°C, RH: 36.39%
2025-03-06 13:45:50,987 - shroombox - INFO - Live measurements - Temp: 20.43°C, RH: 36.39%, CO2: 674.78ppm
2025-03-06 13:45:52,135 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:52,182 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:52,183 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:52,184 - shroombox - INFO - Temperature setpoint: 25.0°C
2025-03-06 13:45:52,184 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:52,185 - shroombox - INFO - Heat-on threshold: 24.5°C
2025-03-06 13:45:52,185 - shroombox - INFO - Criteria met for heating? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:52,186 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:52,187 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:52,187 - shroombox - INFO - =======================================================
2025-03-06 13:45:52,188 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:45:53,558 - shroombox.sensor - INFO - Successful measurement at 13:45:53 - CO2: 676.12ppm, Temp: 20.43°C, RH: 36.34%
2025-03-06 13:45:53,559 - shroombox - INFO - Live measurements - Temp: 20.43°C, RH: 36.34%, CO2: 676.12ppm
2025-03-06 13:45:54,111 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:54,113 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=25.0°C, Hysteresis=0.5°C
2025-03-06 13:45:54,115 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=24.5°C, Current heater state=ON
2025-03-06 13:45:54,116 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? True (temp < threshold? 20.4 < 24.5)
2025-03-06 13:45:54,119 - shroombox - INFO - Received settings update request with data: {
  "available_devices": [
    {
      "ip": "192.168.8.181",
      "mac": "B0-19-21-C4-C9-9D",
      "model": "P115",
      "name": "Humidifier",
      "role": "humidifier",
      "state": false,
      "type": "SMART.TAPOPLUG"
    },
    {
      "ip": "192.168.8.164",
      "mac": "B0-19-21-C4-CE-97",
      "model": "P115",
      "name": "Heatmat",
      "role": "heater",
      "state": true,
      "type": "SMART.TAPOPLUG"
    }
  ],
  "co2": {
    "pid": {
      "Kd": 0,
      "Ki": -0.01,
      "Kp": -1
    }
  },
  "environment": {
    "current_phase": "colonisation",
    "phases": {
      "cake": {
        "co2_setpoint": 500,
        "rh_setpoint": 0,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      },
      "colonisation": {
        "co2_setpoint": 500,
        "rh_setpoint": 20,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 10
      },
      "growing": {
        "co2_setpoint": 550,
        "rh_setpoint": 85,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      }
    }
  },
  "humidifier": {
    "break_time": 180,
    "burst_interval": 60,
    "burst_max": 30,
    "burst_min": 2,
    "pid": {
      "Kd": 0,
      "Ki": 0.01,
      "Kp": 0.2
    },
    "rh_hysteresis": 2
  },
  "logging": {
    "enabled": true,
    "interval": 30
  },
  "sensor": {
    "measurement_interval": 2
  }
}
2025-03-06 13:45:54,120 - shroombox - INFO - Settings file path: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,120 - shroombox - INFO - Successfully loaded current settings from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,121 - shroombox - INFO - Current phase: colonisation
2025-03-06 13:45:54,121 - shroombox - INFO - Old settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 20.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 25.0
}
2025-03-06 13:45:54,122 - shroombox - INFO - New settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 20.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 10.0
}
2025-03-06 13:45:54,123 - shroombox - INFO - Changing temp_setpoint from 25.0 to 10.0 for colonisation phase
2025-03-06 13:45:54,123 - shroombox - INFO - No change for rh_setpoint: remains 20.0
2025-03-06 13:45:54,124 - shroombox - INFO - No change for co2_setpoint: remains 500
2025-03-06 13:45:54,134 - shroombox - INFO - Successfully wrote and verified settings to /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,134 - shroombox - INFO - Settings updated successfully for colonisation phase
2025-03-06 13:45:54,135 - shroombox - INFO - Reset controller config_last_modified to 0
2025-03-06 13:45:54,135 - shroombox - INFO - Created task to check config updates
2025-03-06 13:45:54,135 - shroombox - INFO - Running heater diagnostic to apply new settings
2025-03-06 13:45:54,137 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,138 - shroombox - INFO - Last modified time: 2025-03-06 13:45:54
2025-03-06 13:45:54,138 - shroombox - INFO - Last checked time: Never
2025-03-06 13:45:54,139 - shroombox - INFO - Current time: 2025-03-06 13:45:54
2025-03-06 13:45:54,139 - shroombox - INFO - Config file modified at 2025-03-06 13:45:54.123014, reloading...
2025-03-06 13:45:54,140 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": true,
           ...
2025-03-06 13:45:54,140 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,141 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:54,141 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:54,142 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,142 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:54,142 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:45:54,143 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:54,143 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:54,143 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:54,144 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 25.0 -> 10.0
2025-03-06 13:45:54,144 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:54,144 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:54,145 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:54,145 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:54,145 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:54,146 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:54,146 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:45:54,147 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:54,147 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:54,147 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:54,148 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:54,165 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to ON based on temperature logic
2025-03-06 13:45:54,166 - shroombox - INFO - Setting heater to ON
2025-03-06 13:45:54,271 - shroombox - INFO - Heater set to ON - Temp: 20.41°C (Target: 25.0°C ±0.5°C)
2025-03-06 13:45:54,292 - shroombox - INFO - ✓ Logged heater state: ON
2025-03-06 13:45:54,294 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=20.0%
2025-03-06 13:45:54,295 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:45:54,296 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.3% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:45:54,298 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:45:54,319 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:45:54,320 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:45:54,322 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:45:54,331 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:45:54,333 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,334 - shroombox - INFO - Last modified time: 2025-03-06 13:45:54
2025-03-06 13:45:54,335 - shroombox - INFO - Last checked time: 2025-03-06 13:45:48
2025-03-06 13:45:54,336 - shroombox - INFO - Current time: 2025-03-06 13:45:54
2025-03-06 13:45:54,338 - shroombox - INFO - Config file modified at 2025-03-06 13:45:54.327026, reloading...
2025-03-06 13:45:54,339 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": true,
           ...
2025-03-06 13:45:54,340 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,342 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:45:54,343 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:45:54,344 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:45:54,346 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:45:54,347 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:45:54,348 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:45:54,349 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:45:54,350 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:45:54,350 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 25.0 -> 10.0
2025-03-06 13:45:54,351 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:45:54,352 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:45:54,353 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> True
2025-03-06 13:45:54,353 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:45:54,354 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:45:54,354 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:45:54,355 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:45:54,356 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:45:54,356 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:45:54,357 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:45:54,358 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:45:55,603 - shroombox.sensor - INFO - Successful measurement at 13:45:55 - CO2: 676.62ppm, Temp: 20.4°C, RH: 36.37%
2025-03-06 13:45:55,603 - shroombox - INFO - Live measurements - Temp: 20.4°C, RH: 36.37%, CO2: 676.62ppm
2025-03-06 13:45:57,946 - shroombox.sensor - INFO - Successful measurement at 13:45:57 - CO2: 677.12ppm, Temp: 20.42°C, RH: 36.35%
2025-03-06 13:45:57,989 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:57,990 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:57,991 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:45:57,991 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:57,992 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:45:57,993 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:45:57,993 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:57,994 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:57,995 - shroombox - INFO - =======================================================
2025-03-06 13:45:57,995 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:45:57,996 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:45:57,997 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:45:58,057 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:45:58,057 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:45:58,098 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: ON
2025-03-06 13:45:59,602 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:59,603 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:45:59,604 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:45:59,663 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:59,664 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:59,664 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:45:59,665 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:59,666 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:45:59,667 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:45:59,667 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:59,667 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:59,668 - shroombox - INFO - =======================================================
2025-03-06 13:45:59,668 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:45:59,669 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:45:59,669 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:45:59,697 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:45:59,698 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:45:59,698 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:45:59,698 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:45:59,699 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:45:59,699 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:45:59,700 - shroombox - INFO - Current heater state according to Tapo: ON
2025-03-06 13:45:59,700 - shroombox - INFO - Local tracking of heater state: ON
2025-03-06 13:45:59,700 - shroombox - INFO - =======================================================
2025-03-06 13:45:59,700 - shroombox - WARNING - HEATER DIAGNOSTIC: Detected state mismatch! Tapo shows ON but should be OFF
2025-03-06 13:45:59,701 - shroombox - INFO - HEATER DIAGNOSTIC: Fixing state mismatch by setting heater to OFF
2025-03-06 13:45:59,701 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:45:59,888 - shroombox - INFO - Successfully set heater to OFF
2025-03-06 13:45:59,927 - shroombox.device - ERROR - Error setting device state: Other(Decryption error: UnpadError)
2025-03-06 13:45:59,927 - shroombox - ERROR - Failed to set heater to OFF
2025-03-06 13:46:00,157 - shroombox.sensor - INFO - Successful measurement at 13:46:00 - CO2: 677.88ppm, Temp: 20.39°C, RH: 36.39%
2025-03-06 13:46:00,157 - shroombox - INFO - Live measurements - Temp: 20.39°C, RH: 36.39%, CO2: 677.88ppm
2025-03-06 13:46:00,411 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:00,412 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:00,413 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:00,415 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=ON
2025-03-06 13:46:00,415 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:00,446 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: OFF
2025-03-06 13:46:00,456 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state after fix: OFF
2025-03-06 13:46:00,933 - shroombox - WARNING - TEMP CONTROL DEBUG: Tracked state (True) differs from actual device state (False)
2025-03-06 13:46:00,933 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:00,934 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:01,038 - shroombox - INFO - Heater set to OFF - Temp: 20.42°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:01,054 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:01,055 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.4%, Setpoint=20.0%
2025-03-06 13:46:01,055 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:46:01,056 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:46:01,056 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:46:01,075 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:46:01,076 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:46:01,077 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:46:01,081 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:46:01,083 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:01,084 - shroombox - INFO - Last modified time: 2025-03-06 13:46:01
2025-03-06 13:46:01,084 - shroombox - INFO - Last checked time: 2025-03-06 13:45:54
2025-03-06 13:46:01,085 - shroombox - INFO - Current time: 2025-03-06 13:46:01
2025-03-06 13:46:01,086 - shroombox - INFO - Config file modified at 2025-03-06 13:46:01.075413, reloading...
2025-03-06 13:46:01,087 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
          ...
2025-03-06 13:46:01,088 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:01,089 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:01,089 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:01,090 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:01,091 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:01,092 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:01,092 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:46:01,093 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:01,094 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:01,095 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:01,095 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:01,096 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:46:01,097 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> False
2025-03-06 13:46:01,097 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:01,098 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:01,099 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:01,099 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:01,100 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:46:01,101 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:01,102 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:01,103 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:02,181 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:02,182 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:02,182 - shroombox - INFO - Live measurements - Temp: 20.39°C, RH: 36.39%, CO2: 677.88ppm
2025-03-06 13:46:02,662 - shroombox.sensor - INFO - Successful measurement at 13:46:02 - CO2: 678.35ppm, Temp: 20.42°C, RH: 36.4%
2025-03-06 13:46:02,704 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:02,705 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:02,706 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:02,706 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:02,707 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:02,708 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:02,708 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:02,709 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:02,710 - shroombox - INFO - =======================================================
2025-03-06 13:46:02,711 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:04,679 - shroombox.sensor - INFO - Successful measurement at 13:46:04 - CO2: 680.41ppm, Temp: 20.35°C, RH: 36.48%
2025-03-06 13:46:04,680 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:04,681 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:04,682 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:04,735 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:04,736 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:04,831 - shroombox - INFO - Heater set to OFF - Temp: 20.35°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:04,848 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:04,850 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.5%, Setpoint=20.0%
2025-03-06 13:46:04,851 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:46:04,851 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:46:04,852 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:46:04,872 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:46:04,874 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:46:04,875 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:46:04,881 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:46:04,883 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:04,884 - shroombox - INFO - Last modified time: 2025-03-06 13:46:04
2025-03-06 13:46:04,885 - shroombox - INFO - Last checked time: 2025-03-06 13:46:01
2025-03-06 13:46:04,885 - shroombox - INFO - Current time: 2025-03-06 13:46:04
2025-03-06 13:46:04,886 - shroombox - INFO - Config file modified at 2025-03-06 13:46:04.875625, reloading...
2025-03-06 13:46:04,887 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
          ...
2025-03-06 13:46:04,888 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:04,889 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:04,889 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:04,891 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:04,891 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:04,892 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:04,893 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:46:04,894 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:04,894 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:04,895 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:04,896 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:04,897 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:46:04,898 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:04,898 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:04,899 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:04,899 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:04,900 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:04,901 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:46:04,902 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:04,902 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:04,903 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:06,909 - shroombox.sensor - INFO - Successful measurement at 13:46:06 - CO2: 681.57ppm, Temp: 20.37°C, RH: 36.42%
2025-03-06 13:46:06,910 - shroombox - INFO - Live measurements - Temp: 20.37°C, RH: 36.42%, CO2: 681.57ppm
2025-03-06 13:46:07,412 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:07,412 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:07,413 - shroombox - INFO - Live measurements - Temp: 20.37°C, RH: 36.42%, CO2: 681.57ppm
2025-03-06 13:46:09,235 - shroombox.sensor - INFO - Successful measurement at 13:46:09 - CO2: 683.28ppm, Temp: 20.36°C, RH: 36.48%
2025-03-06 13:46:09,282 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:09,283 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:09,283 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:09,284 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:09,284 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:09,285 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:09,286 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:09,287 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:09,287 - shroombox - INFO - =======================================================
2025-03-06 13:46:09,288 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:10,947 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:10,948 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:10,949 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:10,949 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:10,950 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:10,998 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:10,999 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:11,104 - shroombox - INFO - Heater set to OFF - Temp: 20.36°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:11,120 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:11,121 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.5%, Setpoint=20.0%
2025-03-06 13:46:11,123 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:46:11,124 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.5% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:46:11,125 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:46:11,145 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:46:11,146 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:46:11,148 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:46:11,154 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:46:11,156 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,157 - shroombox - INFO - Last modified time: 2025-03-06 13:46:11
2025-03-06 13:46:11,158 - shroombox - INFO - Last checked time: 2025-03-06 13:46:04
2025-03-06 13:46:11,160 - shroombox - INFO - Current time: 2025-03-06 13:46:11
2025-03-06 13:46:11,161 - shroombox - INFO - Config file modified at 2025-03-06 13:46:11.151964, reloading...
2025-03-06 13:46:11,162 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
          ...
2025-03-06 13:46:11,164 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,165 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:11,166 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:11,168 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,169 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:11,170 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:11,171 - shroombox - INFO -   Humidity setpoint: 20.0%
2025-03-06 13:46:11,172 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:11,173 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:11,174 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:11,175 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:11,176 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 20.0
2025-03-06 13:46:11,177 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:11,178 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:11,180 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:11,181 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:11,182 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:11,183 - shroombox - INFO - Humidity setpoint: 20.0%
2025-03-06 13:46:11,184 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:11,185 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:11,186 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:11,462 - shroombox.sensor - INFO - Successful measurement at 13:46:11 - CO2: 683.1ppm, Temp: 20.36°C, RH: 36.43%
2025-03-06 13:46:11,463 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.43%, CO2: 683.1ppm
2025-03-06 13:46:11,941 - shroombox - INFO - Received settings update request with data: {
  "available_devices": [
    {
      "ip": "192.168.8.181",
      "mac": "B0-19-21-C4-C9-9D",
      "model": "P115",
      "name": "Humidifier",
      "role": "humidifier",
      "state": false,
      "type": "SMART.TAPOPLUG"
    },
    {
      "ip": "192.168.8.164",
      "mac": "B0-19-21-C4-CE-97",
      "model": "P115",
      "name": "Heatmat",
      "role": "heater",
      "state": false,
      "type": "SMART.TAPOPLUG"
    }
  ],
  "co2": {
    "pid": {
      "Kd": 0,
      "Ki": -0.01,
      "Kp": -1
    }
  },
  "environment": {
    "current_phase": "colonisation",
    "phases": {
      "cake": {
        "co2_setpoint": 500,
        "rh_setpoint": 0,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      },
      "colonisation": {
        "co2_setpoint": 500,
        "rh_setpoint": 50,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 10
      },
      "growing": {
        "co2_setpoint": 550,
        "rh_setpoint": 85,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      }
    }
  },
  "humidifier": {
    "break_time": 180,
    "burst_interval": 60,
    "burst_max": 30,
    "burst_min": 2,
    "pid": {
      "Kd": 0,
      "Ki": 0.01,
      "Kp": 0.2
    },
    "rh_hysteresis": 2
  },
  "logging": {
    "enabled": true,
    "interval": 30
  },
  "sensor": {
    "measurement_interval": 2
  }
}
2025-03-06 13:46:11,942 - shroombox - INFO - Settings file path: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,942 - shroombox - INFO - Successfully loaded current settings from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,943 - shroombox - INFO - Current phase: colonisation
2025-03-06 13:46:11,943 - shroombox - INFO - Old settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 20.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 10.0
}
2025-03-06 13:46:11,944 - shroombox - INFO - New settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 50.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 10.0
}
2025-03-06 13:46:11,945 - shroombox - INFO - No change for temp_setpoint: remains 10.0
2025-03-06 13:46:11,945 - shroombox - INFO - Changing rh_setpoint from 20.0 to 50.0 for colonisation phase
2025-03-06 13:46:11,946 - shroombox - INFO - No change for co2_setpoint: remains 500
2025-03-06 13:46:11,954 - shroombox - INFO - Successfully wrote and verified settings to /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,955 - shroombox - INFO - Settings updated successfully for colonisation phase
2025-03-06 13:46:11,955 - shroombox - INFO - Reset controller config_last_modified to 0
2025-03-06 13:46:11,956 - shroombox - INFO - Created task to check config updates
2025-03-06 13:46:11,956 - shroombox - INFO - Running heater diagnostic to apply new settings
2025-03-06 13:46:11,958 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,959 - shroombox - INFO - Last modified time: 2025-03-06 13:46:11
2025-03-06 13:46:11,959 - shroombox - INFO - Last checked time: Never
2025-03-06 13:46:11,959 - shroombox - INFO - Current time: 2025-03-06 13:46:11
2025-03-06 13:46:11,960 - shroombox - INFO - Config file modified at 2025-03-06 13:46:11.944006, reloading...
2025-03-06 13:46:11,960 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
          ...
2025-03-06 13:46:11,961 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,961 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:11,961 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:11,962 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:11,962 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:11,963 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:11,963 - shroombox - INFO -   Humidity setpoint: 50.0%
2025-03-06 13:46:11,963 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:11,964 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:11,964 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:11,964 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:11,965 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 50.0
2025-03-06 13:46:11,965 - shroombox - INFO - CONFIG UPDATE: Heater state in config: True -> False
2025-03-06 13:46:11,965 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:11,966 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:11,966 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:11,966 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:11,966 - shroombox - INFO - Humidity setpoint: 50.0%
2025-03-06 13:46:11,967 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:11,967 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:11,967 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:12,997 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:12,998 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:12,998 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.43%, CO2: 683.1ppm
2025-03-06 13:46:13,794 - shroombox.sensor - INFO - Successful measurement at 13:46:13 - CO2: 684.16ppm, Temp: 20.39°C, RH: 36.4%
2025-03-06 13:46:13,840 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:13,840 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:13,841 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:13,842 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:13,842 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:13,843 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:13,844 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:13,844 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:13,845 - shroombox - INFO - =======================================================
2025-03-06 13:46:13,845 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:16,015 - shroombox.sensor - INFO - Successful measurement at 13:46:16 - CO2: 684.77ppm, Temp: 20.37°C, RH: 36.32%
2025-03-06 13:46:16,063 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:16,064 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:16,064 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:16,065 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:16,065 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:16,065 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:16,066 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:16,066 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:16,066 - shroombox - INFO - =======================================================
2025-03-06 13:46:16,067 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:17,255 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:17,256 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:17,257 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:17,258 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:17,259 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:17,304 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:17,304 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:17,408 - shroombox - INFO - Heater set to OFF - Temp: 20.39°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:17,424 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:17,425 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.4%, Setpoint=20.0%
2025-03-06 13:46:17,426 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:46:17,426 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.4% is above setpoint 20.0%, turning humidifier OFF
2025-03-06 13:46:17,427 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:46:17,445 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to OFF
2025-03-06 13:46:17,446 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state OFF
2025-03-06 13:46:17,447 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to OFF
2025-03-06 13:46:17,451 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:46:17,453 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:17,454 - shroombox - INFO - Last modified time: 2025-03-06 13:46:17
2025-03-06 13:46:17,454 - shroombox - INFO - Last checked time: 2025-03-06 13:46:11
2025-03-06 13:46:17,455 - shroombox - INFO - Current time: 2025-03-06 13:46:17
2025-03-06 13:46:17,456 - shroombox - INFO - Config file modified at 2025-03-06 13:46:17.448292, reloading...
2025-03-06 13:46:17,457 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": false,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
          ...
2025-03-06 13:46:17,458 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:17,459 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:17,460 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:17,461 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:17,462 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:17,463 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:17,464 - shroombox - INFO -   Humidity setpoint: 50.0%
2025-03-06 13:46:17,465 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:17,466 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:17,467 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:17,468 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:17,469 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 20.0 -> 50.0
2025-03-06 13:46:17,470 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:17,471 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:17,472 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:17,473 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:17,474 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:17,475 - shroombox - INFO - Humidity setpoint: 50.0%
2025-03-06 13:46:17,476 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:17,477 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:17,481 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:17,531 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:17,531 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:17,532 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:17,532 - shroombox - INFO - Live measurements - Temp: 20.37°C, RH: 36.32%, CO2: 684.77ppm
2025-03-06 13:46:17,539 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:17,540 - shroombox - INFO - Live measurements - Temp: 20.37°C, RH: 36.32%, CO2: 684.77ppm
2025-03-06 13:46:17,578 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:17,579 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:17,579 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:17,579 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:17,580 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:17,580 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:17,580 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:17,580 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:17,581 - shroombox - INFO - =======================================================
2025-03-06 13:46:17,581 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:18,362 - shroombox.sensor - INFO - Successful measurement at 13:46:18 - CO2: 685.68ppm, Temp: 20.37°C, RH: 36.35%
2025-03-06 13:46:18,362 - shroombox - INFO - Live measurements - Temp: 20.37°C, RH: 36.35%, CO2: 685.68ppm
2025-03-06 13:46:20,614 - shroombox.sensor - INFO - Successful measurement at 13:46:20 - CO2: 685.95ppm, Temp: 20.37°C, RH: 36.34%
2025-03-06 13:46:20,670 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:20,671 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:20,676 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:20,677 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:20,678 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:20,679 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:20,680 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:20,682 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:20,686 - shroombox - INFO - =======================================================
2025-03-06 13:46:20,687 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:22,913 - shroombox.sensor - INFO - Successful measurement at 13:46:22 - CO2: 684.78ppm, Temp: 20.36°C, RH: 36.37%
2025-03-06 13:46:22,914 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.37%, CO2: 684.78ppm
2025-03-06 13:46:23,564 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:23,565 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:23,565 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:23,566 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:23,567 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:23,607 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:23,608 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:23,728 - shroombox - INFO - Heater set to OFF - Temp: 20.37°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:23,742 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:23,743 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=50.0%
2025-03-06 13:46:23,744 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=OFF, Bursting=False
2025-03-06 13:46:23,745 - shroombox - INFO - HUMIDITY CONTROL DEBUG: PID calculated burst duration: 16.6s (min=0.5s)
2025-03-06 13:46:23,745 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Starting new burst for 16.6s
2025-03-06 13:46:23,746 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to ON
2025-03-06 13:46:23,881 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully set humidifier to ON
2025-03-06 13:46:23,882 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updating settings.json with state ON
2025-03-06 13:46:23,883 - shroombox - INFO - SET_HUMIDIFIER_STATE: Updated humidifier state in settings from OFF to ON
2025-03-06 13:46:23,888 - shroombox - INFO - SET_HUMIDIFIER_STATE: Successfully wrote updated settings to file
2025-03-06 13:46:23,889 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Humidifier turned ON for burst
2025-03-06 13:46:23,890 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:23,891 - shroombox - INFO - Last modified time: 2025-03-06 13:46:23
2025-03-06 13:46:23,891 - shroombox - INFO - Last checked time: 2025-03-06 13:46:17
2025-03-06 13:46:23,892 - shroombox - INFO - Current time: 2025-03-06 13:46:23
2025-03-06 13:46:23,893 - shroombox - INFO - Config file modified at 2025-03-06 13:46:23.884615, reloading...
2025-03-06 13:46:23,894 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:23,895 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:23,896 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:23,896 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:23,897 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:23,898 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:23,899 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:23,899 - shroombox - INFO -   Humidity setpoint: 50.0%
2025-03-06 13:46:23,900 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:23,901 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:23,901 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:23,902 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:23,903 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 50.0 -> 50.0
2025-03-06 13:46:23,904 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:23,904 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:23,905 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:23,905 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:23,906 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:23,907 - shroombox - INFO - Humidity setpoint: 50.0%
2025-03-06 13:46:23,908 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:23,908 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:23,909 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:25,435 - shroombox.sensor - INFO - Successful measurement at 13:46:25 - CO2: 685.36ppm, Temp: 20.37°C, RH: 36.37%
2025-03-06 13:46:25,435 - shroombox - INFO - Live measurements - Temp: 20.37°C, RH: 36.37%, CO2: 685.36ppm
2025-03-06 13:46:27,474 - shroombox.sensor - INFO - Successful measurement at 13:46:27 - CO2: 685.61ppm, Temp: 20.35°C, RH: 36.27%
2025-03-06 13:46:27,474 - shroombox - INFO - Live measurements - Temp: 20.35°C, RH: 36.27%, CO2: 685.61ppm
2025-03-06 13:46:27,995 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:28,047 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:28,049 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:28,050 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:28,051 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:28,052 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:28,053 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:28,055 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:28,056 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:28,057 - shroombox - INFO - =======================================================
2025-03-06 13:46:28,058 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:29,962 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:29,966 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:29,972 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:29,975 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:29,998 - shroombox.sensor - INFO - Successful measurement at 13:46:29 - CO2: 686.26ppm, Temp: 20.37°C, RH: 36.29%
2025-03-06 13:46:29,998 - shroombox - INFO - Live measurements - Temp: 20.37°C, RH: 36.29%, CO2: 686.26ppm
2025-03-06 13:46:30,027 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:30,028 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:30,131 - shroombox - INFO - Heater set to OFF - Temp: 20.37°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:30,145 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:30,147 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=50.0%
2025-03-06 13:46:30,148 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=True
2025-03-06 13:46:30,148 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Currently in burst mode, 10.2 seconds left
2025-03-06 13:46:30,149 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Continuing burst
2025-03-06 13:46:30,150 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:30,151 - shroombox - INFO - Last modified time: 2025-03-06 13:46:30
2025-03-06 13:46:30,152 - shroombox - INFO - Last checked time: 2025-03-06 13:46:23
2025-03-06 13:46:30,152 - shroombox - INFO - Current time: 2025-03-06 13:46:30
2025-03-06 13:46:30,153 - shroombox - INFO - Config file modified at 2025-03-06 13:46:30.128917, reloading...
2025-03-06 13:46:30,154 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:30,155 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:30,156 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:30,157 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:30,158 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:30,159 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:30,160 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:30,160 - shroombox - INFO -   Humidity setpoint: 50.0%
2025-03-06 13:46:30,161 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:30,162 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:30,163 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:30,164 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:30,165 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 50.0 -> 50.0
2025-03-06 13:46:30,166 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:30,166 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:30,167 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:30,168 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:30,169 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:30,170 - shroombox - INFO - Humidity setpoint: 50.0%
2025-03-06 13:46:30,171 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:30,171 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:30,172 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:32,050 - shroombox.sensor - INFO - Successful measurement at 13:46:32 - CO2: 686.99ppm, Temp: 20.36°C, RH: 36.27%
2025-03-06 13:46:32,051 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.27%, CO2: 686.99ppm
2025-03-06 13:46:34,260 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:34,301 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:34,302 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:34,303 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:34,304 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:34,305 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:34,306 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:34,307 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:34,307 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:34,308 - shroombox - INFO - =======================================================
2025-03-06 13:46:34,309 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:34,714 - shroombox.sensor - INFO - Successful measurement at 13:46:34 - CO2: 688.35ppm, Temp: 20.36°C, RH: 36.24%
2025-03-06 13:46:34,715 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:34,716 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:34,717 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:34,760 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:34,761 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:34,856 - shroombox - INFO - Heater set to OFF - Temp: 20.36°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:34,871 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:34,872 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=50.0%
2025-03-06 13:46:34,873 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=True
2025-03-06 13:46:34,874 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Currently in burst mode, 5.5 seconds left
2025-03-06 13:46:34,874 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Continuing burst
2025-03-06 13:46:34,875 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:34,876 - shroombox - INFO - Last modified time: 2025-03-06 13:46:34
2025-03-06 13:46:34,877 - shroombox - INFO - Last checked time: 2025-03-06 13:46:30
2025-03-06 13:46:34,878 - shroombox - INFO - Current time: 2025-03-06 13:46:34
2025-03-06 13:46:34,878 - shroombox - INFO - Config file modified at 2025-03-06 13:46:34.853137, reloading...
2025-03-06 13:46:34,879 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:34,881 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:34,881 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:34,882 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:34,883 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:34,884 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:34,885 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:34,885 - shroombox - INFO -   Humidity setpoint: 50.0%
2025-03-06 13:46:34,886 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:34,887 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:34,887 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:34,888 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:34,889 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 50.0 -> 50.0
2025-03-06 13:46:34,890 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:34,891 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:34,891 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:34,892 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:34,893 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:34,894 - shroombox - INFO - Humidity setpoint: 50.0%
2025-03-06 13:46:34,894 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:34,895 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:34,896 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:36,731 - shroombox.sensor - INFO - Successful measurement at 13:46:36 - CO2: 688.05ppm, Temp: 20.33°C, RH: 36.26%
2025-03-06 13:46:36,817 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:36,818 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:46:36,819 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:36,819 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:36,820 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:36,820 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:46:36,821 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:36,822 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:36,822 - shroombox - INFO - =======================================================
2025-03-06 13:46:36,823 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:38,751 - shroombox.sensor - INFO - Successful measurement at 13:46:38 - CO2: 688.27ppm, Temp: 20.36°C, RH: 36.27%
2025-03-06 13:46:38,753 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.4°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:38,754 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:38,755 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:38,802 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:38,803 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:38,910 - shroombox - INFO - Heater set to OFF - Temp: 20.36°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:38,931 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:38,933 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=50.0%
2025-03-06 13:46:38,935 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=True
2025-03-06 13:46:38,936 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Currently in burst mode, 1.4 seconds left
2025-03-06 13:46:38,937 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Continuing burst
2025-03-06 13:46:38,939 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:38,940 - shroombox - INFO - Last modified time: 2025-03-06 13:46:38
2025-03-06 13:46:38,941 - shroombox - INFO - Last checked time: 2025-03-06 13:46:34
2025-03-06 13:46:38,942 - shroombox - INFO - Current time: 2025-03-06 13:46:38
2025-03-06 13:46:38,943 - shroombox - INFO - Config file modified at 2025-03-06 13:46:38.909322, reloading...
2025-03-06 13:46:38,945 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:38,946 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:38,947 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:38,948 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:38,950 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:38,951 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:38,952 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:38,953 - shroombox - INFO -   Humidity setpoint: 50.0%
2025-03-06 13:46:38,954 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:38,955 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:38,956 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:38,958 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:38,959 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 50.0 -> 50.0
2025-03-06 13:46:38,960 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:38,961 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:38,962 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:38,963 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:38,964 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:38,965 - shroombox - INFO - Humidity setpoint: 50.0%
2025-03-06 13:46:38,966 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:38,967 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:38,968 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:39,387 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:39,388 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:39,389 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.27%, CO2: 686.99ppm
2025-03-06 13:46:39,391 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:39,391 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.27%, CO2: 686.99ppm
2025-03-06 13:46:41,277 - shroombox.sensor - INFO - Successful measurement at 13:46:41 - CO2: 688.9ppm, Temp: 20.33°C, RH: 36.19%
2025-03-06 13:46:41,319 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:41,320 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:46:41,322 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:41,323 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:41,324 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:41,325 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:46:41,326 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:41,327 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:41,327 - shroombox - INFO - =======================================================
2025-03-06 13:46:41,328 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:43,382 - shroombox.sensor - INFO - Successful measurement at 13:46:43 - CO2: 689.54ppm, Temp: 20.35°C, RH: 36.16%
2025-03-06 13:46:43,382 - shroombox - INFO - Live measurements - Temp: 20.35°C, RH: 36.16%, CO2: 689.54ppm
2025-03-06 13:46:43,732 - shroombox - INFO - Received settings update request with data: {
  "available_devices": [
    {
      "ip": "192.168.8.181",
      "mac": "B0-19-21-C4-C9-9D",
      "model": "P115",
      "name": "Humidifier",
      "role": "humidifier",
      "state": true,
      "type": "SMART.TAPOPLUG"
    },
    {
      "ip": "192.168.8.164",
      "mac": "B0-19-21-C4-CE-97",
      "model": "P115",
      "name": "Heatmat",
      "role": "heater",
      "state": false,
      "type": "SMART.TAPOPLUG"
    }
  ],
  "co2": {
    "pid": {
      "Kd": 0,
      "Ki": -0.01,
      "Kp": -1
    }
  },
  "environment": {
    "current_phase": "colonisation",
    "phases": {
      "cake": {
        "co2_setpoint": 500,
        "rh_setpoint": 0,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      },
      "colonisation": {
        "co2_setpoint": 500,
        "rh_setpoint": 10,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 10
      },
      "growing": {
        "co2_setpoint": 550,
        "rh_setpoint": 85,
        "temp_hysteresis": 0.5,
        "temp_setpoint": 17
      }
    }
  },
  "humidifier": {
    "break_time": 180,
    "burst_interval": 60,
    "burst_max": 30,
    "burst_min": 2,
    "pid": {
      "Kd": 0,
      "Ki": 0.01,
      "Kp": 0.2
    },
    "rh_hysteresis": 2
  },
  "logging": {
    "enabled": true,
    "interval": 30
  },
  "sensor": {
    "measurement_interval": 2
  }
}
2025-03-06 13:46:43,732 - shroombox - INFO - Settings file path: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:43,733 - shroombox - INFO - Successfully loaded current settings from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:43,733 - shroombox - INFO - Current phase: colonisation
2025-03-06 13:46:43,733 - shroombox - INFO - Old settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 50.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 10.0
}
2025-03-06 13:46:43,734 - shroombox - INFO - New settings for colonisation: {
  "co2_setpoint": 500,
  "rh_setpoint": 10.0,
  "temp_hysteresis": 0.5,
  "temp_setpoint": 10.0
}
2025-03-06 13:46:43,734 - shroombox - INFO - No change for temp_setpoint: remains 10.0
2025-03-06 13:46:43,734 - shroombox - INFO - Changing rh_setpoint from 50.0 to 10.0 for colonisation phase
2025-03-06 13:46:43,734 - shroombox - INFO - No change for co2_setpoint: remains 500
2025-03-06 13:46:43,741 - shroombox - INFO - Successfully wrote and verified settings to /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:43,742 - shroombox - INFO - Settings updated successfully for colonisation phase
2025-03-06 13:46:43,742 - shroombox - INFO - Reset controller config_last_modified to 0
2025-03-06 13:46:43,742 - shroombox - INFO - Created task to check config updates
2025-03-06 13:46:43,743 - shroombox - INFO - Running heater diagnostic to apply new settings
2025-03-06 13:46:43,744 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:43,744 - shroombox - INFO - Last modified time: 2025-03-06 13:46:43
2025-03-06 13:46:43,745 - shroombox - INFO - Last checked time: Never
2025-03-06 13:46:43,745 - shroombox - INFO - Current time: 2025-03-06 13:46:43
2025-03-06 13:46:43,745 - shroombox - INFO - Config file modified at 2025-03-06 13:46:43.733535, reloading...
2025-03-06 13:46:43,745 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:43,746 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:43,746 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:43,746 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:43,747 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:43,747 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:43,747 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:43,747 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:46:43,748 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:43,748 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:43,748 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:43,748 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:43,749 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 50.0 -> 10.0
2025-03-06 13:46:43,749 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:43,749 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:43,749 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:43,750 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:43,750 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:43,750 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:46:43,750 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:43,750 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:43,751 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:44,391 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:44,392 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:44,392 - shroombox - INFO - Live measurements - Temp: 20.35°C, RH: 36.16%, CO2: 689.54ppm
2025-03-06 13:46:45,040 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:45,041 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:45,042 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:45,043 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:45,043 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:46:45,084 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:45,085 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:45,188 - shroombox - INFO - Heater set to OFF - Temp: 20.33°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:45,202 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:45,203 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=50.0%
2025-03-06 13:46:45,204 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=True
2025-03-06 13:46:45,205 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Currently in burst mode, -4.9 seconds left
2025-03-06 13:46:45,205 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Burst complete, turning humidifier OFF
2025-03-06 13:46:45,206 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:46:45,220 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:46:45,220 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:46:45,221 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:45,222 - shroombox - INFO - Last modified time: 2025-03-06 13:46:45
2025-03-06 13:46:45,223 - shroombox - INFO - Last checked time: 2025-03-06 13:46:38
2025-03-06 13:46:45,224 - shroombox - INFO - Current time: 2025-03-06 13:46:45
2025-03-06 13:46:45,225 - shroombox - INFO - Config file modified at 2025-03-06 13:46:45.181597, reloading...
2025-03-06 13:46:45,226 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:45,227 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:45,227 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:45,228 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:45,229 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:45,230 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:45,231 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:45,232 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:46:45,232 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:45,233 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:45,234 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:45,234 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:45,235 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 50.0 -> 10.0
2025-03-06 13:46:45,235 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:45,236 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:45,237 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:45,237 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:45,238 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:45,239 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:46:45,240 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:45,241 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:45,242 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:45,789 - shroombox.sensor - INFO - Successful measurement at 13:46:45 - CO2: 690.14ppm, Temp: 20.35°C, RH: 36.11%
2025-03-06 13:46:45,841 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:45,842 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:45,843 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:45,844 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:45,845 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:45,846 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:45,847 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:45,849 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:45,850 - shroombox - INFO - =======================================================
2025-03-06 13:46:45,851 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:47,934 - shroombox.sensor - INFO - Successful measurement at 13:46:47 - CO2: 689.6ppm, Temp: 20.36°C, RH: 36.05%
2025-03-06 13:46:47,982 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:47,983 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:47,983 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:47,983 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:47,983 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:47,984 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:47,984 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:47,984 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:47,984 - shroombox - INFO - =======================================================
2025-03-06 13:46:47,984 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:49,450 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:49,450 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:49,451 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:49,451 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.05%, CO2: 689.6ppm
2025-03-06 13:46:49,452 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:49,453 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.05%, CO2: 689.6ppm
2025-03-06 13:46:49,492 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:49,492 - shroombox - INFO - Current temperature: 20.4°C
2025-03-06 13:46:49,493 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:49,493 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:49,493 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:49,494 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.4 < 9.5)
2025-03-06 13:46:49,494 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:49,494 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:49,494 - shroombox - INFO - =======================================================
2025-03-06 13:46:49,494 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:50,325 - shroombox.sensor - INFO - Successful measurement at 13:46:50 - CO2: 689.28ppm, Temp: 20.36°C, RH: 36.09%
2025-03-06 13:46:50,326 - shroombox - INFO - Live measurements - Temp: 20.36°C, RH: 36.09%, CO2: 689.28ppm
2025-03-06 13:46:50,342 - shroombox.sensor - INFO - Successful measurement at 13:46:50 - CO2: nanppm, Temp: nan°C, RH: nan%
2025-03-06 13:46:50,343 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=nan°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:50,344 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:50,344 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? nan < 9.5)
2025-03-06 13:46:50,437 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:50,440 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:50,952 - shroombox - INFO - Heater set to OFF - Temp: nan°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:50,965 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:50,966 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=nan%, Setpoint=10.0%
2025-03-06 13:46:50,967 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:46:50,967 - shroombox - INFO - HUMIDITY CONTROL DEBUG: PID calculated burst duration: nans (min=0.5s)
2025-03-06 13:46:50,968 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Burst duration nans too short, skipping
2025-03-06 13:46:50,969 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:50,970 - shroombox - INFO - Last modified time: 2025-03-06 13:46:50
2025-03-06 13:46:50,970 - shroombox - INFO - Last checked time: 2025-03-06 13:46:45
2025-03-06 13:46:50,971 - shroombox - INFO - Current time: 2025-03-06 13:46:50
2025-03-06 13:46:50,972 - shroombox - INFO - Config file modified at 2025-03-06 13:46:50.945842, reloading...
2025-03-06 13:46:50,973 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:50,974 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:50,974 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:50,975 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:50,976 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:50,976 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:50,977 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:50,978 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:46:50,979 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:50,980 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:50,980 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:50,981 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:50,982 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:46:50,983 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:50,984 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:50,984 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:50,985 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:50,986 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:50,986 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:46:50,987 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:50,988 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:50,989 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:52,850 - shroombox.sensor - INFO - Successful measurement at 13:46:52 - CO2: 690.2ppm, Temp: 20.33°C, RH: 36.11%
2025-03-06 13:46:52,850 - shroombox - INFO - Live measurements - Temp: 20.33°C, RH: 36.11%, CO2: 690.2ppm
2025-03-06 13:46:54,909 - shroombox.sensor - INFO - Successful measurement at 13:46:54 - CO2: 690.07ppm, Temp: 20.32°C, RH: 36.16%
2025-03-06 13:46:54,959 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:54,960 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:46:54,961 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:54,962 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:54,963 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:54,964 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:46:54,965 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:54,966 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:54,967 - shroombox - INFO - =======================================================
2025-03-06 13:46:54,968 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:57,044 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:46:57,045 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:46:57,046 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:57,047 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:57,047 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:46:57,092 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:57,093 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:57,190 - shroombox - INFO - Heater set to OFF - Temp: 20.32°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:57,203 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:57,204 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=10.0%
2025-03-06 13:46:57,205 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:46:57,206 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:46:57,207 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:46:57,218 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:46:57,219 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:46:57,220 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:57,221 - shroombox - INFO - Last modified time: 2025-03-06 13:46:57
2025-03-06 13:46:57,221 - shroombox - INFO - Last checked time: 2025-03-06 13:46:50
2025-03-06 13:46:57,222 - shroombox - INFO - Current time: 2025-03-06 13:46:57
2025-03-06 13:46:57,222 - shroombox - INFO - Config file modified at 2025-03-06 13:46:57.186096, reloading...
2025-03-06 13:46:57,223 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:57,224 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:57,225 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:57,225 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:57,226 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:57,227 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:57,228 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:57,229 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:46:57,229 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:57,230 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:57,231 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:57,232 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:57,232 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:46:57,233 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:57,234 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:57,234 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:57,235 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:57,236 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:57,236 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:46:57,237 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:57,238 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:57,239 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:46:57,273 - shroombox.sensor - INFO - Successful measurement at 13:46:57 - CO2: 690.71ppm, Temp: 20.32°C, RH: 36.16%
2025-03-06 13:46:57,315 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:46:57,315 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:46:57,316 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:57,317 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:46:57,317 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:46:57,318 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:46:57,319 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:46:57,320 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:46:57,320 - shroombox - INFO - =======================================================
2025-03-06 13:46:57,321 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:46:59,288 - shroombox.sensor - INFO - Successful measurement at 13:46:59 - CO2: 690.69ppm, Temp: 20.33°C, RH: 36.13%
2025-03-06 13:46:59,289 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:46:59,289 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:46:59,290 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:46:59,333 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:46:59,334 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:46:59,441 - shroombox - INFO - Heater set to OFF - Temp: 20.33°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:46:59,455 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:46:59,457 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.1%, Setpoint=10.0%
2025-03-06 13:46:59,457 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:46:59,458 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.1% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:46:59,459 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:46:59,465 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:46:59,466 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:46:59,467 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:59,468 - shroombox - INFO - Last modified time: 2025-03-06 13:46:59
2025-03-06 13:46:59,468 - shroombox - INFO - Last checked time: 2025-03-06 13:46:57
2025-03-06 13:46:59,469 - shroombox - INFO - Current time: 2025-03-06 13:46:59
2025-03-06 13:46:59,470 - shroombox - INFO - Config file modified at 2025-03-06 13:46:59.434185, reloading...
2025-03-06 13:46:59,471 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:46:59,472 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:59,472 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:46:59,473 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:46:59,474 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:46:59,475 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:46:59,475 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:46:59,476 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:46:59,477 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:46:59,477 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:46:59,478 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:46:59,479 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:46:59,479 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:46:59,480 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:46:59,481 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:46:59,481 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:46:59,482 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:46:59,483 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:46:59,483 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:46:59,484 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:46:59,485 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:46:59,486 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:00,409 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:00,410 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:47:00,411 - shroombox - INFO - Live measurements - Temp: 20.33°C, RH: 36.11%, CO2: 690.2ppm
2025-03-06 13:47:00,413 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:00,414 - shroombox - INFO - Live measurements - Temp: 20.33°C, RH: 36.11%, CO2: 690.2ppm
2025-03-06 13:47:01,812 - shroombox.sensor - INFO - Successful measurement at 13:47:01 - CO2: 691.66ppm, Temp: 20.33°C, RH: 36.19%
2025-03-06 13:47:01,855 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:01,855 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:01,856 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:01,857 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:01,858 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:01,859 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:01,859 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:01,860 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:01,861 - shroombox - INFO - =======================================================
2025-03-06 13:47:01,862 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:03,872 - shroombox.sensor - INFO - Successful measurement at 13:47:03 - CO2: 691.16ppm, Temp: 20.32°C, RH: 36.26%
2025-03-06 13:47:03,872 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:05,555 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:05,556 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:47:05,558 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:05,559 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:05,560 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:05,606 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:05,607 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:05,702 - shroombox - INFO - Heater set to OFF - Temp: 20.33°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:05,719 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:05,720 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=10.0%
2025-03-06 13:47:05,722 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:05,723 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:05,724 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:05,738 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:05,739 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:05,740 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:05,741 - shroombox - INFO - Last modified time: 2025-03-06 13:47:05
2025-03-06 13:47:05,741 - shroombox - INFO - Last checked time: 2025-03-06 13:46:59
2025-03-06 13:47:05,742 - shroombox - INFO - Current time: 2025-03-06 13:47:05
2025-03-06 13:47:05,743 - shroombox - INFO - Config file modified at 2025-03-06 13:47:05.698426, reloading...
2025-03-06 13:47:05,744 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:05,744 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:05,745 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:05,746 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:05,746 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:05,747 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:05,748 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:05,748 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:05,749 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:05,750 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:05,751 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:05,751 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:05,752 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:05,753 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:05,754 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:05,754 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:05,755 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:05,756 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:05,756 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:05,757 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:05,758 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:05,758 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:06,319 - shroombox.sensor - INFO - Successful measurement at 13:47:06 - CO2: 690.72ppm, Temp: 20.32°C, RH: 36.23%
2025-03-06 13:47:06,366 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:06,367 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:06,368 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:06,368 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:06,369 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:06,370 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:06,370 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:06,371 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:06,371 - shroombox - INFO - =======================================================
2025-03-06 13:47:06,372 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:06,404 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:06,405 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:47:06,405 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:08,336 - shroombox.sensor - WARNING - Measurement returned None (attempt 1). Retrying...
2025-03-06 13:47:08,846 - shroombox.sensor - WARNING - Measurement returned None (attempt 2). Retrying...
2025-03-06 13:47:09,355 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:09,356 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:47:09,357 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:09,357 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:09,358 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:09,400 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:09,401 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:09,500 - shroombox - INFO - Heater set to OFF - Temp: 20.32°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:09,517 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:09,518 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=10.0%
2025-03-06 13:47:09,519 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:09,520 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:09,521 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:09,534 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:09,535 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:09,539 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:09,541 - shroombox - INFO - Last modified time: 2025-03-06 13:47:09
2025-03-06 13:47:09,542 - shroombox - INFO - Last checked time: 2025-03-06 13:47:05
2025-03-06 13:47:09,544 - shroombox - INFO - Current time: 2025-03-06 13:47:09
2025-03-06 13:47:09,545 - shroombox - INFO - Config file modified at 2025-03-06 13:47:09.494568, reloading...
2025-03-06 13:47:09,548 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:09,549 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:09,550 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:09,551 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:09,552 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:09,553 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:09,554 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:09,554 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:09,555 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:09,556 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:09,556 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:09,557 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:09,557 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:09,558 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:09,559 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:09,560 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:09,560 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:09,561 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:09,562 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:09,562 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:09,563 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:09,564 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:10,619 - shroombox.sensor - INFO - Successful measurement at 13:47:10 - CO2: 691.19ppm, Temp: 20.33°C, RH: 36.08%
2025-03-06 13:47:10,669 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:10,670 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:10,671 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:10,673 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:10,675 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:10,677 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:10,679 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:10,682 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:10,684 - shroombox - INFO - =======================================================
2025-03-06 13:47:10,685 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:12,392 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:12,392 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:12,394 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:12,394 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:13,141 - shroombox.sensor - INFO - Successful measurement at 13:47:13 - CO2: 691.07ppm, Temp: 20.32°C, RH: 36.05%
2025-03-06 13:47:13,142 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:13,143 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:13,143 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:13,194 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:13,195 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:13,304 - shroombox - INFO - Heater set to OFF - Temp: 20.32°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:13,318 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:13,319 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.0%, Setpoint=10.0%
2025-03-06 13:47:13,319 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:13,320 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.0% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:13,321 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:13,329 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:13,330 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:13,331 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:13,331 - shroombox - INFO - Last modified time: 2025-03-06 13:47:13
2025-03-06 13:47:13,332 - shroombox - INFO - Last checked time: 2025-03-06 13:47:09
2025-03-06 13:47:13,332 - shroombox - INFO - Current time: 2025-03-06 13:47:13
2025-03-06 13:47:13,333 - shroombox - INFO - Config file modified at 2025-03-06 13:47:13.298706, reloading...
2025-03-06 13:47:13,334 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:13,335 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:13,336 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:13,336 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:13,337 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:13,338 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:13,339 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:13,340 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:13,340 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:13,341 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:13,342 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:13,342 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:13,343 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:13,344 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:13,345 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:13,346 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:13,347 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:13,347 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:13,348 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:13,349 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:13,349 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:13,350 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:15,158 - shroombox.sensor - INFO - Successful measurement at 13:47:15 - CO2: 691.27ppm, Temp: 20.3°C, RH: 36.11%
2025-03-06 13:47:15,204 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:15,204 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:15,205 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:15,206 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:15,206 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:15,207 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:15,207 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:15,208 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:15,208 - shroombox - INFO - =======================================================
2025-03-06 13:47:15,209 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:17,684 - shroombox.sensor - INFO - Successful measurement at 13:47:17 - CO2: 691.31ppm, Temp: 20.27°C, RH: 36.15%
2025-03-06 13:47:17,685 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:17,686 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:17,686 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:17,728 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:17,729 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:17,824 - shroombox - INFO - Heater set to OFF - Temp: 20.27°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:17,838 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:17,839 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.1%, Setpoint=10.0%
2025-03-06 13:47:17,840 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:17,841 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.1% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:17,841 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:17,848 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:17,849 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:17,850 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:17,850 - shroombox - INFO - Last modified time: 2025-03-06 13:47:17
2025-03-06 13:47:17,851 - shroombox - INFO - Last checked time: 2025-03-06 13:47:13
2025-03-06 13:47:17,852 - shroombox - INFO - Current time: 2025-03-06 13:47:17
2025-03-06 13:47:17,852 - shroombox - INFO - Config file modified at 2025-03-06 13:47:17.818866, reloading...
2025-03-06 13:47:17,853 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:17,854 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:17,855 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:17,855 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:17,856 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:17,857 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:17,858 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:17,859 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:17,860 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:17,861 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:17,861 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:17,862 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:17,863 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:17,863 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:17,864 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:17,865 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:17,865 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:17,866 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:17,867 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:17,867 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:17,868 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:17,869 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:18,378 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:18,379 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:18,380 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:18,381 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:19,701 - shroombox.sensor - INFO - Successful measurement at 13:47:19 - CO2: 691.35ppm, Temp: 20.3°C, RH: 36.21%
2025-03-06 13:47:19,741 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:19,742 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:19,743 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:19,744 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:19,745 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:19,746 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:19,746 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:19,747 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:19,748 - shroombox - INFO - =======================================================
2025-03-06 13:47:19,749 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:22,224 - shroombox.sensor - INFO - Successful measurement at 13:47:22 - CO2: 690.82ppm, Temp: 20.3°C, RH: 36.23%
2025-03-06 13:47:22,225 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:22,226 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:22,226 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:22,271 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:22,272 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:22,370 - shroombox - INFO - Heater set to OFF - Temp: 20.3°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:22,386 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:22,387 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=10.0%
2025-03-06 13:47:22,388 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:22,388 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:22,389 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:22,414 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:22,415 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:22,417 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:22,418 - shroombox - INFO - Last modified time: 2025-03-06 13:47:22
2025-03-06 13:47:22,419 - shroombox - INFO - Last checked time: 2025-03-06 13:47:17
2025-03-06 13:47:22,419 - shroombox - INFO - Current time: 2025-03-06 13:47:22
2025-03-06 13:47:22,420 - shroombox - INFO - Config file modified at 2025-03-06 13:47:22.367022, reloading...
2025-03-06 13:47:22,421 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:22,422 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:22,423 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:22,424 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:22,425 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:22,426 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:22,428 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:22,428 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:22,429 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:22,430 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:22,431 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:22,432 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:22,433 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:22,434 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:22,435 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:22,436 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:22,437 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:22,438 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:22,438 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:22,439 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:22,440 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:22,441 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:24,242 - shroombox.sensor - INFO - Successful measurement at 13:47:24 - CO2: 689.95ppm, Temp: 20.3°C, RH: 36.26%
2025-03-06 13:47:24,287 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:24,288 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:24,289 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:24,289 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:24,290 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:24,290 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:24,291 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:24,292 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:24,292 - shroombox - INFO - =======================================================
2025-03-06 13:47:24,293 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:24,386 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:24,387 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #6)
2025-03-06 13:47:24,387 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:24,390 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:24,390 - shroombox - INFO - Live measurements - Temp: 20.32°C, RH: 36.26%, CO2: 691.16ppm
2025-03-06 13:47:26,765 - shroombox.sensor - INFO - Successful measurement at 13:47:26 - CO2: 689.51ppm, Temp: 20.29°C, RH: 36.21%
2025-03-06 13:47:26,766 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:26,767 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:26,768 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:26,824 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:26,825 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:26,924 - shroombox - INFO - Heater set to OFF - Temp: 20.29°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:26,939 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:26,940 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=10.0%
2025-03-06 13:47:26,940 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:26,941 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:26,942 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:26,954 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:26,955 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:26,956 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:26,957 - shroombox - INFO - Last modified time: 2025-03-06 13:47:26
2025-03-06 13:47:26,957 - shroombox - INFO - Last checked time: 2025-03-06 13:47:22
2025-03-06 13:47:26,958 - shroombox - INFO - Current time: 2025-03-06 13:47:26
2025-03-06 13:47:26,959 - shroombox - INFO - Config file modified at 2025-03-06 13:47:26.919173, reloading...
2025-03-06 13:47:26,960 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:26,960 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:26,961 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:26,962 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:26,963 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:26,963 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:26,964 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:26,965 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:26,966 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:26,966 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:26,967 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:26,968 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:26,968 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:26,969 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:26,970 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:26,970 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:26,971 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:26,972 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:26,972 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:26,973 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:26,974 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:26,975 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:28,888 - shroombox.sensor - INFO - Successful measurement at 13:47:28 - CO2: 689.21ppm, Temp: 20.29°C, RH: 36.23%
2025-03-06 13:47:28,889 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 36.23%, CO2: 689.21ppm
2025-03-06 13:47:30,406 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:30,407 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:47:30,407 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 36.23%, CO2: 689.21ppm
2025-03-06 13:47:31,334 - shroombox.sensor - INFO - Successful measurement at 13:47:31 - CO2: 689.28ppm, Temp: 20.3°C, RH: 36.23%
2025-03-06 13:47:31,392 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:31,393 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:31,394 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:31,394 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:31,395 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:31,396 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:31,397 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:31,398 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:31,399 - shroombox - INFO - =======================================================
2025-03-06 13:47:31,399 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:33,021 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:33,022 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:47:33,023 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:33,024 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:33,024 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:33,126 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:33,127 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:33,229 - shroombox - INFO - Heater set to OFF - Temp: 20.3°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:33,245 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:33,246 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.2%, Setpoint=10.0%
2025-03-06 13:47:33,246 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:33,247 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.2% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:33,248 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:33,256 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:33,257 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:33,259 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:33,259 - shroombox - INFO - Last modified time: 2025-03-06 13:47:33
2025-03-06 13:47:33,261 - shroombox - INFO - Last checked time: 2025-03-06 13:47:26
2025-03-06 13:47:33,262 - shroombox - INFO - Current time: 2025-03-06 13:47:33
2025-03-06 13:47:33,263 - shroombox - INFO - Config file modified at 2025-03-06 13:47:33.223374, reloading...
2025-03-06 13:47:33,264 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:33,265 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:33,265 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:33,266 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:33,267 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:33,267 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:33,268 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:33,269 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:33,270 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:33,271 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:33,272 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:33,273 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:33,273 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:33,274 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:33,275 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:33,276 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:33,276 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:33,277 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:33,277 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:33,279 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:33,280 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:33,281 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:33,350 - shroombox.sensor - INFO - Successful measurement at 13:47:33 - CO2: 688.94ppm, Temp: 20.26°C, RH: 36.22%
2025-03-06 13:47:33,391 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:33,392 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:33,393 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:33,394 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:33,394 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:33,395 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:33,395 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:33,397 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:33,397 - shroombox - INFO - =======================================================
2025-03-06 13:47:33,398 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:35,872 - shroombox.sensor - INFO - Successful measurement at 13:47:35 - CO2: 689.03ppm, Temp: 20.29°C, RH: 36.26%
2025-03-06 13:47:35,873 - shroombox - INFO - TEMP CONTROL DEBUG: Current temp=20.3°C, Setpoint=10.0°C, Hysteresis=0.5°C
2025-03-06 13:47:35,874 - shroombox - INFO - TEMP CONTROL DEBUG: Turn on threshold=9.5°C, Current heater state=OFF
2025-03-06 13:47:35,875 - shroombox - INFO - TEMP CONTROL DEBUG: Should heat? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:35,961 - shroombox - INFO - TEMP CONTROL DEBUG: Enforcing heater state to OFF based on temperature logic
2025-03-06 13:47:35,962 - shroombox - INFO - Setting heater to OFF
2025-03-06 13:47:36,066 - shroombox - INFO - Heater set to OFF - Temp: 20.29°C (Target: 10.0°C ±0.5°C)
2025-03-06 13:47:36,081 - shroombox - INFO - ✓ Logged heater state: OFF
2025-03-06 13:47:36,083 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current RH=36.3%, Setpoint=10.0%
2025-03-06 13:47:36,083 - shroombox - INFO - HUMIDITY CONTROL DEBUG: Current humidifier state=ON, Bursting=False
2025-03-06 13:47:36,084 - shroombox - INFO - HUMIDITY CONTROL DEBUG: RH 36.3% is above setpoint 10.0%, turning humidifier OFF
2025-03-06 13:47:36,085 - shroombox - INFO - SET_HUMIDIFIER_STATE: Setting humidifier to OFF
2025-03-06 13:47:36,092 - shroombox.device - ERROR - Error setting device state: Tapo(SessionTimeout)
2025-03-06 13:47:36,092 - shroombox - ERROR - SET_HUMIDIFIER_STATE: Failed to set humidifier state to OFF
2025-03-06 13:47:36,094 - shroombox - INFO - Checking config updates - File: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:36,094 - shroombox - INFO - Last modified time: 2025-03-06 13:47:36
2025-03-06 13:47:36,095 - shroombox - INFO - Last checked time: 2025-03-06 13:47:33
2025-03-06 13:47:36,096 - shroombox - INFO - Current time: 2025-03-06 13:47:36
2025-03-06 13:47:36,097 - shroombox - INFO - Config file modified at 2025-03-06 13:47:36.063461, reloading...
2025-03-06 13:47:36,098 - shroombox - INFO - Current config file content (first 500 chars): {
    "available_devices": [
        {
            "ip": "192.168.8.181",
            "mac": "B0-19-21-C4-C9-9D",
            "model": "P115",
            "name": "Humidifier",
            "role": "humidifier",
            "state": true,
            "type": "SMART.TAPOPLUG"
        },
        {
            "ip": "192.168.8.164",
            "mac": "B0-19-21-C4-CE-97",
            "model": "P115",
            "name": "Heatmat",
            "role": "heater",
            "state": false,
           ...
2025-03-06 13:47:36,099 - shroombox - INFO - Loading config from: /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:36,099 - shroombox - INFO - Config file permissions: 0o100644
2025-03-06 13:47:36,100 - shroombox - INFO - Config file owner: 1000, group: 1000
2025-03-06 13:47:36,101 - shroombox - INFO - Successfully loaded config from /home/danny/Github/shroombox/shroombox3/config/settings.json
2025-03-06 13:47:36,102 - shroombox - INFO - Loaded settings for phase 'colonisation':
2025-03-06 13:47:36,103 - shroombox - INFO -   Temperature setpoint: 10.0°C
2025-03-06 13:47:36,103 - shroombox - INFO -   Humidity setpoint: 10.0%
2025-03-06 13:47:36,104 - shroombox - INFO -   CO2 setpoint: 500ppm
2025-03-06 13:47:36,105 - shroombox - INFO - CONFIG UPDATE: Phase changed: colonisation -> colonisation
2025-03-06 13:47:36,105 - shroombox - INFO - CONFIG UPDATE: Temperature setpoint: 10.0 -> 10.0
2025-03-06 13:47:36,106 - shroombox - INFO - CONFIG UPDATE: CO2 setpoint: 500 -> 500
2025-03-06 13:47:36,107 - shroombox - INFO - CONFIG UPDATE: Humidity setpoint: 10.0 -> 10.0
2025-03-06 13:47:36,108 - shroombox - INFO - CONFIG UPDATE: Heater state in config: False -> False
2025-03-06 13:47:36,108 - shroombox - INFO - CONFIG UPDATE: Heater IP: 192.168.8.164 -> 192.168.8.164
2025-03-06 13:47:36,109 - shroombox - INFO - Updating controllers with new settings...
2025-03-06 13:47:36,110 - shroombox - INFO - Updating controllers with phase: colonisation
2025-03-06 13:47:36,110 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:36,111 - shroombox - INFO - Humidity setpoint: 10.0%
2025-03-06 13:47:36,112 - shroombox - INFO - CO2 setpoint: 500ppm
2025-03-06 13:47:36,113 - shroombox - INFO - Controllers updated successfully with new settings
2025-03-06 13:47:36,113 - shroombox - INFO - Running heater diagnostic with new settings
2025-03-06 13:47:36,409 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:36,410 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 36.23%, CO2: 689.21ppm
2025-03-06 13:47:36,412 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:36,413 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 36.23%, CO2: 689.21ppm
2025-03-06 13:47:37,890 - shroombox.sensor - INFO - Successful measurement at 13:47:37 - CO2: 689.64ppm, Temp: 20.29°C, RH: 36.24%
2025-03-06 13:47:37,936 - shroombox - INFO - =================== HEATER DIAGNOSTIC ===================
2025-03-06 13:47:37,936 - shroombox - INFO - Current temperature: 20.3°C
2025-03-06 13:47:37,937 - shroombox - INFO - Temperature setpoint: 10.0°C
2025-03-06 13:47:37,938 - shroombox - INFO - Hysteresis: 0.5°C
2025-03-06 13:47:37,938 - shroombox - INFO - Heat-on threshold: 9.5°C
2025-03-06 13:47:37,939 - shroombox - INFO - Criteria met for heating? False (temp < threshold? 20.3 < 9.5)
2025-03-06 13:47:37,940 - shroombox - INFO - Current heater state according to Tapo: OFF
2025-03-06 13:47:37,940 - shroombox - INFO - Local tracking of heater state: OFF
2025-03-06 13:47:37,941 - shroombox - INFO - =======================================================
2025-03-06 13:47:37,942 - shroombox - INFO - HEATER DIAGNOSTIC: Heater state is correct according to control logic.
2025-03-06 13:47:40,384 - shroombox.sensor - INFO - Successful measurement at 13:47:40 - CO2: 689.28ppm, Temp: 20.27°C, RH: 36.24%
2025-03-06 13:47:40,385 - shroombox - INFO - Live measurements - Temp: 20.27°C, RH: 36.24%, CO2: 689.28ppm
2025-03-06 13:47:42,408 - shroombox.sensor - WARNING - Sensor data not ready within timeout period
2025-03-06 13:47:42,409 - shroombox.sensor - WARNING - Using last successful measurement as fallback (failure #1)
2025-03-06 13:47:42,410 - shroombox - INFO - Live measurements - Temp: 20.27°C, RH: 36.24%, CO2: 689.28ppm
2025-03-06 13:47:44,335 - shroombox.sensor - INFO - Successful measurement at 13:47:44 - CO2: 689.33ppm, Temp: 20.27°C, RH: 36.22%
2025-03-06 13:47:44,335 - shroombox - INFO - Live measurements - Temp: 20.27°C, RH: 36.22%, CO2: 689.33ppm
2025-03-06 13:47:46,349 - shroombox.sensor - INFO - Successful measurement at 13:47:46 - CO2: 689.23ppm, Temp: 20.26°C, RH: 36.26%
2025-03-06 13:47:46,350 - shroombox - INFO - Live measurements - Temp: 20.26°C, RH: 36.26%, CO2: 689.23ppm
2025-03-06 13:47:49,332 - shroombox.sensor - INFO - Successful measurement at 13:47:49 - CO2: 687.63ppm, Temp: 20.29°C, RH: 36.18%
2025-03-06 13:47:49,332 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 36.18%, CO2: 687.63ppm
2025-03-06 13:47:51,856 - shroombox.sensor - INFO - Successful measurement at 13:47:51 - CO2: 687.95ppm, Temp: 20.3°C, RH: 36.13%
2025-03-06 13:47:51,857 - shroombox - INFO - Live measurements - Temp: 20.3°C, RH: 36.13%, CO2: 687.95ppm
2025-03-06 13:47:54,322 - shroombox.sensor - INFO - Successful measurement at 13:47:54 - CO2: 687.59ppm, Temp: 20.29°C, RH: 36.05%
2025-03-06 13:47:54,323 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 36.05%, CO2: 687.59ppm
2025-03-06 13:47:56,337 - shroombox.sensor - INFO - Successful measurement at 13:47:56 - CO2: 688.13ppm, Temp: 20.29°C, RH: 36.05%
2025-03-06 13:47:56,338 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 36.05%, CO2: 688.13ppm
2025-03-06 13:48:00,382 - shroombox.sensor - INFO - Successful measurement at 13:48:00 - CO2: 688.42ppm, Temp: 20.29°C, RH: 35.93%
2025-03-06 13:48:00,382 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 35.93%, CO2: 688.42ppm
2025-03-06 13:48:02,398 - shroombox.sensor - INFO - Successful measurement at 13:48:02 - CO2: 688.37ppm, Temp: 20.27°C, RH: 35.94%
2025-03-06 13:48:02,398 - shroombox - INFO - Live measurements - Temp: 20.27°C, RH: 35.94%, CO2: 688.37ppm
2025-03-06 13:48:06,376 - shroombox.sensor - INFO - Successful measurement at 13:48:06 - CO2: 689.34ppm, Temp: 20.27°C, RH: 35.93%
2025-03-06 13:48:06,377 - shroombox - INFO - Live measurements - Temp: 20.27°C, RH: 35.93%, CO2: 689.34ppm
2025-03-06 13:48:08,391 - shroombox.sensor - INFO - Successful measurement at 13:48:08 - CO2: 689.79ppm, Temp: 20.3°C, RH: 35.88%
2025-03-06 13:48:08,392 - shroombox - INFO - Live measurements - Temp: 20.3°C, RH: 35.88%, CO2: 689.79ppm
2025-03-06 13:48:12,370 - shroombox.sensor - INFO - Successful measurement at 13:48:12 - CO2: 689.74ppm, Temp: 20.29°C, RH: 35.75%
2025-03-06 13:48:12,371 - shroombox - INFO - Live measurements - Temp: 20.29°C, RH: 35.75%, CO2: 689.74ppm
